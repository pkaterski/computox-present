import{g as qs,m as ve,h as L,p as bp,U as $t,W as V0,c1 as tr,c2 as He,Z as fe,c3 as K0,c4 as wp,aJ as We,c5 as Lr,c6 as jr,c7 as xp,c8 as Yr,c9 as Cp,ca as W0,cb as Mp,cc as Y0,n as Un,o as Se,cd as Z0,ce as Q0,v as X0,z as ue,b as z,cf as nc,K as qr,S as J0,w as Cn,cg as e1,ch as t1,ci as Je,cj as r1,ck as n1,i as Fs,cl as $n,H as Mt,cm as ac,cn as Sp,co as a1,cp as xe,j as Ap,cq as ic,cr as Ip,cs as Pp,ct as Ep,cu as Mn,bX as i1,a1 as o1,aP as u1,cv as _p,k as Op,cw as pt,cx as s1,cy as l1,cz as c1,cA as et,cB as d1,ae as f1,ak as v1,cC as h1,cD as p1,cE as m1,cF as g1,cG as y1,_ as b1,cH as kp}from"./ketcher-core-5quRUJZj.js";import{j as v,a as E,F as Y}from"./emotion-react-jsx-runtime.browser.esm-0nCcJruD.js";import{a as A,p as w1,G as x1,q as x,E as C1,T as M1,P as S1,s as Tp,u as Np,F as vn,S as A1,v as cr,R as yt,B as Rp,w as I1,I as Gn,x as se,K as qt,y as P1,b as Vn,z as Kn,A as E1,D as Dp,H as Bs,J as _1,L as O1,M as oc,N as Wn,O as k1,Q as Sn,U as T1,V as N1,W as R1,X as D1,Y as L1,Z as j1,$ as q1,a0 as Lp,a1 as br,a2 as An,a3 as F1,a4 as zs,a5 as B1,a6 as jp,a7 as z1,a8 as H1,a9 as U1,aa as $1,ab as G1,ac as qp,ad as V1,ae as K1,af as W1,ag as Y1,k as Hs,l as Z1,m as Q1,n as is,o as X1,t as uc}from"./ketcher-react-xHOHKbM9.js";var ba,sc;function Us(){if(sc)return ba;sc=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,i=Array(a);++n<a;)i[n]=r(e[n],n,e);return i}return ba=t,ba}var wa,lc;function J1(){if(lc)return wa;lc=1;function t(){this.__data__=[],this.size=0}return wa=t,wa}var xa,cc;function $s(){if(cc)return xa;cc=1;function t(e,r){return e===r||e!==e&&r!==r}return xa=t,xa}var Ca,dc;function Yn(){if(dc)return Ca;dc=1;var t=$s();function e(r,n){for(var a=r.length;a--;)if(t(r[a][0],n))return a;return-1}return Ca=e,Ca}var Ma,fc;function ey(){if(fc)return Ma;fc=1;var t=Yn(),e=Array.prototype,r=e.splice;function n(a){var i=this.__data__,o=t(i,a);if(o<0)return!1;var u=i.length-1;return o==u?i.pop():r.call(i,o,1),--this.size,!0}return Ma=n,Ma}var Sa,vc;function ty(){if(vc)return Sa;vc=1;var t=Yn();function e(r){var n=this.__data__,a=t(n,r);return a<0?void 0:n[a][1]}return Sa=e,Sa}var Aa,hc;function ry(){if(hc)return Aa;hc=1;var t=Yn();function e(r){return t(this.__data__,r)>-1}return Aa=e,Aa}var Ia,pc;function ny(){if(pc)return Ia;pc=1;var t=Yn();function e(r,n){var a=this.__data__,i=t(a,r);return i<0?(++this.size,a.push([r,n])):a[i][1]=n,this}return Ia=e,Ia}var Pa,mc;function Zn(){if(mc)return Pa;mc=1;var t=J1(),e=ey(),r=ty(),n=ry(),a=ny();function i(o){var u=-1,s=o==null?0:o.length;for(this.clear();++u<s;){var l=o[u];this.set(l[0],l[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,Pa=i,Pa}var Ea,gc;function ay(){if(gc)return Ea;gc=1;var t=Zn();function e(){this.__data__=new t,this.size=0}return Ea=e,Ea}var _a,yc;function iy(){if(yc)return _a;yc=1;function t(e){var r=this.__data__,n=r.delete(e);return this.size=r.size,n}return _a=t,_a}var Oa,bc;function oy(){if(bc)return Oa;bc=1;function t(e){return this.__data__.get(e)}return Oa=t,Oa}var ka,wc;function uy(){if(wc)return ka;wc=1;function t(e){return this.__data__.has(e)}return ka=t,ka}var Ta,xc;function Fp(){if(xc)return Ta;xc=1;var t=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis;return Ta=t,Ta}var Na,Cc;function je(){if(Cc)return Na;Cc=1;var t=Fp(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return Na=r,Na}var Ra,Mc;function dr(){if(Mc)return Ra;Mc=1;var t=je(),e=t.Symbol;return Ra=e,Ra}var Da,Sc;function sy(){if(Sc)return Da;Sc=1;var t=dr(),e=Object.prototype,r=e.hasOwnProperty,n=e.toString,a=t?t.toStringTag:void 0;function i(o){var u=r.call(o,a),s=o[a];try{o[a]=void 0;var l=!0}catch{}var c=n.call(o);return l&&(u?o[a]=s:delete o[a]),c}return Da=i,Da}var La,Ac;function ly(){if(Ac)return La;Ac=1;var t=Object.prototype,e=t.toString;function r(n){return e.call(n)}return La=r,La}var ja,Ic;function fr(){if(Ic)return ja;Ic=1;var t=dr(),e=sy(),r=ly(),n="[object Null]",a="[object Undefined]",i=t?t.toStringTag:void 0;function o(u){return u==null?u===void 0?a:n:i&&i in Object(u)?e(u):r(u)}return ja=o,ja}var qa,Pc;function Ft(){if(Pc)return qa;Pc=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return qa=t,qa}var Fa,Ec;function Bp(){if(Ec)return Fa;Ec=1;var t=fr(),e=Ft(),r="[object AsyncFunction]",n="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function o(u){if(!e(u))return!1;var s=t(u);return s==n||s==a||s==r||s==i}return Fa=o,Fa}var Ba,_c;function cy(){if(_c)return Ba;_c=1;var t=je(),e=t["__core-js_shared__"];return Ba=e,Ba}var za,Oc;function dy(){if(Oc)return za;Oc=1;var t=cy(),e=function(){var n=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function r(n){return!!e&&e in n}return za=r,za}var Ha,kc;function zp(){if(kc)return Ha;kc=1;var t=Function.prototype,e=t.toString;function r(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return Ha=r,Ha}var Ua,Tc;function fy(){if(Tc)return Ua;Tc=1;var t=Bp(),e=dy(),r=Ft(),n=zp(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,u=Object.prototype,s=o.toString,l=u.hasOwnProperty,c=RegExp("^"+s.call(l).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(f){if(!r(f)||e(f))return!1;var h=t(f)?c:i;return h.test(n(f))}return Ua=d,Ua}var $a,Nc;function vy(){if(Nc)return $a;Nc=1;function t(e,r){return e?.[r]}return $a=t,$a}var Ga,Rc;function Bt(){if(Rc)return Ga;Rc=1;var t=fy(),e=vy();function r(n,a){var i=e(n,a);return t(i)?i:void 0}return Ga=r,Ga}var Va,Dc;function Gs(){if(Dc)return Va;Dc=1;var t=Bt(),e=je(),r=t(e,"Map");return Va=r,Va}var Ka,Lc;function Qn(){if(Lc)return Ka;Lc=1;var t=Bt(),e=t(Object,"create");return Ka=e,Ka}var Wa,jc;function hy(){if(jc)return Wa;jc=1;var t=Qn();function e(){this.__data__=t?t(null):{},this.size=0}return Wa=e,Wa}var Ya,qc;function py(){if(qc)return Ya;qc=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return Ya=t,Ya}var Za,Fc;function my(){if(Fc)return Za;Fc=1;var t=Qn(),e="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function a(i){var o=this.__data__;if(t){var u=o[i];return u===e?void 0:u}return n.call(o,i)?o[i]:void 0}return Za=a,Za}var Qa,Bc;function gy(){if(Bc)return Qa;Bc=1;var t=Qn(),e=Object.prototype,r=e.hasOwnProperty;function n(a){var i=this.__data__;return t?i[a]!==void 0:r.call(i,a)}return Qa=n,Qa}var Xa,zc;function yy(){if(zc)return Xa;zc=1;var t=Qn(),e="__lodash_hash_undefined__";function r(n,a){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=t&&a===void 0?e:a,this}return Xa=r,Xa}var Ja,Hc;function by(){if(Hc)return Ja;Hc=1;var t=hy(),e=py(),r=my(),n=gy(),a=yy();function i(o){var u=-1,s=o==null?0:o.length;for(this.clear();++u<s;){var l=o[u];this.set(l[0],l[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,Ja=i,Ja}var ei,Uc;function wy(){if(Uc)return ei;Uc=1;var t=by(),e=Zn(),r=Gs();function n(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return ei=n,ei}var ti,$c;function xy(){if($c)return ti;$c=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return ti=t,ti}var ri,Gc;function Xn(){if(Gc)return ri;Gc=1;var t=xy();function e(r,n){var a=r.__data__;return t(n)?a[typeof n=="string"?"string":"hash"]:a.map}return ri=e,ri}var ni,Vc;function Cy(){if(Vc)return ni;Vc=1;var t=Xn();function e(r){var n=t(this,r).delete(r);return this.size-=n?1:0,n}return ni=e,ni}var ai,Kc;function My(){if(Kc)return ai;Kc=1;var t=Xn();function e(r){return t(this,r).get(r)}return ai=e,ai}var ii,Wc;function Sy(){if(Wc)return ii;Wc=1;var t=Xn();function e(r){return t(this,r).has(r)}return ii=e,ii}var oi,Yc;function Ay(){if(Yc)return oi;Yc=1;var t=Xn();function e(r,n){var a=t(this,r),i=a.size;return a.set(r,n),this.size+=a.size==i?0:1,this}return oi=e,oi}var ui,Zc;function Vs(){if(Zc)return ui;Zc=1;var t=wy(),e=Cy(),r=My(),n=Sy(),a=Ay();function i(o){var u=-1,s=o==null?0:o.length;for(this.clear();++u<s;){var l=o[u];this.set(l[0],l[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,ui=i,ui}var si,Qc;function Iy(){if(Qc)return si;Qc=1;var t=Zn(),e=Gs(),r=Vs(),n=200;function a(i,o){var u=this.__data__;if(u instanceof t){var s=u.__data__;if(!e||s.length<n-1)return s.push([i,o]),this.size=++u.size,this;u=this.__data__=new r(s)}return u.set(i,o),this.size=u.size,this}return si=a,si}var li,Xc;function Ks(){if(Xc)return li;Xc=1;var t=Zn(),e=ay(),r=iy(),n=oy(),a=uy(),i=Iy();function o(u){var s=this.__data__=new t(u);this.size=s.size}return o.prototype.clear=e,o.prototype.delete=r,o.prototype.get=n,o.prototype.has=a,o.prototype.set=i,li=o,li}var ci,Jc;function Py(){if(Jc)return ci;Jc=1;function t(e,r){for(var n=-1,a=e==null?0:e.length;++n<a&&r(e[n],n,e)!==!1;);return e}return ci=t,ci}var di,ed;function Hp(){if(ed)return di;ed=1;var t=Bt(),e=function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}}();return di=e,di}var fi,td;function Up(){if(td)return fi;td=1;var t=Hp();function e(r,n,a){n=="__proto__"&&t?t(r,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[n]=a}return fi=e,fi}var vi,rd;function $p(){if(rd)return vi;rd=1;var t=Up(),e=$s(),r=Object.prototype,n=r.hasOwnProperty;function a(i,o,u){var s=i[o];(!(n.call(i,o)&&e(s,u))||u===void 0&&!(o in i))&&t(i,o,u)}return vi=a,vi}var hi,nd;function Zr(){if(nd)return hi;nd=1;var t=$p(),e=Up();function r(n,a,i,o){var u=!i;i||(i={});for(var s=-1,l=a.length;++s<l;){var c=a[s],d=o?o(i[c],n[c],c,i,n):void 0;d===void 0&&(d=n[c]),u?e(i,c,d):t(i,c,d)}return i}return hi=r,hi}var pi,ad;function Ey(){if(ad)return pi;ad=1;function t(e,r){for(var n=-1,a=Array(e);++n<e;)a[n]=r(n);return a}return pi=t,pi}var mi,id;function wt(){if(id)return mi;id=1;function t(e){return e!=null&&typeof e=="object"}return mi=t,mi}var gi,od;function _y(){if(od)return gi;od=1;var t=fr(),e=wt(),r="[object Arguments]";function n(a){return e(a)&&t(a)==r}return gi=n,gi}var yi,ud;function Ws(){if(ud)return yi;ud=1;var t=_y(),e=wt(),r=Object.prototype,n=r.hasOwnProperty,a=r.propertyIsEnumerable,i=t(function(){return arguments}())?t:function(o){return e(o)&&n.call(o,"callee")&&!a.call(o,"callee")};return yi=i,yi}var bi,sd;function qe(){if(sd)return bi;sd=1;var t=Array.isArray;return bi=t,bi}var Mr={exports:{}},wi,ld;function Oy(){if(ld)return wi;ld=1;function t(){return!1}return wi=t,wi}Mr.exports;var cd;function Ys(){return cd||(cd=1,function(t,e){var r=je(),n=Oy(),a=e&&!e.nodeType&&e,i=a&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===a,u=o?r.Buffer:void 0,s=u?u.isBuffer:void 0,l=s||n;t.exports=l}(Mr,Mr.exports)),Mr.exports}var xi,dd;function Gp(){if(dd)return xi;dd=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(n,a){var i=typeof n;return a=a??t,!!a&&(i=="number"||i!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<a}return xi=r,xi}var Ci,fd;function Zs(){if(fd)return Ci;fd=1;var t=9007199254740991;function e(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=t}return Ci=e,Ci}var Mi,vd;function ky(){if(vd)return Mi;vd=1;var t=fr(),e=Zs(),r=wt(),n="[object Arguments]",a="[object Array]",i="[object Boolean]",o="[object Date]",u="[object Error]",s="[object Function]",l="[object Map]",c="[object Number]",d="[object Object]",f="[object RegExp]",h="[object Set]",p="[object String]",m="[object WeakMap]",g="[object ArrayBuffer]",b="[object DataView]",w="[object Float32Array]",M="[object Float64Array]",y="[object Int8Array]",C="[object Int16Array]",S="[object Int32Array]",I="[object Uint8Array]",_="[object Uint8ClampedArray]",O="[object Uint16Array]",T="[object Uint32Array]",P={};P[w]=P[M]=P[y]=P[C]=P[S]=P[I]=P[_]=P[O]=P[T]=!0,P[n]=P[a]=P[g]=P[i]=P[b]=P[o]=P[u]=P[s]=P[l]=P[c]=P[d]=P[f]=P[h]=P[p]=P[m]=!1;function N(R){return r(R)&&e(R.length)&&!!P[t(R)]}return Mi=N,Mi}var Si,hd;function Qs(){if(hd)return Si;hd=1;function t(e){return function(r){return e(r)}}return Si=t,Si}var Sr={exports:{}};Sr.exports;var pd;function Xs(){return pd||(pd=1,function(t,e){var r=Fp(),n=e&&!e.nodeType&&e,a=n&&!0&&t&&!t.nodeType&&t,i=a&&a.exports===n,o=i&&r.process,u=function(){try{var s=a&&a.require&&a.require("util").types;return s||o&&o.binding&&o.binding("util")}catch{}}();t.exports=u}(Sr,Sr.exports)),Sr.exports}var Ai,md;function Vp(){if(md)return Ai;md=1;var t=ky(),e=Qs(),r=Xs(),n=r&&r.isTypedArray,a=n?e(n):t;return Ai=a,Ai}var Ii,gd;function Kp(){if(gd)return Ii;gd=1;var t=Ey(),e=Ws(),r=qe(),n=Ys(),a=Gp(),i=Vp(),o=Object.prototype,u=o.hasOwnProperty;function s(l,c){var d=r(l),f=!d&&e(l),h=!d&&!f&&n(l),p=!d&&!f&&!h&&i(l),m=d||f||h||p,g=m?t(l.length,String):[],b=g.length;for(var w in l)(c||u.call(l,w))&&!(m&&(w=="length"||h&&(w=="offset"||w=="parent")||p&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||a(w,b)))&&g.push(w);return g}return Ii=s,Ii}var Pi,yd;function Js(){if(yd)return Pi;yd=1;var t=Object.prototype;function e(r){var n=r&&r.constructor,a=typeof n=="function"&&n.prototype||t;return r===a}return Pi=e,Pi}var Ei,bd;function Wp(){if(bd)return Ei;bd=1;function t(e,r){return function(n){return e(r(n))}}return Ei=t,Ei}var _i,wd;function Ty(){if(wd)return _i;wd=1;var t=Wp(),e=t(Object.keys,Object);return _i=e,_i}var Oi,xd;function Ny(){if(xd)return Oi;xd=1;var t=Js(),e=Ty(),r=Object.prototype,n=r.hasOwnProperty;function a(i){if(!t(i))return e(i);var o=[];for(var u in Object(i))n.call(i,u)&&u!="constructor"&&o.push(u);return o}return Oi=a,Oi}var ki,Cd;function Jn(){if(Cd)return ki;Cd=1;var t=Bp(),e=Zs();function r(n){return n!=null&&e(n.length)&&!t(n)}return ki=r,ki}var Ti,Md;function Qr(){if(Md)return Ti;Md=1;var t=Kp(),e=Ny(),r=Jn();function n(a){return r(a)?t(a):e(a)}return Ti=n,Ti}var Ni,Sd;function Ry(){if(Sd)return Ni;Sd=1;var t=Zr(),e=Qr();function r(n,a){return n&&t(a,e(a),n)}return Ni=r,Ni}var Ri,Ad;function Dy(){if(Ad)return Ri;Ad=1;function t(e){var r=[];if(e!=null)for(var n in Object(e))r.push(n);return r}return Ri=t,Ri}var Di,Id;function Ly(){if(Id)return Di;Id=1;var t=Ft(),e=Js(),r=Dy(),n=Object.prototype,a=n.hasOwnProperty;function i(o){if(!t(o))return r(o);var u=e(o),s=[];for(var l in o)l=="constructor"&&(u||!a.call(o,l))||s.push(l);return s}return Di=i,Di}var Li,Pd;function el(){if(Pd)return Li;Pd=1;var t=Kp(),e=Ly(),r=Jn();function n(a){return r(a)?t(a,!0):e(a)}return Li=n,Li}var ji,Ed;function jy(){if(Ed)return ji;Ed=1;var t=Zr(),e=el();function r(n,a){return n&&t(a,e(a),n)}return ji=r,ji}var Ar={exports:{}};Ar.exports;var _d;function qy(){return _d||(_d=1,function(t,e){var r=je(),n=e&&!e.nodeType&&e,a=n&&!0&&t&&!t.nodeType&&t,i=a&&a.exports===n,o=i?r.Buffer:void 0,u=o?o.allocUnsafe:void 0;function s(l,c){if(c)return l.slice();var d=l.length,f=u?u(d):new l.constructor(d);return l.copy(f),f}t.exports=s}(Ar,Ar.exports)),Ar.exports}var qi,Od;function Fy(){if(Od)return qi;Od=1;function t(e,r){var n=-1,a=e.length;for(r||(r=Array(a));++n<a;)r[n]=e[n];return r}return qi=t,qi}var Fi,kd;function By(){if(kd)return Fi;kd=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,i=0,o=[];++n<a;){var u=e[n];r(u,n,e)&&(o[i++]=u)}return o}return Fi=t,Fi}var Bi,Td;function Yp(){if(Td)return Bi;Td=1;function t(){return[]}return Bi=t,Bi}var zi,Nd;function tl(){if(Nd)return zi;Nd=1;var t=By(),e=Yp(),r=Object.prototype,n=r.propertyIsEnumerable,a=Object.getOwnPropertySymbols,i=a?function(o){return o==null?[]:(o=Object(o),t(a(o),function(u){return n.call(o,u)}))}:e;return zi=i,zi}var Hi,Rd;function zy(){if(Rd)return Hi;Rd=1;var t=Zr(),e=tl();function r(n,a){return t(n,e(n),a)}return Hi=r,Hi}var Ui,Dd;function rl(){if(Dd)return Ui;Dd=1;function t(e,r){for(var n=-1,a=r.length,i=e.length;++n<a;)e[i+n]=r[n];return e}return Ui=t,Ui}var $i,Ld;function nl(){if(Ld)return $i;Ld=1;var t=Wp(),e=t(Object.getPrototypeOf,Object);return $i=e,$i}var Gi,jd;function Zp(){if(jd)return Gi;jd=1;var t=rl(),e=nl(),r=tl(),n=Yp(),a=Object.getOwnPropertySymbols,i=a?function(o){for(var u=[];o;)t(u,r(o)),o=e(o);return u}:n;return Gi=i,Gi}var Vi,qd;function Hy(){if(qd)return Vi;qd=1;var t=Zr(),e=Zp();function r(n,a){return t(n,e(n),a)}return Vi=r,Vi}var Ki,Fd;function Qp(){if(Fd)return Ki;Fd=1;var t=rl(),e=qe();function r(n,a,i){var o=a(n);return e(n)?o:t(o,i(n))}return Ki=r,Ki}var Wi,Bd;function Xp(){if(Bd)return Wi;Bd=1;var t=Qp(),e=tl(),r=Qr();function n(a){return t(a,r,e)}return Wi=n,Wi}var Yi,zd;function Jp(){if(zd)return Yi;zd=1;var t=Qp(),e=Zp(),r=el();function n(a){return t(a,r,e)}return Yi=n,Yi}var Zi,Hd;function Uy(){if(Hd)return Zi;Hd=1;var t=Bt(),e=je(),r=t(e,"DataView");return Zi=r,Zi}var Qi,Ud;function $y(){if(Ud)return Qi;Ud=1;var t=Bt(),e=je(),r=t(e,"Promise");return Qi=r,Qi}var Xi,$d;function Gy(){if($d)return Xi;$d=1;var t=Bt(),e=je(),r=t(e,"Set");return Xi=r,Xi}var Ji,Gd;function Vy(){if(Gd)return Ji;Gd=1;var t=Bt(),e=je(),r=t(e,"WeakMap");return Ji=r,Ji}var eo,Vd;function ea(){if(Vd)return eo;Vd=1;var t=Uy(),e=Gs(),r=$y(),n=Gy(),a=Vy(),i=fr(),o=zp(),u="[object Map]",s="[object Object]",l="[object Promise]",c="[object Set]",d="[object WeakMap]",f="[object DataView]",h=o(t),p=o(e),m=o(r),g=o(n),b=o(a),w=i;return(t&&w(new t(new ArrayBuffer(1)))!=f||e&&w(new e)!=u||r&&w(r.resolve())!=l||n&&w(new n)!=c||a&&w(new a)!=d)&&(w=function(M){var y=i(M),C=y==s?M.constructor:void 0,S=C?o(C):"";if(S)switch(S){case h:return f;case p:return u;case m:return l;case g:return c;case b:return d}return y}),eo=w,eo}var to,Kd;function Ky(){if(Kd)return to;Kd=1;var t=Object.prototype,e=t.hasOwnProperty;function r(n){var a=n.length,i=new n.constructor(a);return a&&typeof n[0]=="string"&&e.call(n,"index")&&(i.index=n.index,i.input=n.input),i}return to=r,to}var ro,Wd;function em(){if(Wd)return ro;Wd=1;var t=je(),e=t.Uint8Array;return ro=e,ro}var no,Yd;function al(){if(Yd)return no;Yd=1;var t=em();function e(r){var n=new r.constructor(r.byteLength);return new t(n).set(new t(r)),n}return no=e,no}var ao,Zd;function Wy(){if(Zd)return ao;Zd=1;var t=al();function e(r,n){var a=n?t(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.byteLength)}return ao=e,ao}var io,Qd;function Yy(){if(Qd)return io;Qd=1;var t=/\w*$/;function e(r){var n=new r.constructor(r.source,t.exec(r));return n.lastIndex=r.lastIndex,n}return io=e,io}var oo,Xd;function Zy(){if(Xd)return oo;Xd=1;var t=dr(),e=t?t.prototype:void 0,r=e?e.valueOf:void 0;function n(a){return r?Object(r.call(a)):{}}return oo=n,oo}var uo,Jd;function Qy(){if(Jd)return uo;Jd=1;var t=al();function e(r,n){var a=n?t(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.length)}return uo=e,uo}var so,ef;function Xy(){if(ef)return so;ef=1;var t=al(),e=Wy(),r=Yy(),n=Zy(),a=Qy(),i="[object Boolean]",o="[object Date]",u="[object Map]",s="[object Number]",l="[object RegExp]",c="[object Set]",d="[object String]",f="[object Symbol]",h="[object ArrayBuffer]",p="[object DataView]",m="[object Float32Array]",g="[object Float64Array]",b="[object Int8Array]",w="[object Int16Array]",M="[object Int32Array]",y="[object Uint8Array]",C="[object Uint8ClampedArray]",S="[object Uint16Array]",I="[object Uint32Array]";function _(O,T,P){var N=O.constructor;switch(T){case h:return t(O);case i:case o:return new N(+O);case p:return e(O,P);case m:case g:case b:case w:case M:case y:case C:case S:case I:return a(O,P);case u:return new N;case s:case d:return new N(O);case l:return r(O);case c:return new N;case f:return n(O)}}return so=_,so}var lo,tf;function Jy(){if(tf)return lo;tf=1;var t=Ft(),e=Object.create,r=function(){function n(){}return function(a){if(!t(a))return{};if(e)return e(a);n.prototype=a;var i=new n;return n.prototype=void 0,i}}();return lo=r,lo}var co,rf;function eb(){if(rf)return co;rf=1;var t=Jy(),e=nl(),r=Js();function n(a){return typeof a.constructor=="function"&&!r(a)?t(e(a)):{}}return co=n,co}var fo,nf;function tb(){if(nf)return fo;nf=1;var t=ea(),e=wt(),r="[object Map]";function n(a){return e(a)&&t(a)==r}return fo=n,fo}var vo,af;function rb(){if(af)return vo;af=1;var t=tb(),e=Qs(),r=Xs(),n=r&&r.isMap,a=n?e(n):t;return vo=a,vo}var ho,of;function nb(){if(of)return ho;of=1;var t=ea(),e=wt(),r="[object Set]";function n(a){return e(a)&&t(a)==r}return ho=n,ho}var po,uf;function ab(){if(uf)return po;uf=1;var t=nb(),e=Qs(),r=Xs(),n=r&&r.isSet,a=n?e(n):t;return po=a,po}var mo,sf;function ib(){if(sf)return mo;sf=1;var t=Ks(),e=Py(),r=$p(),n=Ry(),a=jy(),i=qy(),o=Fy(),u=zy(),s=Hy(),l=Xp(),c=Jp(),d=ea(),f=Ky(),h=Xy(),p=eb(),m=qe(),g=Ys(),b=rb(),w=Ft(),M=ab(),y=Qr(),C=el(),S=1,I=2,_=4,O="[object Arguments]",T="[object Array]",P="[object Boolean]",N="[object Date]",R="[object Error]",D="[object Function]",F="[object GeneratorFunction]",q="[object Map]",B="[object Number]",$="[object Object]",U="[object RegExp]",de="[object Set]",ke="[object String]",ne="[object Symbol]",ze="[object WeakMap]",K="[object ArrayBuffer]",H="[object DataView]",j="[object Float32Array]",te="[object Float64Array]",Ie="[object Int8Array]",ye="[object Int16Array]",yr="[object Int32Array]",ya="[object Uint8Array]",B0="[object Uint8ClampedArray]",z0="[object Uint16Array]",H0="[object Uint32Array]",Z={};Z[O]=Z[T]=Z[K]=Z[H]=Z[P]=Z[N]=Z[j]=Z[te]=Z[Ie]=Z[ye]=Z[yr]=Z[q]=Z[B]=Z[$]=Z[U]=Z[de]=Z[ke]=Z[ne]=Z[ya]=Z[B0]=Z[z0]=Z[H0]=!0,Z[R]=Z[D]=Z[ze]=!1;function nn(V,zt,Ht,U0,an,at){var be,on=zt&S,un=zt&I,$0=zt&_;if(Ht&&(be=an?Ht(V,U0,an,at):Ht(V)),be!==void 0)return be;if(!w(V))return V;var Jl=m(V);if(Jl){if(be=f(V),!on)return o(V,be)}else{var Ut=d(V),ec=Ut==D||Ut==F;if(g(V))return i(V,on);if(Ut==$||Ut==O||ec&&!an){if(be=un||ec?{}:p(V),!on)return un?s(V,a(be,V)):u(V,n(be,V))}else{if(!Z[Ut])return an?V:{};be=h(V,Ut,on)}}at||(at=new t);var tc=at.get(V);if(tc)return tc;at.set(V,be),M(V)?V.forEach(function(it){be.add(nn(it,zt,Ht,it,V,at))}):b(V)&&V.forEach(function(it,Ct){be.set(Ct,nn(it,zt,Ht,Ct,V,at))});var G0=$0?un?c:l:un?C:y,rc=Jl?void 0:G0(V);return e(rc||V,function(it,Ct){rc&&(Ct=it,it=V[Ct]),r(be,Ct,nn(it,zt,Ht,Ct,V,at))}),be}return mo=nn,mo}var go,lf;function ta(){if(lf)return go;lf=1;var t=fr(),e=wt(),r="[object Symbol]";function n(a){return typeof a=="symbol"||e(a)&&t(a)==r}return go=n,go}var yo,cf;function il(){if(cf)return yo;cf=1;var t=qe(),e=ta(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,o){if(t(i))return!1;var u=typeof i;return u=="number"||u=="symbol"||u=="boolean"||i==null||e(i)?!0:n.test(i)||!r.test(i)||o!=null&&i in Object(o)}return yo=a,yo}var bo,df;function ob(){if(df)return bo;df=1;var t=Vs(),e="Expected a function";function r(n,a){if(typeof n!="function"||a!=null&&typeof a!="function")throw new TypeError(e);var i=function(){var o=arguments,u=a?a.apply(this,o):o[0],s=i.cache;if(s.has(u))return s.get(u);var l=n.apply(this,o);return i.cache=s.set(u,l)||s,l};return i.cache=new(r.Cache||t),i}return r.Cache=t,bo=r,bo}var wo,ff;function ub(){if(ff)return wo;ff=1;var t=ob(),e=500;function r(n){var a=t(n,function(o){return i.size===e&&i.clear(),o}),i=a.cache;return a}return wo=r,wo}var xo,vf;function sb(){if(vf)return xo;vf=1;var t=ub(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=t(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(e,function(o,u,s,l){i.push(s?l.replace(r,"$1"):u||o)}),i});return xo=n,xo}var Co,hf;function lb(){if(hf)return Co;hf=1;var t=dr(),e=Us(),r=qe(),n=ta(),a=t?t.prototype:void 0,i=a?a.toString:void 0;function o(u){if(typeof u=="string")return u;if(r(u))return e(u,o)+"";if(n(u))return i?i.call(u):"";var s=u+"";return s=="0"&&1/u==-1/0?"-0":s}return Co=o,Co}var Mo,pf;function tm(){if(pf)return Mo;pf=1;var t=lb();function e(r){return r==null?"":t(r)}return Mo=e,Mo}var So,mf;function ra(){if(mf)return So;mf=1;var t=qe(),e=il(),r=sb(),n=tm();function a(i,o){return t(i)?i:e(i,o)?[i]:r(n(i))}return So=a,So}var Ao,gf;function cb(){if(gf)return Ao;gf=1;function t(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}return Ao=t,Ao}var Io,yf;function Xr(){if(yf)return Io;yf=1;var t=ta();function e(r){if(typeof r=="string"||t(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return Io=e,Io}var Po,bf;function ol(){if(bf)return Po;bf=1;var t=ra(),e=Xr();function r(n,a){a=t(a,n);for(var i=0,o=a.length;n!=null&&i<o;)n=n[e(a[i++])];return i&&i==o?n:void 0}return Po=r,Po}var Eo,wf;function db(){if(wf)return Eo;wf=1;function t(e,r,n){var a=-1,i=e.length;r<0&&(r=-r>i?0:i+r),n=n>i?i:n,n<0&&(n+=i),i=r>n?0:n-r>>>0,r>>>=0;for(var o=Array(i);++a<i;)o[a]=e[a+r];return o}return Eo=t,Eo}var _o,xf;function fb(){if(xf)return _o;xf=1;var t=ol(),e=db();function r(n,a){return a.length<2?n:t(n,e(a,0,-1))}return _o=r,_o}var Oo,Cf;function vb(){if(Cf)return Oo;Cf=1;var t=ra(),e=cb(),r=fb(),n=Xr();function a(i,o){return o=t(o,i),i=r(i,o),i==null||delete i[n(e(o))]}return Oo=a,Oo}var ko,Mf;function hb(){if(Mf)return ko;Mf=1;var t=fr(),e=nl(),r=wt(),n="[object Object]",a=Function.prototype,i=Object.prototype,o=a.toString,u=i.hasOwnProperty,s=o.call(Object);function l(c){if(!r(c)||t(c)!=n)return!1;var d=e(c);if(d===null)return!0;var f=u.call(d,"constructor")&&d.constructor;return typeof f=="function"&&f instanceof f&&o.call(f)==s}return ko=l,ko}var To,Sf;function pb(){if(Sf)return To;Sf=1;var t=hb();function e(r){return t(r)?void 0:r}return To=e,To}var No,Af;function mb(){if(Af)return No;Af=1;var t=dr(),e=Ws(),r=qe(),n=t?t.isConcatSpreadable:void 0;function a(i){return r(i)||e(i)||!!(n&&i&&i[n])}return No=a,No}var Ro,If;function gb(){if(If)return Ro;If=1;var t=rl(),e=mb();function r(n,a,i,o,u){var s=-1,l=n.length;for(i||(i=e),u||(u=[]);++s<l;){var c=n[s];a>0&&i(c)?a>1?r(c,a-1,i,o,u):t(u,c):o||(u[u.length]=c)}return u}return Ro=r,Ro}var Do,Pf;function yb(){if(Pf)return Do;Pf=1;var t=gb();function e(r){var n=r==null?0:r.length;return n?t(r,1):[]}return Do=e,Do}var Lo,Ef;function bb(){if(Ef)return Lo;Ef=1;function t(e,r,n){switch(n.length){case 0:return e.call(r);case 1:return e.call(r,n[0]);case 2:return e.call(r,n[0],n[1]);case 3:return e.call(r,n[0],n[1],n[2])}return e.apply(r,n)}return Lo=t,Lo}var jo,_f;function wb(){if(_f)return jo;_f=1;var t=bb(),e=Math.max;function r(n,a,i){return a=e(a===void 0?n.length-1:a,0),function(){for(var o=arguments,u=-1,s=e(o.length-a,0),l=Array(s);++u<s;)l[u]=o[a+u];u=-1;for(var c=Array(a+1);++u<a;)c[u]=o[u];return c[a]=i(l),t(n,this,c)}}return jo=r,jo}var qo,Of;function xb(){if(Of)return qo;Of=1;function t(e){return function(){return e}}return qo=t,qo}var Fo,kf;function rm(){if(kf)return Fo;kf=1;function t(e){return e}return Fo=t,Fo}var Bo,Tf;function Cb(){if(Tf)return Bo;Tf=1;var t=xb(),e=Hp(),r=rm(),n=e?function(a,i){return e(a,"toString",{configurable:!0,enumerable:!1,value:t(i),writable:!0})}:r;return Bo=n,Bo}var zo,Nf;function Mb(){if(Nf)return zo;Nf=1;var t=800,e=16,r=Date.now;function n(a){var i=0,o=0;return function(){var u=r(),s=e-(u-o);if(o=u,s>0){if(++i>=t)return arguments[0]}else i=0;return a.apply(void 0,arguments)}}return zo=n,zo}var Ho,Rf;function Sb(){if(Rf)return Ho;Rf=1;var t=Cb(),e=Mb(),r=e(t);return Ho=r,Ho}var Uo,Df;function Ab(){if(Df)return Uo;Df=1;var t=yb(),e=wb(),r=Sb();function n(a){return r(e(a,void 0,t),a+"")}return Uo=n,Uo}var $o,Lf;function Ib(){if(Lf)return $o;Lf=1;var t=Us(),e=ib(),r=vb(),n=ra(),a=Zr(),i=pb(),o=Ab(),u=Jp(),s=1,l=2,c=4,d=o(function(f,h){var p={};if(f==null)return p;var m=!1;h=t(h,function(b){return b=n(b,f),m||(m=b.length>1),b}),a(f,u(f),p),m&&(p=e(p,s|l|c,i));for(var g=h.length;g--;)r(p,h[g]);return p});return $o=d,$o}var Pb=Ib();const Eb=qs(Pb);var Go,jf;function _b(){if(jf)return Go;jf=1;var t=/\s/;function e(r){for(var n=r.length;n--&&t.test(r.charAt(n)););return n}return Go=e,Go}var Vo,qf;function Ob(){if(qf)return Vo;qf=1;var t=_b(),e=/^\s+/;function r(n){return n&&n.slice(0,t(n)+1).replace(e,"")}return Vo=r,Vo}var Ko,Ff;function nm(){if(Ff)return Ko;Ff=1;var t=Ob(),e=Ft(),r=ta(),n=NaN,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,u=parseInt;function s(l){if(typeof l=="number")return l;if(r(l))return n;if(e(l)){var c=typeof l.valueOf=="function"?l.valueOf():l;l=e(c)?c+"":c}if(typeof l!="string")return l===0?l:+l;l=t(l);var d=i.test(l);return d||o.test(l)?u(l.slice(2),d?2:8):a.test(l)?n:+l}return Ko=s,Ko}var Wo,Bf;function kb(){if(Bf)return Wo;Bf=1;var t=nm(),e=1/0,r=17976931348623157e292;function n(a){if(!a)return a===0?a:0;if(a=t(a),a===e||a===-e){var i=a<0?-1:1;return i*r}return a===a?a:0}return Wo=n,Wo}var Yo,zf;function Tb(){if(zf)return Yo;zf=1;var t=kb();function e(r){var n=t(r),a=n%1;return n===n?a?n-a:n:0}return Yo=e,Yo}var Zo,Hf;function Nb(){if(Hf)return Zo;Hf=1;var t=je(),e=Tb(),r=nm(),n=tm(),a=t.isFinite,i=Math.min;function o(u){var s=Math[u];return function(l,c){if(l=r(l),c=c==null?0:i(e(c),292),c&&a(l)){var d=(n(l)+"e").split("e"),f=s(d[0]+"e"+(+d[1]+c));return d=(n(f)+"e").split("e"),+(d[0]+"e"+(+d[1]-c))}return s(l)}}return Zo=o,Zo}var Qo,Uf;function Rb(){if(Uf)return Qo;Uf=1;var t=Nb(),e=t("round");return Qo=e,Qo}var Db=Rb();const In=qs(Db);var Xo,$f;function Lb(){if($f)return Xo;$f=1;var t="__lodash_hash_undefined__";function e(r){return this.__data__.set(r,t),this}return Xo=e,Xo}var Jo,Gf;function jb(){if(Gf)return Jo;Gf=1;function t(e){return this.__data__.has(e)}return Jo=t,Jo}var eu,Vf;function qb(){if(Vf)return eu;Vf=1;var t=Vs(),e=Lb(),r=jb();function n(a){var i=-1,o=a==null?0:a.length;for(this.__data__=new t;++i<o;)this.add(a[i])}return n.prototype.add=n.prototype.push=e,n.prototype.has=r,eu=n,eu}var tu,Kf;function Fb(){if(Kf)return tu;Kf=1;function t(e,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(e[n],n,e))return!0;return!1}return tu=t,tu}var ru,Wf;function Bb(){if(Wf)return ru;Wf=1;function t(e,r){return e.has(r)}return ru=t,ru}var nu,Yf;function am(){if(Yf)return nu;Yf=1;var t=qb(),e=Fb(),r=Bb(),n=1,a=2;function i(o,u,s,l,c,d){var f=s&n,h=o.length,p=u.length;if(h!=p&&!(f&&p>h))return!1;var m=d.get(o),g=d.get(u);if(m&&g)return m==u&&g==o;var b=-1,w=!0,M=s&a?new t:void 0;for(d.set(o,u),d.set(u,o);++b<h;){var y=o[b],C=u[b];if(l)var S=f?l(C,y,b,u,o,d):l(y,C,b,o,u,d);if(S!==void 0){if(S)continue;w=!1;break}if(M){if(!e(u,function(I,_){if(!r(M,_)&&(y===I||c(y,I,s,l,d)))return M.push(_)})){w=!1;break}}else if(!(y===C||c(y,C,s,l,d))){w=!1;break}}return d.delete(o),d.delete(u),w}return nu=i,nu}var au,Zf;function zb(){if(Zf)return au;Zf=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(a,i){n[++r]=[i,a]}),n}return au=t,au}var iu,Qf;function Hb(){if(Qf)return iu;Qf=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(a){n[++r]=a}),n}return iu=t,iu}var ou,Xf;function Ub(){if(Xf)return ou;Xf=1;var t=dr(),e=em(),r=$s(),n=am(),a=zb(),i=Hb(),o=1,u=2,s="[object Boolean]",l="[object Date]",c="[object Error]",d="[object Map]",f="[object Number]",h="[object RegExp]",p="[object Set]",m="[object String]",g="[object Symbol]",b="[object ArrayBuffer]",w="[object DataView]",M=t?t.prototype:void 0,y=M?M.valueOf:void 0;function C(S,I,_,O,T,P,N){switch(_){case w:if(S.byteLength!=I.byteLength||S.byteOffset!=I.byteOffset)return!1;S=S.buffer,I=I.buffer;case b:return!(S.byteLength!=I.byteLength||!P(new e(S),new e(I)));case s:case l:case f:return r(+S,+I);case c:return S.name==I.name&&S.message==I.message;case h:case m:return S==I+"";case d:var R=a;case p:var D=O&o;if(R||(R=i),S.size!=I.size&&!D)return!1;var F=N.get(S);if(F)return F==I;O|=u,N.set(S,I);var q=n(R(S),R(I),O,T,P,N);return N.delete(S),q;case g:if(y)return y.call(S)==y.call(I)}return!1}return ou=C,ou}var uu,Jf;function $b(){if(Jf)return uu;Jf=1;var t=Xp(),e=1,r=Object.prototype,n=r.hasOwnProperty;function a(i,o,u,s,l,c){var d=u&e,f=t(i),h=f.length,p=t(o),m=p.length;if(h!=m&&!d)return!1;for(var g=h;g--;){var b=f[g];if(!(d?b in o:n.call(o,b)))return!1}var w=c.get(i),M=c.get(o);if(w&&M)return w==o&&M==i;var y=!0;c.set(i,o),c.set(o,i);for(var C=d;++g<h;){b=f[g];var S=i[b],I=o[b];if(s)var _=d?s(I,S,b,o,i,c):s(S,I,b,i,o,c);if(!(_===void 0?S===I||l(S,I,u,s,c):_)){y=!1;break}C||(C=b=="constructor")}if(y&&!C){var O=i.constructor,T=o.constructor;O!=T&&"constructor"in i&&"constructor"in o&&!(typeof O=="function"&&O instanceof O&&typeof T=="function"&&T instanceof T)&&(y=!1)}return c.delete(i),c.delete(o),y}return uu=a,uu}var su,ev;function Gb(){if(ev)return su;ev=1;var t=Ks(),e=am(),r=Ub(),n=$b(),a=ea(),i=qe(),o=Ys(),u=Vp(),s=1,l="[object Arguments]",c="[object Array]",d="[object Object]",f=Object.prototype,h=f.hasOwnProperty;function p(m,g,b,w,M,y){var C=i(m),S=i(g),I=C?c:a(m),_=S?c:a(g);I=I==l?d:I,_=_==l?d:_;var O=I==d,T=_==d,P=I==_;if(P&&o(m)){if(!o(g))return!1;C=!0,O=!1}if(P&&!O)return y||(y=new t),C||u(m)?e(m,g,b,w,M,y):r(m,g,I,b,w,M,y);if(!(b&s)){var N=O&&h.call(m,"__wrapped__"),R=T&&h.call(g,"__wrapped__");if(N||R){var D=N?m.value():m,F=R?g.value():g;return y||(y=new t),M(D,F,b,w,y)}}return P?(y||(y=new t),n(m,g,b,w,M,y)):!1}return su=p,su}var lu,tv;function im(){if(tv)return lu;tv=1;var t=Gb(),e=wt();function r(n,a,i,o,u){return n===a?!0:n==null||a==null||!e(n)&&!e(a)?n!==n&&a!==a:t(n,a,i,o,r,u)}return lu=r,lu}var cu,rv;function Vb(){if(rv)return cu;rv=1;var t=Ks(),e=im(),r=1,n=2;function a(i,o,u,s){var l=u.length,c=l,d=!s;if(i==null)return!c;for(i=Object(i);l--;){var f=u[l];if(d&&f[2]?f[1]!==i[f[0]]:!(f[0]in i))return!1}for(;++l<c;){f=u[l];var h=f[0],p=i[h],m=f[1];if(d&&f[2]){if(p===void 0&&!(h in i))return!1}else{var g=new t;if(s)var b=s(p,m,h,i,o,g);if(!(b===void 0?e(m,p,r|n,s,g):b))return!1}}return!0}return cu=a,cu}var du,nv;function om(){if(nv)return du;nv=1;var t=Ft();function e(r){return r===r&&!t(r)}return du=e,du}var fu,av;function Kb(){if(av)return fu;av=1;var t=om(),e=Qr();function r(n){for(var a=e(n),i=a.length;i--;){var o=a[i],u=n[o];a[i]=[o,u,t(u)]}return a}return fu=r,fu}var vu,iv;function um(){if(iv)return vu;iv=1;function t(e,r){return function(n){return n==null?!1:n[e]===r&&(r!==void 0||e in Object(n))}}return vu=t,vu}var hu,ov;function Wb(){if(ov)return hu;ov=1;var t=Vb(),e=Kb(),r=um();function n(a){var i=e(a);return i.length==1&&i[0][2]?r(i[0][0],i[0][1]):function(o){return o===a||t(o,a,i)}}return hu=n,hu}var pu,uv;function Yb(){if(uv)return pu;uv=1;var t=ol();function e(r,n,a){var i=r==null?void 0:t(r,n);return i===void 0?a:i}return pu=e,pu}var mu,sv;function Zb(){if(sv)return mu;sv=1;function t(e,r){return e!=null&&r in Object(e)}return mu=t,mu}var gu,lv;function Qb(){if(lv)return gu;lv=1;var t=ra(),e=Ws(),r=qe(),n=Gp(),a=Zs(),i=Xr();function o(u,s,l){s=t(s,u);for(var c=-1,d=s.length,f=!1;++c<d;){var h=i(s[c]);if(!(f=u!=null&&l(u,h)))break;u=u[h]}return f||++c!=d?f:(d=u==null?0:u.length,!!d&&a(d)&&n(h,d)&&(r(u)||e(u)))}return gu=o,gu}var yu,cv;function Xb(){if(cv)return yu;cv=1;var t=Zb(),e=Qb();function r(n,a){return n!=null&&e(n,a,t)}return yu=r,yu}var bu,dv;function Jb(){if(dv)return bu;dv=1;var t=im(),e=Yb(),r=Xb(),n=il(),a=om(),i=um(),o=Xr(),u=1,s=2;function l(c,d){return n(c)&&a(d)?i(o(c),d):function(f){var h=e(f,c);return h===void 0&&h===d?r(f,c):t(d,h,u|s)}}return bu=l,bu}var wu,fv;function ew(){if(fv)return wu;fv=1;function t(e){return function(r){return r?.[e]}}return wu=t,wu}var xu,vv;function tw(){if(vv)return xu;vv=1;var t=ol();function e(r){return function(n){return t(n,r)}}return xu=e,xu}var Cu,hv;function rw(){if(hv)return Cu;hv=1;var t=ew(),e=tw(),r=il(),n=Xr();function a(i){return r(i)?t(n(i)):e(i)}return Cu=a,Cu}var Mu,pv;function nw(){if(pv)return Mu;pv=1;var t=Wb(),e=Jb(),r=rm(),n=qe(),a=rw();function i(o){return typeof o=="function"?o:o==null?r:typeof o=="object"?n(o)?e(o[0],o[1]):t(o):a(o)}return Mu=i,Mu}var Su,mv;function aw(){if(mv)return Su;mv=1;function t(e){return function(r,n,a){for(var i=-1,o=Object(r),u=a(r),s=u.length;s--;){var l=u[e?s:++i];if(n(o[l],l,o)===!1)break}return r}}return Su=t,Su}var Au,gv;function iw(){if(gv)return Au;gv=1;var t=aw(),e=t();return Au=e,Au}var Iu,yv;function ow(){if(yv)return Iu;yv=1;var t=iw(),e=Qr();function r(n,a){return n&&t(n,a,e)}return Iu=r,Iu}var Pu,bv;function uw(){if(bv)return Pu;bv=1;var t=Jn();function e(r,n){return function(a,i){if(a==null)return a;if(!t(a))return r(a,i);for(var o=a.length,u=n?o:-1,s=Object(a);(n?u--:++u<o)&&i(s[u],u,s)!==!1;);return a}}return Pu=e,Pu}var Eu,wv;function sw(){if(wv)return Eu;wv=1;var t=ow(),e=uw(),r=e(t);return Eu=r,Eu}var _u,xv;function lw(){if(xv)return _u;xv=1;var t=sw(),e=Jn();function r(n,a){var i=-1,o=e(n)?Array(n.length):[];return t(n,function(u,s,l){o[++i]=a(u,s,l)}),o}return _u=r,_u}var Ou,Cv;function cw(){if(Cv)return Ou;Cv=1;var t=Us(),e=nw(),r=lw(),n=qe();function a(i,o){var u=n(i)?t:r;return u(i,e(o,3))}return Ou=a,Ou}var dw=cw();const fw=qs(dw);function Re(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+t+(r.length?" "+r.map(function(a){return"'"+a+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function bt(t){return!!t&&!!t[J]}function tt(t){var e;return!!t&&(function(r){if(!r||typeof r!="object")return!1;var n=Object.getPrototypeOf(r);if(n===null)return!0;var a=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return a===Object||typeof a=="function"&&Function.toString.call(a)===xw}(t)||Array.isArray(t)||!!t[_v]||!!(!((e=t.constructor)===null||e===void 0)&&e[_v])||ul(t)||sl(t))}function Dt(t,e,r){r===void 0&&(r=!1),vr(t)===0?(r?Object.keys:Zt)(t).forEach(function(n){r&&typeof n=="symbol"||e(n,t[n],t)}):t.forEach(function(n,a){return e(a,n,t)})}function vr(t){var e=t[J];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:ul(t)?2:sl(t)?3:0}function Yt(t,e){return vr(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function vw(t,e){return vr(t)===2?t.get(e):t[e]}function sm(t,e,r){var n=vr(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function lm(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function ul(t){return bw&&t instanceof Map}function sl(t){return ww&&t instanceof Set}function St(t){return t.o||t.t}function ll(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=dm(t);delete e[J];for(var r=Zt(e),n=0;n<r.length;n++){var a=r[n],i=e[a];i.writable===!1&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(e[a]={configurable:!0,writable:!0,enumerable:i.enumerable,value:t[a]})}return Object.create(Object.getPrototypeOf(t),e)}function cl(t,e){return e===void 0&&(e=!1),dl(t)||bt(t)||!tt(t)||(vr(t)>1&&(t.set=t.add=t.clear=t.delete=hw),Object.freeze(t),e&&Dt(t,function(r,n){return cl(n,!0)},!0)),t}function hw(){Re(2)}function dl(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function Ge(t){var e=ls[t];return e||Re(18,t),e}function pw(t,e){ls[t]||(ls[t]=e)}function os(){return Fr}function ku(t,e){e&&(Ge("Patches"),t.u=[],t.s=[],t.v=e)}function Pn(t){us(t),t.p.forEach(mw),t.p=null}function us(t){t===Fr&&(Fr=t.l)}function Mv(t){return Fr={p:[],l:Fr,h:t,m:!0,_:0}}function mw(t){var e=t[J];e.i===0||e.i===1?e.j():e.g=!0}function Tu(t,e){e._=e.p.length;var r=e.p[0],n=t!==void 0&&t!==r;return e.h.O||Ge("ES5").S(e,t,n),n?(r[J].P&&(Pn(e),Re(4)),tt(t)&&(t=En(e,t),e.l||_n(e,t)),e.u&&Ge("Patches").M(r[J].t,t,e.u,e.s)):t=En(e,r,[]),Pn(e),e.u&&e.v(e.u,e.s),t!==cm?t:void 0}function En(t,e,r){if(dl(e))return e;var n=e[J];if(!n)return Dt(e,function(u,s){return Sv(t,n,e,u,s,r)},!0),e;if(n.A!==t)return e;if(!n.P)return _n(t,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var a=n.i===4||n.i===5?n.o=ll(n.k):n.o,i=a,o=!1;n.i===3&&(i=new Set(a),a.clear(),o=!0),Dt(i,function(u,s){return Sv(t,n,a,u,s,r,o)}),_n(t,a,!1),r&&t.u&&Ge("Patches").N(n,r,t.u,t.s)}return n.o}function Sv(t,e,r,n,a,i,o){if(bt(a)){var u=En(t,a,i&&e&&e.i!==3&&!Yt(e.R,n)?i.concat(n):void 0);if(sm(r,n,u),!bt(u))return;t.m=!1}else o&&r.add(a);if(tt(a)&&!dl(a)){if(!t.h.D&&t._<1)return;En(t,a),e&&e.A.l||_n(t,a)}}function _n(t,e,r){r===void 0&&(r=!1),!t.l&&t.h.D&&t.m&&cl(e,r)}function Nu(t,e){var r=t[J];return(r?St(r):t)[e]}function Av(t,e){if(e in t)for(var r=Object.getPrototypeOf(t);r;){var n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Object.getPrototypeOf(r)}}function dt(t){t.P||(t.P=!0,t.l&&dt(t.l))}function Ru(t){t.o||(t.o=ll(t.t))}function ss(t,e,r){var n=ul(e)?Ge("MapSet").F(e,r):sl(e)?Ge("MapSet").T(e,r):t.O?function(a,i){var o=Array.isArray(a),u={i:o?1:0,A:i?i.A:os(),P:!1,I:!1,R:{},l:i,t:a,k:null,o:null,j:null,C:!1},s=u,l=Br;o&&(s=[u],l=Ir);var c=Proxy.revocable(s,l),d=c.revoke,f=c.proxy;return u.k=f,u.j=d,f}(e,r):Ge("ES5").J(e,r);return(r?r.A:os()).p.push(n),n}function gw(t){return bt(t)||Re(22,t),function e(r){if(!tt(r))return r;var n,a=r[J],i=vr(r);if(a){if(!a.P&&(a.i<4||!Ge("ES5").K(a)))return a.t;a.I=!0,n=Iv(r,i),a.I=!1}else n=Iv(r,i);return Dt(n,function(o,u){a&&vw(a.t,o)===u||sm(n,o,e(u))}),i===3?new Set(n):n}(t)}function Iv(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return ll(t)}function yw(){function t(i,o){var u=a[i];return u?u.enumerable=o:a[i]=u={configurable:!0,enumerable:o,get:function(){var s=this[J];return Br.get(s,i)},set:function(s){var l=this[J];Br.set(l,i,s)}},u}function e(i){for(var o=i.length-1;o>=0;o--){var u=i[o][J];if(!u.P)switch(u.i){case 5:n(u)&&dt(u);break;case 4:r(u)&&dt(u)}}}function r(i){for(var o=i.t,u=i.k,s=Zt(u),l=s.length-1;l>=0;l--){var c=s[l];if(c!==J){var d=o[c];if(d===void 0&&!Yt(o,c))return!0;var f=u[c],h=f&&f[J];if(h?h.t!==d:!lm(f,d))return!0}}var p=!!o[J];return s.length!==Zt(o).length+(p?0:1)}function n(i){var o=i.k;if(o.length!==i.t.length)return!0;var u=Object.getOwnPropertyDescriptor(o,o.length-1);if(u&&!u.get)return!0;for(var s=0;s<o.length;s++)if(!o.hasOwnProperty(s))return!0;return!1}var a={};pw("ES5",{J:function(i,o){var u=Array.isArray(i),s=function(c,d){if(c){for(var f=Array(d.length),h=0;h<d.length;h++)Object.defineProperty(f,""+h,t(h,!0));return f}var p=dm(d);delete p[J];for(var m=Zt(p),g=0;g<m.length;g++){var b=m[g];p[b]=t(b,c||!!p[b].enumerable)}return Object.create(Object.getPrototypeOf(d),p)}(u,i),l={i:u?5:4,A:o?o.A:os(),P:!1,I:!1,R:{},l:o,t:i,k:s,o:null,g:!1,C:!1};return Object.defineProperty(s,J,{value:l,writable:!0}),s},S:function(i,o,u){u?bt(o)&&o[J].A===i&&e(i.p):(i.u&&function s(l){if(l&&typeof l=="object"){var c=l[J];if(c){var d=c.t,f=c.k,h=c.R,p=c.i;if(p===4)Dt(f,function(M){M!==J&&(d[M]!==void 0||Yt(d,M)?h[M]||s(f[M]):(h[M]=!0,dt(c)))}),Dt(d,function(M){f[M]!==void 0||Yt(f,M)||(h[M]=!1,dt(c))});else if(p===5){if(n(c)&&(dt(c),h.length=!0),f.length<d.length)for(var m=f.length;m<d.length;m++)h[m]=!1;else for(var g=d.length;g<f.length;g++)h[g]=!0;for(var b=Math.min(f.length,d.length),w=0;w<b;w++)f.hasOwnProperty(w)||(h[w]=!0),h[w]===void 0&&s(f[w])}}}}(i.p[0]),e(i.p))},K:function(i){return i.i===4?r(i):n(i)}})}var Pv,Fr,fl=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",bw=typeof Map<"u",ww=typeof Set<"u",Ev=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",cm=fl?Symbol.for("immer-nothing"):((Pv={})["immer-nothing"]=!0,Pv),_v=fl?Symbol.for("immer-draftable"):"__$immer_draftable",J=fl?Symbol.for("immer-state"):"__$immer_state",xw=""+Object.prototype.constructor,Zt=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,dm=Object.getOwnPropertyDescriptors||function(t){var e={};return Zt(t).forEach(function(r){e[r]=Object.getOwnPropertyDescriptor(t,r)}),e},ls={},Br={get:function(t,e){if(e===J)return t;var r=St(t);if(!Yt(r,e))return function(a,i,o){var u,s=Av(i,o);return s?"value"in s?s.value:(u=s.get)===null||u===void 0?void 0:u.call(a.k):void 0}(t,r,e);var n=r[e];return t.I||!tt(n)?n:n===Nu(t.t,e)?(Ru(t),t.o[e]=ss(t.A.h,n,t)):n},has:function(t,e){return e in St(t)},ownKeys:function(t){return Reflect.ownKeys(St(t))},set:function(t,e,r){var n=Av(St(t),e);if(n?.set)return n.set.call(t.k,r),!0;if(!t.P){var a=Nu(St(t),e),i=a?.[J];if(i&&i.t===r)return t.o[e]=r,t.R[e]=!1,!0;if(lm(r,a)&&(r!==void 0||Yt(t.t,e)))return!0;Ru(t),dt(t)}return t.o[e]===r&&(r!==void 0||e in t.o)||Number.isNaN(r)&&Number.isNaN(t.o[e])||(t.o[e]=r,t.R[e]=!0),!0},deleteProperty:function(t,e){return Nu(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,Ru(t),dt(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var r=St(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty:function(){Re(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){Re(12)}},Ir={};Dt(Br,function(t,e){Ir[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),Ir.deleteProperty=function(t,e){return Ir.set.call(this,t,e,void 0)},Ir.set=function(t,e,r){return Br.set.call(this,t[0],e,r,t[0])};var Cw=function(){function t(r){var n=this;this.O=Ev,this.D=!0,this.produce=function(a,i,o){if(typeof a=="function"&&typeof i!="function"){var u=i;i=a;var s=n;return function(m){var g=this;m===void 0&&(m=u);for(var b=arguments.length,w=Array(b>1?b-1:0),M=1;M<b;M++)w[M-1]=arguments[M];return s.produce(m,function(y){var C;return(C=i).call.apply(C,[g,y].concat(w))})}}var l;if(typeof i!="function"&&Re(6),o!==void 0&&typeof o!="function"&&Re(7),tt(a)){var c=Mv(n),d=ss(n,a,void 0),f=!0;try{l=i(d),f=!1}finally{f?Pn(c):us(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return ku(c,o),Tu(m,c)},function(m){throw Pn(c),m}):(ku(c,o),Tu(l,c))}if(!a||typeof a!="object"){if((l=i(a))===void 0&&(l=a),l===cm&&(l=void 0),n.D&&cl(l,!0),o){var h=[],p=[];Ge("Patches").M(a,l,h,p),o(h,p)}return l}Re(21,a)},this.produceWithPatches=function(a,i){if(typeof a=="function")return function(l){for(var c=arguments.length,d=Array(c>1?c-1:0),f=1;f<c;f++)d[f-1]=arguments[f];return n.produceWithPatches(l,function(h){return a.apply(void 0,[h].concat(d))})};var o,u,s=n.produce(a,i,function(l,c){o=l,u=c});return typeof Promise<"u"&&s instanceof Promise?s.then(function(l){return[l,o,u]}):[s,o,u]},typeof r?.useProxies=="boolean"&&this.setUseProxies(r.useProxies),typeof r?.autoFreeze=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var e=t.prototype;return e.createDraft=function(r){tt(r)||Re(8),bt(r)&&(r=gw(r));var n=Mv(this),a=ss(this,r,void 0);return a[J].C=!0,us(n),a},e.finishDraft=function(r,n){var a=r&&r[J],i=a.A;return ku(i,n),Tu(void 0,i)},e.setAutoFreeze=function(r){this.D=r},e.setUseProxies=function(r){r&&!Ev&&Re(20),this.O=r},e.applyPatches=function(r,n){var a;for(a=n.length-1;a>=0;a--){var i=n[a];if(i.path.length===0&&i.op==="replace"){r=i.value;break}}a>-1&&(n=n.slice(a+1));var o=Ge("Patches").$;return bt(r)?o(r,n):this.produce(r,function(u){return o(u,n)})},t}(),Ee=new Cw,fm=Ee.produce;Ee.produceWithPatches.bind(Ee);Ee.setAutoFreeze.bind(Ee);Ee.setUseProxies.bind(Ee);Ee.applyPatches.bind(Ee);Ee.createDraft.bind(Ee);Ee.finishDraft.bind(Ee);var vm=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Mw=function(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(l){return function(c){return s([l,c])}}function s(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(i=l[0]&2?a.return:l[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,l[1])).done)return i;switch(a=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,a=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){r.label=l[1];break}if(l[0]===6&&r.label<i[1]){r.label=i[1],i=l;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(l);break}i[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(c){l=[6,c],a=0}finally{n=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},rr=function(t,e){for(var r=0,n=e.length,a=t.length;r<n;r++,a++)t[a]=e[r];return t},Sw=Object.defineProperty,Aw=Object.defineProperties,Iw=Object.getOwnPropertyDescriptors,Ov=Object.getOwnPropertySymbols,Pw=Object.prototype.hasOwnProperty,Ew=Object.prototype.propertyIsEnumerable,kv=function(t,e,r){return e in t?Sw(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r},mt=function(t,e){for(var r in e||(e={}))Pw.call(e,r)&&kv(t,r,e[r]);if(Ov)for(var n=0,a=Ov(e);n<a.length;n++){var r=a[n];Ew.call(e,r)&&kv(t,r,e[r])}return t},Du=function(t,e){return Aw(t,Iw(e))},_w=function(t,e,r){return new Promise(function(n,a){var i=function(s){try{u(r.next(s))}catch(l){a(l)}},o=function(s){try{u(r.throw(s))}catch(l){a(l)}},u=function(s){return s.done?n(s.value):Promise.resolve(s.value).then(i,o)};u((r=r.apply(t,e)).next())})},Ow=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?is:is.apply(null,arguments)};function kw(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var r=e;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return e===r}function gt(t,e){function r(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];if(e){var i=e.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return mt(mt({type:t,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:t,payload:n[0]}}return r.toString=function(){return""+t},r.type=t,r.match=function(n){return n.type===t},r}var Tw=function(t){vm(e,t);function e(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=t.apply(this,r)||this;return Object.setPrototypeOf(a,e.prototype),a}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.prototype.concat.apply(this,r)},e.prototype.prepend=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.length===1&&Array.isArray(r[0])?new(e.bind.apply(e,rr([void 0],r[0].concat(this)))):new(e.bind.apply(e,rr([void 0],r.concat(this))))},e}(Array),Nw=function(t){vm(e,t);function e(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=t.apply(this,r)||this;return Object.setPrototypeOf(a,e.prototype),a}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.prototype.concat.apply(this,r)},e.prototype.prepend=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.length===1&&Array.isArray(r[0])?new(e.bind.apply(e,rr([void 0],r[0].concat(this)))):new(e.bind.apply(e,rr([void 0],r.concat(this))))},e}(Array);function cs(t){return tt(t)?fm(t,function(){}):t}function Rw(t){return typeof t=="boolean"}function Dw(){return function(e){return Lw(e)}}function Lw(t){t===void 0&&(t={});var e=t.thunk,r=e===void 0?!0:e;t.immutableCheck,t.serializableCheck,t.actionCreatorCheck;var n=new Tw;return r&&(Rw(r)?n.push(uc):n.push(uc.withExtraArgument(r.extraArgument))),n}function jw(t){var e=Dw(),r=t||{},n=r.reducer,a=n===void 0?void 0:n,i=r.middleware,o=i===void 0?e():i,u=r.devTools,s=u===void 0?!0:u,l=r.preloadedState,c=l===void 0?void 0:l,d=r.enhancers,f=d===void 0?void 0:d,h;if(typeof a=="function")h=a;else if(kw(a))h=Z1(a);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(e));var m=Q1.apply(void 0,p),g=is;s&&(g=Ow(mt({trace:!1},typeof s=="object"&&s)));var b=new Nw(m),w=b;Array.isArray(f)?w=rr([m],f):typeof f=="function"&&(w=f(b));var M=g.apply(void 0,w);return X1(h,c,M)}function hm(t){var e={},r=[],n,a={addCase:function(i,o){var u=typeof i=="string"?i:i.type;if(!u)throw new Error("`builder.addCase` cannot be called with an empty action type");if(u in e)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return e[u]=o,a},addMatcher:function(i,o){return r.push({matcher:i,reducer:o}),a},addDefaultCase:function(i){return n=i,a}};return t(a),[e,r,n]}function qw(t){return typeof t=="function"}function Fw(t,e,r,n){r===void 0&&(r=[]);var a=typeof e=="function"?hm(e):[e,r,n],i=a[0],o=a[1],u=a[2],s;if(qw(t))s=function(){return cs(t())};else{var l=cs(t);s=function(){return l}}function c(d,f){d===void 0&&(d=s());var h=rr([i[f.type]],o.filter(function(p){var m=p.matcher;return m(f)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[u]),h.reduce(function(p,m){if(m)if(bt(p)){var g=p,b=m(g,f);return b===void 0?p:b}else{if(tt(p))return fm(p,function(w){return m(w,f)});var b=m(p,f);if(b===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return b}return p},d)}return c.getInitialState=s,c}function Bw(t,e){return t+"/"+e}function na(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");var r=typeof t.initialState=="function"?t.initialState:cs(t.initialState),n=t.reducers||{},a=Object.keys(n),i={},o={},u={};a.forEach(function(c){var d=n[c],f=Bw(e,c),h,p;"reducer"in d?(h=d.reducer,p=d.prepare):h=d,i[c]=h,o[f]=h,u[c]=p?gt(f,p):gt(f)});function s(){var c=typeof t.extraReducers=="function"?hm(t.extraReducers):[t.extraReducers],d=c[0],f=d===void 0?{}:d,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,b=mt(mt({},f),o);return Fw(r,function(w){for(var M in b)w.addCase(M,b[M]);for(var y=0,C=p;y<C.length;y++){var S=C[y];w.addMatcher(S.matcher,S.reducer)}g&&w.addDefaultCase(g)})}var l;return{name:e,reducer:function(c,d){return l||(l=s()),l(c,d)},actions:u,caseReducers:i,getInitialState:function(){return l||(l=s()),l.getInitialState()}}}var zw="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Hw=function(t){t===void 0&&(t=21);for(var e="",r=t;r--;)e+=zw[Math.random()*64|0];return e},Uw=["name","message","stack","code"],Lu=function(){function t(e,r){this.payload=e,this.meta=r}return t}(),Tv=function(){function t(e,r){this.payload=e,this.meta=r}return t}(),$w=function(t){if(typeof t=="object"&&t!==null){for(var e={},r=0,n=Uw;r<n.length;r++){var a=n[r];typeof t[a]=="string"&&(e[a]=t[a])}return e}return{message:String(t)}};(function(){function t(e,r,n){var a=gt(e+"/fulfilled",function(l,c,d,f){return{payload:l,meta:Du(mt({},f||{}),{arg:d,requestId:c,requestStatus:"fulfilled"})}}),i=gt(e+"/pending",function(l,c,d){return{payload:void 0,meta:Du(mt({},d||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=gt(e+"/rejected",function(l,c,d,f,h){return{payload:f,error:(n&&n.serializeError||$w)(l||"Rejected"),meta:Du(mt({},h||{}),{arg:d,requestId:c,rejectedWithValue:!!f,requestStatus:"rejected",aborted:l?.name==="AbortError",condition:l?.name==="ConditionError"})}}),u=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function s(l){return function(c,d,f){var h=n?.idGenerator?n.idGenerator(l):Hw(),p=new u,m;function g(w){m=w,p.abort()}var b=function(){return _w(this,null,function(){var w,M,y,C,S,I,_;return Mw(this,function(O){switch(O.label){case 0:return O.trys.push([0,4,,5]),C=(w=n?.condition)==null?void 0:w.call(n,l,{getState:d,extra:f}),Vw(C)?[4,C]:[3,2];case 1:C=O.sent(),O.label=2;case 2:if(C===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return S=new Promise(function(T,P){return p.signal.addEventListener("abort",function(){return P({name:"AbortError",message:m||"Aborted"})})}),c(i(h,l,(M=n?.getPendingMeta)==null?void 0:M.call(n,{requestId:h,arg:l},{getState:d,extra:f}))),[4,Promise.race([S,Promise.resolve(r(l,{dispatch:c,getState:d,extra:f,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(T,P){return new Lu(T,P)},fulfillWithValue:function(T,P){return new Tv(T,P)}})).then(function(T){if(T instanceof Lu)throw T;return T instanceof Tv?a(T.payload,h,l,T.meta):a(T,h,l)})])];case 3:return y=O.sent(),[3,5];case 4:return I=O.sent(),y=I instanceof Lu?o(null,h,l,I.payload,I.meta):o(I,h,l),[3,5];case 5:return _=n&&!n.dispatchConditionRejection&&o.match(y)&&y.meta.condition,_||c(y),[2,y]}})})}();return Object.assign(b,{abort:g,requestId:h,arg:l,unwrap:function(){return b.then(Gw)}})}}return Object.assign(s,{pending:i,rejected:o,fulfilled:a,typePrefix:e})}return t.withTypes=function(){return t},t})();function Gw(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function Vw(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var vl="listenerMiddleware";gt(vl+"/add");gt(vl+"/removeAll");gt(vl+"/remove");var Nv;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:globalThis);yw();var Fe=function(e){return"@@redux-saga/"+e},Kw=Fe("CANCEL_PROMISE"),pm=Fe("CHANNEL_END"),mm=Fe("IO"),Rv=Fe("MATCH"),gm=Fe("MULTICAST"),ym=Fe("SAGA_ACTION"),Ww=Fe("SELF_CANCELLATION"),Yw=Fe("TASK"),Qt=Fe("TASK_CANCEL"),bm=Fe("TERMINATE"),Zw=Fe("LOCATION"),wm=function(e){return e==null},hn=function(e){return e!=null},Ae=function(e){return typeof e=="function"},hl=function(e){return typeof e=="string"},xt=Array.isArray,aa=function(e){return e&&Ae(e.then)},pl=function(e){return e&&Ae(e.next)&&Ae(e.throw)},Dv=function t(e){return e&&(hl(e)||Cm(e)||Ae(e)||xt(e)&&e.every(t))},ml=function(e){return e&&Ae(e.take)&&Ae(e.close)},xm=function(e){return Ae(e)&&e.hasOwnProperty("toString")},Cm=function(e){return!!e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype},Qw=function(e){return ml(e)&&e[gm]},Xw=function(e){return function(){return e}},Jw=Xw(!0),pe=function(){},ex=function(e){return e},gl=function(e,r){Hs(e,r),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(r).forEach(function(n){e[n]=r[n]})},tx=function(e,r){var n;return(n=[]).concat.apply(n,r.map(e))};function ia(t,e){var r=t.indexOf(e);r>=0&&t.splice(r,1)}function rx(t){var e=!1;return function(){e||(e=!0,t())}}var nx=function(e){throw e},ax=function(e){return{value:e,done:!0}};function ds(t,e,r){e===void 0&&(e=nx),r===void 0&&(r="iterator");var n={meta:{name:r},next:t,throw:e,return:ax,isSagaIterator:!0};return typeof Symbol<"u"&&(n[Symbol.iterator]=function(){return n}),n}function ix(t,e){var r=e.sagaStack;console.error(t),console.error(r)}var Mm=function(e){return Array.apply(null,new Array(e))},ox=function(e){return function(r){return e(Object.defineProperty(r,ym,{value:!0}))}},Sm=function(e){return e===bm},Am=function(e){return e===Qt},Im=function(e){return Sm(e)||Am(e)};function Pm(t,e){var r=Object.keys(t),n=r.length,a=0,i,o=xt(t)?Mm(n):{},u={};function s(){a===n&&(i=!0,e(o))}return r.forEach(function(l){var c=function(f,h){i||(h||Im(f)?(e.cancel(),e(f,h)):(o[l]=f,a++,s()))};c.cancel=pe,u[l]=c}),e.cancel=function(){i||(i=!0,r.forEach(function(l){return u[l].cancel()}))},u}function yl(t){return{name:t.name||"anonymous",location:Em(t)}}function Em(t){return t[Zw]}function ux(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.length===0?function(n){return n}:e.length===1?e[0]:e.reduce(function(n,a){return function(){return n(a.apply(void 0,arguments))}})}var sx="Channel's Buffer overflow!",lx=1,cx=3,_m=4;function dx(t,e){t===void 0&&(t=10);var r=new Array(t),n=0,a=0,i=0,o=function(c){r[a]=c,a=(a+1)%t,n++},u=function(){if(n!=0){var c=r[i];return r[i]=null,n--,i=(i+1)%t,c}},s=function(){for(var c=[];n;)c.push(u());return c};return{isEmpty:function(){return n==0},put:function(c){if(n<t)o(c);else{var d;switch(e){case lx:throw new Error(sx);case cx:r[a]=c,a=(a+1)%t,i=a;break;case _m:d=2*t,r=s(),n=r.length,a=r.length,i=0,r.length=d,t=d,o(c);break}}},take:u,flush:s}}var fx=function(e){return dx(e,_m)},pn="TAKE",Om="PUT",vx="ALL",hx="RACE",km="CALL",px="CPS",bl="FORK",mx="JOIN",gx="CANCEL",yx="SELECT",bx="ACTION_CHANNEL",wx="CANCELLED",xx="FLUSH",Cx="GET_CONTEXT",Mx="SET_CONTEXT",Ot=function(e,r){var n;return n={},n[mm]=!0,n.combinator=!1,n.type=e,n.payload=r,n},Sx=function(e){return Ot(bl,Hs({},e.payload,{detached:!0}))};function Ax(t,e){if(t===void 0&&(t="*"),Dv(t))return hn(e)&&console.warn("take(pattern) takes one argument but two were provided. Consider passing an array for listening to several action types"),Ot(pn,{pattern:t});if(Qw(t)&&hn(e)&&Dv(e))return Ot(pn,{channel:t,pattern:e});if(ml(t))return hn(e)&&console.warn("take(channel) takes one argument but two were provided. Second argument is ignored."),Ot(pn,{channel:t})}function ju(t,e){return wm(e)&&(e=t,t=void 0),Ot(Om,{channel:t,action:e})}function Tm(t,e){var r=null,n;return Ae(t)?n=t:(xt(t)?(r=t[0],n=t[1]):(r=t.context,n=t.fn),r&&hl(n)&&Ae(r[n])&&(n=r[n])),{context:r,fn:n,args:e}}function Ix(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return Ot(km,Tm(t,r))}function wl(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return Ot(bl,Tm(t,r))}function Px(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return Sx(wl.apply(void 0,[t].concat(r)))}var Lv=function(e){return{done:!0,value:e}},qu={};function Ex(t){return ml(t)?"channel":xm(t)?String(t):Ae(t)?t.name:String(t)}function _x(t,e,r){var n,a,i,o=e;function u(s,l){if(o===qu)return Lv(s);if(l&&!a)throw o=qu,l;n&&n(s);var c=l?t[a](l):t[o]();return o=c.nextState,i=c.effect,n=c.stateUpdater,a=c.errorState,o===qu?Lv(s):i}return ds(u,function(s){return u(null,s)},r)}function Ox(t,e){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];var i={done:!1,value:Ax(t)},o=function(c){return{done:!1,value:wl.apply(void 0,[e].concat(n,[c]))}},u,s=function(c){return u=c};return _x({q1:function(){return{nextState:"q2",effect:i,stateUpdater:s}},q2:function(){return{nextState:"q1",effect:o(u)}}},"q1","takeEvery("+Ex(t)+", "+e.name+")")}function kx(t,e){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];return wl.apply(void 0,[Ox,t,e].concat(n))}function Tx(){var t={};return t.promise=new Promise(function(e,r){t.resolve=e,t.reject=r}),t}var Nm=[],oa=0;function Nx(t){try{xl(),t()}finally{Lm()}}function Rm(t){Nm.push(t),oa||(xl(),jm())}function Dm(t){try{return xl(),t()}finally{jm()}}function xl(){oa++}function Lm(){oa--}function jm(){Lm();for(var t;!oa&&(t=Nm.shift())!==void 0;)Nx(t)}var Rx=function(e){return function(r){return e.some(function(n){return Cl(n)(r)})}},Dx=function(e){return function(r){return e(r)}},jv=function(e){return function(r){return r.type===String(e)}},Lx=function(e){return function(r){return r.type===e}},qm=function(){return Jw};function Cl(t){var e=t==="*"?qm:hl(t)?jv:xt(t)?Rx:xm(t)?jv:Ae(t)?Dx:Cm(t)?Lx:null;if(e===null)throw new Error("invalid pattern: "+t);return e(t)}var Tr={type:pm},Ml=function(e){return e&&e.type===pm};function jx(t){t===void 0&&(t=fx());var e=!1,r=[];function n(u){if(!e){if(r.length===0)return t.put(u);var s=r.shift();s(u)}}function a(u){e&&t.isEmpty()?u(Tr):t.isEmpty()?(r.push(u),u.cancel=function(){ia(r,u)}):u(t.take())}function i(u){if(e&&t.isEmpty()){u(Tr);return}u(t.flush())}function o(){if(!e){e=!0;var u=r;r=[];for(var s=0,l=u.length;s<l;s++){var c=u[s];c(Tr)}}}return{take:a,put:n,flush:i,close:o}}function qx(){var t,e=!1,r=[],n=r,a=function(){n===r&&(n=r.slice())},i=function(){e=!0;var u=r=n;n=[],u.forEach(function(s){s(Tr)})};return t={},t[gm]=!0,t.put=function(u){if(!e){if(Ml(u)){i();return}for(var s=r=n,l=0,c=s.length;l<c;l++){var d=s[l];d[Rv](u)&&(d.cancel(),d(u))}}},t.take=function(u,s){if(s===void 0&&(s=qm),e){u(Tr);return}u[Rv]=s,a(),n.push(u),u.cancel=rx(function(){a(),ia(n,u)})},t.close=i,t}function Fm(){var t=qx(),e=t.put;return t.put=function(r){if(r[ym]){e(r);return}Rm(function(){e(r)})},t}var It=0,Xe=1,mn=2,Bm=3;function Sl(t,e){var r=t[Kw];Ae(r)&&(e.cancel=r),t.then(e,function(n){e(n,!0)})}var Jr=0,zm=function(){return++Jr},le;function Fx(t,e){return t.isSagaIterator?{name:t.meta.name}:yl(e)}function Bx(t){var e=t.context,r=t.fn,n=t.args;try{var a=r.apply(e,n);if(pl(a))return a;var i=!1,o=function(s){return i?{value:s,done:!0}:(i=!0,{value:a,done:!aa(a)})};return ds(o)}catch(u){return ds(function(){throw u})}}function zx(t,e,r){var n=e.channel,a=e.action,i=e.resolve;Rm(function(){var o;try{o=(n?n.put:t.dispatch)(a)}catch(u){r(u,!0);return}i&&aa(o)?Sl(o,r):r(o)})}function Hx(t,e,r){var n=e.channel,a=n===void 0?t.channel:n,i=e.pattern,o=e.maybe,u=function(l){if(l instanceof Error){r(l,!0);return}if(Ml(l)&&!o){r(bm);return}r(l)};try{a.take(u,hn(i)?Cl(i):null)}catch(s){r(s,!0);return}r.cancel=u.cancel}function Ux(t,e,r,n){var a=e.context,i=e.fn,o=e.args,u=n.task;try{var s=i.apply(a,o);if(aa(s)){Sl(s,r);return}if(pl(s)){ua(t,s,u.context,Jr,yl(i),!1,r);return}r(s)}catch(l){r(l,!0)}}function $x(t,e,r){var n=e.context,a=e.fn,i=e.args;try{var o=function(s,l){wm(s)?r(l):r(s,!0)};a.apply(n,i.concat(o)),o.cancel&&(r.cancel=o.cancel)}catch(u){r(u,!0)}}function Gx(t,e,r,n){var a=e.context,i=e.fn,o=e.args,u=e.detached,s=n.task,l=Bx({context:a,fn:i,args:o}),c=Fx(l,i);Dm(function(){var d=ua(t,l,s.context,Jr,c,u,void 0);u?r(d):d.isRunning()?(s.queue.addTask(d),r(d)):d.isAborted()?s.queue.abort(d.error()):r(d)})}function Vx(t,e,r,n){var a=n.task,i=function(s,l){if(s.isRunning()){var c={task:a,cb:l};l.cancel=function(){s.isRunning()&&ia(s.joiners,c)},s.joiners.push(c)}else s.isAborted()?l(s.error(),!0):l(s.result())};if(xt(e)){if(e.length===0){r([]);return}var o=Pm(e,r);e.forEach(function(u,s){i(u,o[s])})}else i(e,r)}function Fu(t){t.isRunning()&&t.cancel()}function Kx(t,e,r,n){var a=n.task;e===Ww?Fu(a):xt(e)?e.forEach(Fu):Fu(e),r()}function Wx(t,e,r,n){var a=n.digestEffect,i=Jr,o=Object.keys(e);if(o.length===0){r(xt(e)?[]:{});return}var u=Pm(e,r);o.forEach(function(s){a(e[s],i,u[s],s)})}function Yx(t,e,r,n){var a=n.digestEffect,i=Jr,o=Object.keys(e),u=xt(e)?Mm(o.length):{},s={},l=!1;o.forEach(function(c){var d=function(h,p){l||(p||Im(h)?(r.cancel(),r(h,p)):(r.cancel(),l=!0,u[c]=h,r(u)))};d.cancel=pe,s[c]=d}),r.cancel=function(){l||(l=!0,o.forEach(function(c){return s[c].cancel()}))},o.forEach(function(c){l||a(e[c],i,s[c],c)})}function Zx(t,e,r){var n=e.selector,a=e.args;try{var i=n.apply(void 0,[t.getState()].concat(a));r(i)}catch(o){r(o,!0)}}function Qx(t,e,r){var n=e.pattern,a=e.buffer,i=jx(a),o=Cl(n),u=function l(c){Ml(c)||t.channel.take(l,o),i.put(c)},s=i.close;i.close=function(){u.cancel(),s()},t.channel.take(u,o),r(i)}function Xx(t,e,r,n){var a=n.task;r(a.isCancelled())}function Jx(t,e,r){e.flush(r)}function eC(t,e,r,n){var a=n.task;r(a.context[e])}function tC(t,e,r,n){var a=n.task;gl(a.context,e),r()}var rC=(le={},le[pn]=Hx,le[Om]=zx,le[vx]=Wx,le[hx]=Yx,le[km]=Ux,le[px]=$x,le[bl]=Gx,le[mx]=Vx,le[gx]=Kx,le[yx]=Zx,le[bx]=Qx,le[wx]=Xx,le[xx]=Jx,le[Cx]=eC,le[Mx]=tC,le);function nC(t,e,r){var n=[],a,i=!1;s(t);var o=function(){return n};function u(c){e(),l(),r(c,!0)}function s(c){n.push(c),c.cont=function(d,f){i||(ia(n,c),c.cont=pe,f?u(d):(c===t&&(a=d),n.length||(i=!0,r(a))))}}function l(){i||(i=!0,n.forEach(function(c){c.cont=pe,c.cancel()}),n=[])}return{addTask:s,cancelAll:l,abort:u,getTasks:o}}function Hm(t,e){return t+"?"+e}function aC(t){var e=Em(t);if(e){var r=e.code,n=e.fileName,a=e.lineNumber,i=r+"  "+Hm(n,a);return i}return""}function qv(t){var e=t.name,r=t.location;return r?e+"  "+Hm(r.fileName,r.lineNumber):e}function iC(t){var e=tx(function(r){return r.cancelledTasks},t);return e.length?["Tasks cancelled due to error:"].concat(e).join(`
`):""}var Al=null,Nr=[],oC=function(e){e.crashedEffect=Al,Nr.push(e)},Um=function(){Al=null,Nr.length=0},uC=function(e){Al=e},sC=function(){var e=Nr[0],r=Nr.slice(1),n=e.crashedEffect?aC(e.crashedEffect):null,a="The above error occurred in task "+qv(e.meta)+(n?` 
 when executing effect `+n:"");return[a].concat(r.map(function(i){return"    created by "+qv(i.meta)}),[iC(Nr)]).join(`
`)};function lC(t,e,r,n,a,i,o){var u;o===void 0&&(o=pe);var s=It,l,c,d=null,f=[],h=Object.create(r),p=nC(e,function(){f.push.apply(f,p.getTasks().map(function(C){return C.meta.name}))},g);function m(){s===It&&(s=Xe,p.cancelAll(),g(Qt,!1))}function g(y,C){if(!C)y===Qt?s=Xe:s!==Xe&&(s=Bm),l=y,d&&d.resolve(y);else{if(s=mn,oC({meta:a,cancelledTasks:f}),M.isRoot){var S=sC();Um(),t.onError(y,{sagaStack:S})}c=y,d&&d.reject(y)}M.cont(y,C),M.joiners.forEach(function(I){I.cb(y,C)}),M.joiners=null}function b(y){gl(h,y)}function w(){return d||(d=Tx(),s===mn?d.reject(c):s!==It&&d.resolve(l)),d.promise}var M=(u={},u[Yw]=!0,u.id=n,u.meta=a,u.isRoot=i,u.context=h,u.joiners=[],u.queue=p,u.cancel=m,u.cont=o,u.end=g,u.setContext=b,u.toPromise=w,u.isRunning=function(){return s===It},u.isCancelled=function(){return s===Xe||s===It&&e.status===Xe},u.isAborted=function(){return s===mn},u.result=function(){return l},u.error=function(){return c},u);return M}function ua(t,e,r,n,a,i,o){var u=t.finalizeRunEffect(h);f.cancel=pe;var s={meta:a,cancel:d,status:It},l=lC(t,s,r,n,a,i,o),c={task:l,digestEffect:p};function d(){s.status===It&&(s.status=Xe,f(Qt))}return o&&(o.cancel=l.cancel),f(),l;function f(m,g){try{var b;g?(b=e.throw(m),Um()):Am(m)?(s.status=Xe,f.cancel(),b=Ae(e.return)?e.return(Qt):{done:!0,value:Qt}):Sm(m)?b=Ae(e.return)?e.return():{done:!0}:b=e.next(m),b.done?(s.status!==Xe&&(s.status=Bm),s.cont(b.value)):p(b.value,n,f)}catch(w){if(s.status===Xe)throw w;s.status=mn,s.cont(w,!0)}}function h(m,g,b){if(aa(m))Sl(m,b);else if(pl(m))ua(t,m,l.context,g,a,!1,b);else if(m&&m[mm]){var w=rC[m.type];w(t,m.payload,b,c)}else b(m)}function p(m,g,b,w){w===void 0&&(w="");var M=zm();t.sagaMonitor&&t.sagaMonitor.effectTriggered({effectId:M,parentEffectId:g,label:w,effect:m});var y;function C(S,I){y||(y=!0,b.cancel=pe,t.sagaMonitor&&(I?t.sagaMonitor.effectRejected(M,S):t.sagaMonitor.effectResolved(M,S)),I&&uC(m),b(S,I))}C.cancel=pe,b.cancel=function(){y||(y=!0,C.cancel(),C.cancel=pe,t.sagaMonitor&&t.sagaMonitor.effectCancelled(M))},u(m,M,C)}}function cC(t,e){for(var r=t.channel,n=r===void 0?Fm():r,a=t.dispatch,i=t.getState,o=t.context,u=o===void 0?{}:o,s=t.sagaMonitor,l=t.effectMiddlewares,c=t.onError,d=c===void 0?ix:c,f=arguments.length,h=new Array(f>2?f-2:0),p=2;p<f;p++)h[p-2]=arguments[p];var m=e.apply(void 0,h),g=zm();s&&(s.rootSagaStarted=s.rootSagaStarted||pe,s.effectTriggered=s.effectTriggered||pe,s.effectResolved=s.effectResolved||pe,s.effectRejected=s.effectRejected||pe,s.effectCancelled=s.effectCancelled||pe,s.actionDispatched=s.actionDispatched||pe,s.rootSagaStarted({effectId:g,saga:e,args:h}));var b;if(l){var w=ux.apply(void 0,l);b=function(C){return function(S,I,_){var O=function(P){return C(P,I,_)};return w(O)(S)}}}else b=ex;var M={channel:n,dispatch:ox(a),getState:i,sagaMonitor:s,onError:d,finalizeRunEffect:b};return Dm(function(){var y=ua(M,m,u,g,yl(e),!0,void 0);return s&&s.effectResolved(g,y),y})}function dC(t){var e={},r=e.context,n=r===void 0?{}:r,a=e.channel,i=a===void 0?Fm():a,o=e.sagaMonitor,u=b1(e,["context","channel","sagaMonitor"]),s;function l(c){var d=c.getState,f=c.dispatch;return s=cC.bind(null,Hs({},u,{context:n,channel:i,dispatch:f,getState:d,sagaMonitor:o})),function(h){return function(p){o&&o.actionDispatched&&o.actionDispatched(p);var m=h(p);return i.put(p),m}}}return l.run=function(){return s.apply(void 0,arguments)},l.setContext=function(c){gl(n,c)},l}function gn(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function fC(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function $m(t){let e,r,n;t.length!==2?(e=gn,r=(u,s)=>gn(t(u),s),n=(u,s)=>t(u)-s):(e=t===gn||t===fC?t:vC,r=t,n=t);function a(u,s,l=0,c=u.length){if(l<c){if(e(s,s)!==0)return c;do{const d=l+c>>>1;r(u[d],s)<0?l=d+1:c=d}while(l<c)}return l}function i(u,s,l=0,c=u.length){if(l<c){if(e(s,s)!==0)return c;do{const d=l+c>>>1;r(u[d],s)<=0?l=d+1:c=d}while(l<c)}return l}function o(u,s,l=0,c=u.length){const d=a(u,s,l,c-1);return d>l&&n(u[d-1],s)>-n(u[d],s)?d-1:d}return{left:a,center:o,right:i}}function vC(){return 0}function hC(t){return t===null?NaN:+t}const pC=$m(gn),mC=pC.right;$m(hC).center;var gC=mC;const yC=Math.sqrt(50),bC=Math.sqrt(10),wC=Math.sqrt(2);function On(t,e,r){const n=(e-t)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),o=i>=yC?10:i>=bC?5:i>=wC?2:1;let u,s,l;return a<0?(l=Math.pow(10,-a)/o,u=Math.round(t*l),s=Math.round(e*l),u/l<t&&++u,s/l>e&&--s,l=-l):(l=Math.pow(10,a)*o,u=Math.round(t/l),s=Math.round(e/l),u*l<t&&++u,s*l>e&&--s),s<u&&.5<=r&&r<2?On(t,e,r*2):[u,s,l]}function xC(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[a,i,o]=n?On(e,t,r):On(t,e,r);if(!(i>=a))return[];const u=i-a+1,s=new Array(u);if(n)if(o<0)for(let l=0;l<u;++l)s[l]=(i-l)/-o;else for(let l=0;l<u;++l)s[l]=(i-l)*o;else if(o<0)for(let l=0;l<u;++l)s[l]=(a+l)/-o;else for(let l=0;l<u;++l)s[l]=(a+l)*o;return s}function fs(t,e,r){return e=+e,t=+t,r=+r,On(t,e,r)[2]}function CC(t,e,r){e=+e,t=+t,r=+r;const n=e<t,a=n?fs(e,t,r):fs(t,e,r);return(n?-1:1)*(a<0?1/-a:a)}function MC(t){return t}var Bu=1,zu=2,vs=3,Pr=4,Fv=1e-6;function SC(t){return"translate("+t+",0)"}function AC(t){return"translate(0,"+t+")"}function IC(t){return e=>+t(e)}function PC(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),r=>+t(r)+e}function EC(){return!this.__axis}function Gm(t,e){var r=[],n=null,a=null,i=6,o=6,u=3,s=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=t===Bu||t===Pr?-1:1,c=t===Pr||t===zu?"x":"y",d=t===Bu||t===vs?SC:AC;function f(h){var p=n??(e.ticks?e.ticks.apply(e,r):e.domain()),m=a??(e.tickFormat?e.tickFormat.apply(e,r):MC),g=Math.max(i,0)+u,b=e.range(),w=+b[0]+s,M=+b[b.length-1]+s,y=(e.bandwidth?PC:IC)(e.copy(),s),C=h.selection?h.selection():h,S=C.selectAll(".domain").data([null]),I=C.selectAll(".tick").data(p,e).order(),_=I.exit(),O=I.enter().append("g").attr("class","tick"),T=I.select("line"),P=I.select("text");S=S.merge(S.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),I=I.merge(O),T=T.merge(O.append("line").attr("stroke","currentColor").attr(c+"2",l*i)),P=P.merge(O.append("text").attr("fill","currentColor").attr(c,l*g).attr("dy",t===Bu?"0em":t===vs?"0.71em":"0.32em")),h!==C&&(S=S.transition(h),I=I.transition(h),T=T.transition(h),P=P.transition(h),_=_.transition(h).attr("opacity",Fv).attr("transform",function(N){return isFinite(N=y(N))?d(N+s):this.getAttribute("transform")}),O.attr("opacity",Fv).attr("transform",function(N){var R=this.parentNode.__axis;return d((R&&isFinite(R=R(N))?R:y(N))+s)})),_.remove(),S.attr("d",t===Pr||t===zu?o?"M"+l*o+","+w+"H"+s+"V"+M+"H"+l*o:"M"+s+","+w+"V"+M:o?"M"+w+","+l*o+"V"+s+"H"+M+"V"+l*o:"M"+w+","+s+"H"+M),I.attr("opacity",1).attr("transform",function(N){return d(y(N)+s)}),T.attr(c+"2",l*i),P.attr(c,l*g).text(m),C.filter(EC).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===zu?"start":t===Pr?"end":"middle"),C.each(function(){this.__axis=y})}return f.scale=function(h){return arguments.length?(e=h,f):e},f.ticks=function(){return r=Array.from(arguments),f},f.tickArguments=function(h){return arguments.length?(r=h==null?[]:Array.from(h),f):r.slice()},f.tickValues=function(h){return arguments.length?(n=h==null?null:Array.from(h),f):n&&n.slice()},f.tickFormat=function(h){return arguments.length?(a=h,f):a},f.tickSize=function(h){return arguments.length?(i=o=+h,f):i},f.tickSizeInner=function(h){return arguments.length?(i=+h,f):i},f.tickSizeOuter=function(h){return arguments.length?(o=+h,f):o},f.tickPadding=function(h){return arguments.length?(u=+h,f):u},f.offset=function(h){return arguments.length?(s=+h,f):s},f}function _C(t){return Gm(vs,t)}function OC(t){return Gm(Pr,t)}var kC={value:()=>{}};function Vm(){for(var t=0,e=arguments.length,r={},n;t<e;++t){if(!(n=arguments[t]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new yn(r)}function yn(t){this._=t}function TC(t,e){return t.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}yn.prototype=Vm.prototype={constructor:yn,on:function(t,e){var r=this._,n=TC(t+"",r),a,i=-1,o=n.length;if(arguments.length<2){for(;++i<o;)if((a=(t=n[i]).type)&&(a=NC(r[a],t.name)))return a;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++i<o;)if(a=(t=n[i]).type)r[a]=Bv(r[a],t.name,e);else if(e==null)for(a in r)r[a]=Bv(r[a],t.name,null);return this},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new yn(t)},call:function(t,e){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,i;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=this._[t],n=0,a=i.length;n<a;++n)i[n].value.apply(e,r)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],a=0,i=n.length;a<i;++a)n[a].value.apply(e,r)}};function NC(t,e){for(var r=0,n=t.length,a;r<n;++r)if((a=t[r]).name===e)return a.value}function Bv(t,e,r){for(var n=0,a=t.length;n<a;++n)if(t[n].name===e){t[n]=kC,t=t.slice(0,n).concat(t.slice(n+1));break}return r!=null&&t.push({name:e,value:r}),t}var hs="http://www.w3.org/1999/xhtml",zv={svg:"http://www.w3.org/2000/svg",xhtml:hs,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function sa(t){var e=t+="",r=e.indexOf(":");return r>=0&&(e=t.slice(0,r))!=="xmlns"&&(t=t.slice(r+1)),zv.hasOwnProperty(e)?{space:zv[e],local:t}:t}function RC(t){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===hs&&e.documentElement.namespaceURI===hs?e.createElement(t):e.createElementNS(r,t)}}function DC(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Km(t){var e=sa(t);return(e.local?DC:RC)(e)}function LC(){}function Il(t){return t==null?LC:function(){return this.querySelector(t)}}function jC(t){typeof t!="function"&&(t=Il(t));for(var e=this._groups,r=e.length,n=new Array(r),a=0;a<r;++a)for(var i=e[a],o=i.length,u=n[a]=new Array(o),s,l,c=0;c<o;++c)(s=i[c])&&(l=t.call(s,s.__data__,c,i))&&("__data__"in s&&(l.__data__=s.__data__),u[c]=l);return new _e(n,this._parents)}function qC(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function FC(){return[]}function Wm(t){return t==null?FC:function(){return this.querySelectorAll(t)}}function BC(t){return function(){return qC(t.apply(this,arguments))}}function zC(t){typeof t=="function"?t=BC(t):t=Wm(t);for(var e=this._groups,r=e.length,n=[],a=[],i=0;i<r;++i)for(var o=e[i],u=o.length,s,l=0;l<u;++l)(s=o[l])&&(n.push(t.call(s,s.__data__,l,o)),a.push(s));return new _e(n,a)}function Ym(t){return function(){return this.matches(t)}}function Zm(t){return function(e){return e.matches(t)}}var HC=Array.prototype.find;function UC(t){return function(){return HC.call(this.children,t)}}function $C(){return this.firstElementChild}function GC(t){return this.select(t==null?$C:UC(typeof t=="function"?t:Zm(t)))}var VC=Array.prototype.filter;function KC(){return Array.from(this.children)}function WC(t){return function(){return VC.call(this.children,t)}}function YC(t){return this.selectAll(t==null?KC:WC(typeof t=="function"?t:Zm(t)))}function ZC(t){typeof t!="function"&&(t=Ym(t));for(var e=this._groups,r=e.length,n=new Array(r),a=0;a<r;++a)for(var i=e[a],o=i.length,u=n[a]=[],s,l=0;l<o;++l)(s=i[l])&&t.call(s,s.__data__,l,i)&&u.push(s);return new _e(n,this._parents)}function Qm(t){return new Array(t.length)}function QC(){return new _e(this._enter||this._groups.map(Qm),this._parents)}function kn(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}kn.prototype={constructor:kn,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function XC(t){return function(){return t}}function JC(t,e,r,n,a,i){for(var o=0,u,s=e.length,l=i.length;o<l;++o)(u=e[o])?(u.__data__=i[o],n[o]=u):r[o]=new kn(t,i[o]);for(;o<s;++o)(u=e[o])&&(a[o]=u)}function eM(t,e,r,n,a,i,o){var u,s,l=new Map,c=e.length,d=i.length,f=new Array(c),h;for(u=0;u<c;++u)(s=e[u])&&(f[u]=h=o.call(s,s.__data__,u,e)+"",l.has(h)?a[u]=s:l.set(h,s));for(u=0;u<d;++u)h=o.call(t,i[u],u,i)+"",(s=l.get(h))?(n[u]=s,s.__data__=i[u],l.delete(h)):r[u]=new kn(t,i[u]);for(u=0;u<c;++u)(s=e[u])&&l.get(f[u])===s&&(a[u]=s)}function tM(t){return t.__data__}function rM(t,e){if(!arguments.length)return Array.from(this,tM);var r=e?eM:JC,n=this._parents,a=this._groups;typeof t!="function"&&(t=XC(t));for(var i=a.length,o=new Array(i),u=new Array(i),s=new Array(i),l=0;l<i;++l){var c=n[l],d=a[l],f=d.length,h=nM(t.call(c,c&&c.__data__,l,n)),p=h.length,m=u[l]=new Array(p),g=o[l]=new Array(p),b=s[l]=new Array(f);r(c,d,m,g,b,h,e);for(var w=0,M=0,y,C;w<p;++w)if(y=m[w]){for(w>=M&&(M=w+1);!(C=g[M])&&++M<p;);y._next=C||null}}return o=new _e(o,n),o._enter=u,o._exit=s,o}function nM(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function aM(){return new _e(this._exit||this._groups.map(Qm),this._parents)}function iM(t,e,r){var n=this.enter(),a=this,i=this.exit();return typeof t=="function"?(n=t(n),n&&(n=n.selection())):n=n.append(t+""),e!=null&&(a=e(a),a&&(a=a.selection())),r==null?i.remove():r(i),n&&a?n.merge(a).order():a}function oM(t){for(var e=t.selection?t.selection():t,r=this._groups,n=e._groups,a=r.length,i=n.length,o=Math.min(a,i),u=new Array(a),s=0;s<o;++s)for(var l=r[s],c=n[s],d=l.length,f=u[s]=new Array(d),h,p=0;p<d;++p)(h=l[p]||c[p])&&(f[p]=h);for(;s<a;++s)u[s]=r[s];return new _e(u,this._parents)}function uM(){for(var t=this._groups,e=-1,r=t.length;++e<r;)for(var n=t[e],a=n.length-1,i=n[a],o;--a>=0;)(o=n[a])&&(i&&o.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(o,i),i=o);return this}function sM(t){t||(t=lM);function e(d,f){return d&&f?t(d.__data__,f.__data__):!d-!f}for(var r=this._groups,n=r.length,a=new Array(n),i=0;i<n;++i){for(var o=r[i],u=o.length,s=a[i]=new Array(u),l,c=0;c<u;++c)(l=o[c])&&(s[c]=l);s.sort(e)}return new _e(a,this._parents).order()}function lM(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function cM(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function dM(){return Array.from(this)}function fM(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],a=0,i=n.length;a<i;++a){var o=n[a];if(o)return o}return null}function vM(){let t=0;for(const e of this)++t;return t}function hM(){return!this.node()}function pM(t){for(var e=this._groups,r=0,n=e.length;r<n;++r)for(var a=e[r],i=0,o=a.length,u;i<o;++i)(u=a[i])&&t.call(u,u.__data__,i,a);return this}function mM(t){return function(){this.removeAttribute(t)}}function gM(t){return function(){this.removeAttributeNS(t.space,t.local)}}function yM(t,e){return function(){this.setAttribute(t,e)}}function bM(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function wM(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(t):this.setAttribute(t,r)}}function xM(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}function CM(t,e){var r=sa(t);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((e==null?r.local?gM:mM:typeof e=="function"?r.local?xM:wM:r.local?bM:yM)(r,e))}function Xm(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function MM(t){return function(){this.style.removeProperty(t)}}function SM(t,e,r){return function(){this.style.setProperty(t,e,r)}}function AM(t,e,r){return function(){var n=e.apply(this,arguments);n==null?this.style.removeProperty(t):this.style.setProperty(t,n,r)}}function IM(t,e,r){return arguments.length>1?this.each((e==null?MM:typeof e=="function"?AM:SM)(t,e,r??"")):nr(this.node(),t)}function nr(t,e){return t.style.getPropertyValue(e)||Xm(t).getComputedStyle(t,null).getPropertyValue(e)}function PM(t){return function(){delete this[t]}}function EM(t,e){return function(){this[t]=e}}function _M(t,e){return function(){var r=e.apply(this,arguments);r==null?delete this[t]:this[t]=r}}function OM(t,e){return arguments.length>1?this.each((e==null?PM:typeof e=="function"?_M:EM)(t,e)):this.node()[t]}function Jm(t){return t.trim().split(/^|\s+/)}function Pl(t){return t.classList||new eg(t)}function eg(t){this._node=t,this._names=Jm(t.getAttribute("class")||"")}eg.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function tg(t,e){for(var r=Pl(t),n=-1,a=e.length;++n<a;)r.add(e[n])}function rg(t,e){for(var r=Pl(t),n=-1,a=e.length;++n<a;)r.remove(e[n])}function kM(t){return function(){tg(this,t)}}function TM(t){return function(){rg(this,t)}}function NM(t,e){return function(){(e.apply(this,arguments)?tg:rg)(this,t)}}function RM(t,e){var r=Jm(t+"");if(arguments.length<2){for(var n=Pl(this.node()),a=-1,i=r.length;++a<i;)if(!n.contains(r[a]))return!1;return!0}return this.each((typeof e=="function"?NM:e?kM:TM)(r,e))}function DM(){this.textContent=""}function LM(t){return function(){this.textContent=t}}function jM(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function qM(t){return arguments.length?this.each(t==null?DM:(typeof t=="function"?jM:LM)(t)):this.node().textContent}function FM(){this.innerHTML=""}function BM(t){return function(){this.innerHTML=t}}function zM(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function HM(t){return arguments.length?this.each(t==null?FM:(typeof t=="function"?zM:BM)(t)):this.node().innerHTML}function UM(){this.nextSibling&&this.parentNode.appendChild(this)}function $M(){return this.each(UM)}function GM(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function VM(){return this.each(GM)}function KM(t){var e=typeof t=="function"?t:Km(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function WM(){return null}function YM(t,e){var r=typeof t=="function"?t:Km(t),n=e==null?WM:typeof e=="function"?e:Il(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function ZM(){var t=this.parentNode;t&&t.removeChild(this)}function QM(){return this.each(ZM)}function XM(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function JM(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function eS(t){return this.select(t?JM:XM)}function tS(t){return arguments.length?this.property("__data__",t):this.node().__data__}function rS(t){return function(e){t.call(this,e,this.__data__)}}function nS(t){return t.trim().split(/^|\s+/).map(function(e){var r="",n=e.indexOf(".");return n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),{type:e,name:r}})}function aS(t){return function(){var e=this.__on;if(e){for(var r=0,n=-1,a=e.length,i;r<a;++r)i=e[r],(!t.type||i.type===t.type)&&i.name===t.name?this.removeEventListener(i.type,i.listener,i.options):e[++n]=i;++n?e.length=n:delete this.__on}}}function iS(t,e,r){return function(){var n=this.__on,a,i=rS(e);if(n){for(var o=0,u=n.length;o<u;++o)if((a=n[o]).type===t.type&&a.name===t.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=i,a.options=r),a.value=e;return}}this.addEventListener(t.type,i,r),a={type:t.type,name:t.name,value:e,listener:i,options:r},n?n.push(a):this.__on=[a]}}function oS(t,e,r){var n=nS(t+""),a,i=n.length,o;if(arguments.length<2){var u=this.node().__on;if(u){for(var s=0,l=u.length,c;s<l;++s)for(a=0,c=u[s];a<i;++a)if((o=n[a]).type===c.type&&o.name===c.name)return c.value}return}for(u=e?iS:aS,a=0;a<i;++a)this.each(u(n[a],e,r));return this}function ng(t,e,r){var n=Xm(t),a=n.CustomEvent;typeof a=="function"?a=new a(e,r):(a=n.document.createEvent("Event"),r?(a.initEvent(e,r.bubbles,r.cancelable),a.detail=r.detail):a.initEvent(e,!1,!1)),t.dispatchEvent(a)}function uS(t,e){return function(){return ng(this,t,e)}}function sS(t,e){return function(){return ng(this,t,e.apply(this,arguments))}}function lS(t,e){return this.each((typeof e=="function"?sS:uS)(t,e))}function*cS(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],a=0,i=n.length,o;a<i;++a)(o=n[a])&&(yield o)}var ag=[null];function _e(t,e){this._groups=t,this._parents=e}function en(){return new _e([[document.documentElement]],ag)}function dS(){return this}_e.prototype=en.prototype={constructor:_e,select:jC,selectAll:zC,selectChild:GC,selectChildren:YC,filter:ZC,data:rM,enter:QC,exit:aM,join:iM,merge:oM,selection:dS,order:uM,sort:sM,call:cM,nodes:dM,node:fM,size:vM,empty:hM,each:pM,attr:CM,style:IM,property:OM,classed:RM,text:qM,html:HM,raise:$M,lower:VM,append:KM,insert:YM,remove:QM,clone:eS,datum:tS,on:oS,dispatch:lS,[Symbol.iterator]:cS};function Er(t){return typeof t=="string"?new _e([[document.querySelector(t)]],[document.documentElement]):new _e([[t]],ag)}function El(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function ig(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function tn(){}var zr=.7,Tn=1/zr,Xt="\\s*([+-]?\\d+)\\s*",Hr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ve="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",fS=/^#([0-9a-f]{3,8})$/,vS=new RegExp(`^rgb\\(${Xt},${Xt},${Xt}\\)$`),hS=new RegExp(`^rgb\\(${Ve},${Ve},${Ve}\\)$`),pS=new RegExp(`^rgba\\(${Xt},${Xt},${Xt},${Hr}\\)$`),mS=new RegExp(`^rgba\\(${Ve},${Ve},${Ve},${Hr}\\)$`),gS=new RegExp(`^hsl\\(${Hr},${Ve},${Ve}\\)$`),yS=new RegExp(`^hsla\\(${Hr},${Ve},${Ve},${Hr}\\)$`),Hv={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};El(tn,Lt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Uv,formatHex:Uv,formatHex8:bS,formatHsl:wS,formatRgb:$v,toString:$v});function Uv(){return this.rgb().formatHex()}function bS(){return this.rgb().formatHex8()}function wS(){return og(this).formatHsl()}function $v(){return this.rgb().formatRgb()}function Lt(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=fS.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?Gv(e):r===3?new Ce(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?sn(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?sn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=vS.exec(t))?new Ce(e[1],e[2],e[3],1):(e=hS.exec(t))?new Ce(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=pS.exec(t))?sn(e[1],e[2],e[3],e[4]):(e=mS.exec(t))?sn(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=gS.exec(t))?Wv(e[1],e[2]/100,e[3]/100,1):(e=yS.exec(t))?Wv(e[1],e[2]/100,e[3]/100,e[4]):Hv.hasOwnProperty(t)?Gv(Hv[t]):t==="transparent"?new Ce(NaN,NaN,NaN,0):null}function Gv(t){return new Ce(t>>16&255,t>>8&255,t&255,1)}function sn(t,e,r,n){return n<=0&&(t=e=r=NaN),new Ce(t,e,r,n)}function xS(t){return t instanceof tn||(t=Lt(t)),t?(t=t.rgb(),new Ce(t.r,t.g,t.b,t.opacity)):new Ce}function ps(t,e,r,n){return arguments.length===1?xS(t):new Ce(t,e,r,n??1)}function Ce(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}El(Ce,ps,ig(tn,{brighter(t){return t=t==null?Tn:Math.pow(Tn,t),new Ce(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?zr:Math.pow(zr,t),new Ce(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ce(kt(this.r),kt(this.g),kt(this.b),Nn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Vv,formatHex:Vv,formatHex8:CS,formatRgb:Kv,toString:Kv}));function Vv(){return`#${_t(this.r)}${_t(this.g)}${_t(this.b)}`}function CS(){return`#${_t(this.r)}${_t(this.g)}${_t(this.b)}${_t((isNaN(this.opacity)?1:this.opacity)*255)}`}function Kv(){const t=Nn(this.opacity);return`${t===1?"rgb(":"rgba("}${kt(this.r)}, ${kt(this.g)}, ${kt(this.b)}${t===1?")":`, ${t})`}`}function Nn(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function kt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function _t(t){return t=kt(t),(t<16?"0":"")+t.toString(16)}function Wv(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new De(t,e,r,n)}function og(t){if(t instanceof De)return new De(t.h,t.s,t.l,t.opacity);if(t instanceof tn||(t=Lt(t)),!t)return new De;if(t instanceof De)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,a=Math.min(e,r,n),i=Math.max(e,r,n),o=NaN,u=i-a,s=(i+a)/2;return u?(e===i?o=(r-n)/u+(r<n)*6:r===i?o=(n-e)/u+2:o=(e-r)/u+4,u/=s<.5?i+a:2-i-a,o*=60):u=s>0&&s<1?0:o,new De(o,u,s,t.opacity)}function MS(t,e,r,n){return arguments.length===1?og(t):new De(t,e,r,n??1)}function De(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}El(De,MS,ig(tn,{brighter(t){return t=t==null?Tn:Math.pow(Tn,t),new De(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?zr:Math.pow(zr,t),new De(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,a=2*r-n;return new Ce(Hu(t>=240?t-240:t+120,a,n),Hu(t,a,n),Hu(t<120?t+240:t-120,a,n),this.opacity)},clamp(){return new De(Yv(this.h),ln(this.s),ln(this.l),Nn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Nn(this.opacity);return`${t===1?"hsl(":"hsla("}${Yv(this.h)}, ${ln(this.s)*100}%, ${ln(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Yv(t){return t=(t||0)%360,t<0?t+360:t}function ln(t){return Math.max(0,Math.min(1,t||0))}function Hu(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}var _l=t=>()=>t;function SS(t,e){return function(r){return t+r*e}}function AS(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function IS(t){return(t=+t)==1?ug:function(e,r){return r-e?AS(e,r,t):_l(isNaN(e)?r:e)}}function ug(t,e){var r=e-t;return r?SS(t,r):_l(isNaN(t)?e:t)}var Rn=function t(e){var r=IS(e);function n(a,i){var o=r((a=ps(a)).r,(i=ps(i)).r),u=r(a.g,i.g),s=r(a.b,i.b),l=ug(a.opacity,i.opacity);return function(c){return a.r=o(c),a.g=u(c),a.b=s(c),a.opacity=l(c),a+""}}return n.gamma=t,n}(1);function PS(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=t[a]*(1-i)+e[a]*i;return n}}function ES(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function _S(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,a=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)a[o]=Ol(t[o],e[o]);for(;o<r;++o)i[o]=e[o];return function(u){for(o=0;o<n;++o)i[o]=a[o](u);return i}}function OS(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function Ne(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function kS(t,e){var r={},n={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?r[a]=Ol(t[a],e[a]):n[a]=e[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var ms=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Uu=new RegExp(ms.source,"g");function TS(t){return function(){return t}}function NS(t){return function(e){return t(e)+""}}function sg(t,e){var r=ms.lastIndex=Uu.lastIndex=0,n,a,i,o=-1,u=[],s=[];for(t=t+"",e=e+"";(n=ms.exec(t))&&(a=Uu.exec(e));)(i=a.index)>r&&(i=e.slice(r,i),u[o]?u[o]+=i:u[++o]=i),(n=n[0])===(a=a[0])?u[o]?u[o]+=a:u[++o]=a:(u[++o]=null,s.push({i:o,x:Ne(n,a)})),r=Uu.lastIndex;return r<e.length&&(i=e.slice(r),u[o]?u[o]+=i:u[++o]=i),u.length<2?s[0]?NS(s[0].x):TS(e):(e=s.length,function(l){for(var c=0,d;c<e;++c)u[(d=s[c]).i]=d.x(l);return u.join("")})}function Ol(t,e){var r=typeof e,n;return e==null||r==="boolean"?_l(e):(r==="number"?Ne:r==="string"?(n=Lt(e))?(e=n,Rn):sg:e instanceof Lt?Rn:e instanceof Date?OS:ES(e)?PS:Array.isArray(e)?_S:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?kS:Ne)(t,e)}function RS(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}var Zv=180/Math.PI,gs={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function lg(t,e,r,n,a,i){var o,u,s;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(s=t*r+e*n)&&(r-=t*s,n-=e*s),(u=Math.sqrt(r*r+n*n))&&(r/=u,n/=u,s/=u),t*n<e*r&&(t=-t,e=-e,s=-s,o=-o),{translateX:a,translateY:i,rotate:Math.atan2(e,t)*Zv,skewX:Math.atan(s)*Zv,scaleX:o,scaleY:u}}var cn;function DS(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?gs:lg(e.a,e.b,e.c,e.d,e.e,e.f)}function LS(t){return t==null||(cn||(cn=document.createElementNS("http://www.w3.org/2000/svg","g")),cn.setAttribute("transform",t),!(t=cn.transform.baseVal.consolidate()))?gs:(t=t.matrix,lg(t.a,t.b,t.c,t.d,t.e,t.f))}function cg(t,e,r,n){function a(l){return l.length?l.pop()+" ":""}function i(l,c,d,f,h,p){if(l!==d||c!==f){var m=h.push("translate(",null,e,null,r);p.push({i:m-4,x:Ne(l,d)},{i:m-2,x:Ne(c,f)})}else(d||f)&&h.push("translate("+d+e+f+r)}function o(l,c,d,f){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),f.push({i:d.push(a(d)+"rotate(",null,n)-2,x:Ne(l,c)})):c&&d.push(a(d)+"rotate("+c+n)}function u(l,c,d,f){l!==c?f.push({i:d.push(a(d)+"skewX(",null,n)-2,x:Ne(l,c)}):c&&d.push(a(d)+"skewX("+c+n)}function s(l,c,d,f,h,p){if(l!==d||c!==f){var m=h.push(a(h)+"scale(",null,",",null,")");p.push({i:m-4,x:Ne(l,d)},{i:m-2,x:Ne(c,f)})}else(d!==1||f!==1)&&h.push(a(h)+"scale("+d+","+f+")")}return function(l,c){var d=[],f=[];return l=t(l),c=t(c),i(l.translateX,l.translateY,c.translateX,c.translateY,d,f),o(l.rotate,c.rotate,d,f),u(l.skewX,c.skewX,d,f),s(l.scaleX,l.scaleY,c.scaleX,c.scaleY,d,f),l=c=null,function(h){for(var p=-1,m=f.length,g;++p<m;)d[(g=f[p]).i]=g.x(h);return d.join("")}}}var jS=cg(DS,"px, ","px)","deg)"),qS=cg(LS,", ",")",")"),ar=0,_r=0,wr=0,dg=1e3,Dn,Or,Ln=0,jt=0,la=0,Ur=typeof performance=="object"&&performance.now?performance:Date,fg=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function kl(){return jt||(fg(FS),jt=Ur.now()+la)}function FS(){jt=0}function jn(){this._call=this._time=this._next=null}jn.prototype=vg.prototype={constructor:jn,restart:function(t,e,r){if(typeof t!="function")throw new TypeError("callback is not a function");r=(r==null?kl():+r)+(e==null?0:+e),!this._next&&Or!==this&&(Or?Or._next=this:Dn=this,Or=this),this._call=t,this._time=r,ys()},stop:function(){this._call&&(this._call=null,this._time=1/0,ys())}};function vg(t,e,r){var n=new jn;return n.restart(t,e,r),n}function BS(){kl(),++ar;for(var t=Dn,e;t;)(e=jt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--ar}function Qv(){jt=(Ln=Ur.now())+la,ar=_r=0;try{BS()}finally{ar=0,HS(),jt=0}}function zS(){var t=Ur.now(),e=t-Ln;e>dg&&(la-=e,Ln=t)}function HS(){for(var t,e=Dn,r,n=1/0;e;)e._call?(n>e._time&&(n=e._time),t=e,e=e._next):(r=e._next,e._next=null,e=t?t._next=r:Dn=r);Or=t,ys(n)}function ys(t){if(!ar){_r&&(_r=clearTimeout(_r));var e=t-jt;e>24?(t<1/0&&(_r=setTimeout(Qv,t-Ur.now()-la)),wr&&(wr=clearInterval(wr))):(wr||(Ln=Ur.now(),wr=setInterval(zS,dg)),ar=1,fg(Qv))}}function Xv(t,e,r){var n=new jn;return e=e==null?0:+e,n.restart(a=>{n.stop(),t(a+e)},e,r),n}var US=Vm("start","end","cancel","interrupt"),$S=[],hg=0,Jv=1,bs=2,bn=3,eh=4,ws=5,wn=6;function ca(t,e,r,n,a,i){var o=t.__transition;if(!o)t.__transition={};else if(r in o)return;GS(t,r,{name:e,index:n,group:a,on:US,tween:$S,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:hg})}function Tl(t,e){var r=Be(t,e);if(r.state>hg)throw new Error("too late; already scheduled");return r}function Ye(t,e){var r=Be(t,e);if(r.state>bn)throw new Error("too late; already running");return r}function Be(t,e){var r=t.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function GS(t,e,r){var n=t.__transition,a;n[e]=r,r.timer=vg(i,0,r.time);function i(l){r.state=Jv,r.timer.restart(o,r.delay,r.time),r.delay<=l&&o(l-r.delay)}function o(l){var c,d,f,h;if(r.state!==Jv)return s();for(c in n)if(h=n[c],h.name===r.name){if(h.state===bn)return Xv(o);h.state===eh?(h.state=wn,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete n[c]):+c<e&&(h.state=wn,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete n[c])}if(Xv(function(){r.state===bn&&(r.state=eh,r.timer.restart(u,r.delay,r.time),u(l))}),r.state=bs,r.on.call("start",t,t.__data__,r.index,r.group),r.state===bs){for(r.state=bn,a=new Array(f=r.tween.length),c=0,d=-1;c<f;++c)(h=r.tween[c].value.call(t,t.__data__,r.index,r.group))&&(a[++d]=h);a.length=d+1}}function u(l){for(var c=l<r.duration?r.ease.call(null,l/r.duration):(r.timer.restart(s),r.state=ws,1),d=-1,f=a.length;++d<f;)a[d].call(t,c);r.state===ws&&(r.on.call("end",t,t.__data__,r.index,r.group),s())}function s(){r.state=wn,r.timer.stop(),delete n[e];for(var l in n)return;delete t.__transition}}function VS(t,e){var r=t.__transition,n,a,i=!0,o;if(r){e=e==null?null:e+"";for(o in r){if((n=r[o]).name!==e){i=!1;continue}a=n.state>bs&&n.state<ws,n.state=wn,n.timer.stop(),n.on.call(a?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete r[o]}i&&delete t.__transition}}function KS(t){return this.each(function(){VS(this,t)})}function WS(t,e){var r,n;return function(){var a=Ye(this,t),i=a.tween;if(i!==r){n=r=i;for(var o=0,u=n.length;o<u;++o)if(n[o].name===e){n=n.slice(),n.splice(o,1);break}}a.tween=n}}function YS(t,e,r){var n,a;if(typeof r!="function")throw new Error;return function(){var i=Ye(this,t),o=i.tween;if(o!==n){a=(n=o).slice();for(var u={name:e,value:r},s=0,l=a.length;s<l;++s)if(a[s].name===e){a[s]=u;break}s===l&&a.push(u)}i.tween=a}}function ZS(t,e){var r=this._id;if(t+="",arguments.length<2){for(var n=Be(this.node(),r).tween,a=0,i=n.length,o;a<i;++a)if((o=n[a]).name===t)return o.value;return null}return this.each((e==null?WS:YS)(r,t,e))}function Nl(t,e,r){var n=t._id;return t.each(function(){var a=Ye(this,n);(a.value||(a.value={}))[e]=r.apply(this,arguments)}),function(a){return Be(a,n).value[e]}}function pg(t,e){var r;return(typeof e=="number"?Ne:e instanceof Lt?Rn:(r=Lt(e))?(e=r,Rn):sg)(t,e)}function QS(t){return function(){this.removeAttribute(t)}}function XS(t){return function(){this.removeAttributeNS(t.space,t.local)}}function JS(t,e,r){var n,a=r+"",i;return function(){var o=this.getAttribute(t);return o===a?null:o===n?i:i=e(n=o,r)}}function eA(t,e,r){var n,a=r+"",i;return function(){var o=this.getAttributeNS(t.space,t.local);return o===a?null:o===n?i:i=e(n=o,r)}}function tA(t,e,r){var n,a,i;return function(){var o,u=r(this),s;return u==null?void this.removeAttribute(t):(o=this.getAttribute(t),s=u+"",o===s?null:o===n&&s===a?i:(a=s,i=e(n=o,u)))}}function rA(t,e,r){var n,a,i;return function(){var o,u=r(this),s;return u==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),s=u+"",o===s?null:o===n&&s===a?i:(a=s,i=e(n=o,u)))}}function nA(t,e){var r=sa(t),n=r==="transform"?qS:pg;return this.attrTween(t,typeof e=="function"?(r.local?rA:tA)(r,n,Nl(this,"attr."+t,e)):e==null?(r.local?XS:QS)(r):(r.local?eA:JS)(r,n,e))}function aA(t,e){return function(r){this.setAttribute(t,e.call(this,r))}}function iA(t,e){return function(r){this.setAttributeNS(t.space,t.local,e.call(this,r))}}function oA(t,e){var r,n;function a(){var i=e.apply(this,arguments);return i!==n&&(r=(n=i)&&iA(t,i)),r}return a._value=e,a}function uA(t,e){var r,n;function a(){var i=e.apply(this,arguments);return i!==n&&(r=(n=i)&&aA(t,i)),r}return a._value=e,a}function sA(t,e){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var n=sa(t);return this.tween(r,(n.local?oA:uA)(n,e))}function lA(t,e){return function(){Tl(this,t).delay=+e.apply(this,arguments)}}function cA(t,e){return e=+e,function(){Tl(this,t).delay=e}}function dA(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?lA:cA)(e,t)):Be(this.node(),e).delay}function fA(t,e){return function(){Ye(this,t).duration=+e.apply(this,arguments)}}function vA(t,e){return e=+e,function(){Ye(this,t).duration=e}}function hA(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?fA:vA)(e,t)):Be(this.node(),e).duration}function pA(t,e){if(typeof e!="function")throw new Error;return function(){Ye(this,t).ease=e}}function mA(t){var e=this._id;return arguments.length?this.each(pA(e,t)):Be(this.node(),e).ease}function gA(t,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;Ye(this,t).ease=r}}function yA(t){if(typeof t!="function")throw new Error;return this.each(gA(this._id,t))}function bA(t){typeof t!="function"&&(t=Ym(t));for(var e=this._groups,r=e.length,n=new Array(r),a=0;a<r;++a)for(var i=e[a],o=i.length,u=n[a]=[],s,l=0;l<o;++l)(s=i[l])&&t.call(s,s.__data__,l,i)&&u.push(s);return new rt(n,this._parents,this._name,this._id)}function wA(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,r=t._groups,n=e.length,a=r.length,i=Math.min(n,a),o=new Array(n),u=0;u<i;++u)for(var s=e[u],l=r[u],c=s.length,d=o[u]=new Array(c),f,h=0;h<c;++h)(f=s[h]||l[h])&&(d[h]=f);for(;u<n;++u)o[u]=e[u];return new rt(o,this._parents,this._name,this._id)}function xA(t){return(t+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function CA(t,e,r){var n,a,i=xA(e)?Tl:Ye;return function(){var o=i(this,t),u=o.on;u!==n&&(a=(n=u).copy()).on(e,r),o.on=a}}function MA(t,e){var r=this._id;return arguments.length<2?Be(this.node(),r).on.on(t):this.each(CA(r,t,e))}function SA(t){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==t)return;e&&e.removeChild(this)}}function AA(){return this.on("end.remove",SA(this._id))}function IA(t){var e=this._name,r=this._id;typeof t!="function"&&(t=Il(t));for(var n=this._groups,a=n.length,i=new Array(a),o=0;o<a;++o)for(var u=n[o],s=u.length,l=i[o]=new Array(s),c,d,f=0;f<s;++f)(c=u[f])&&(d=t.call(c,c.__data__,f,u))&&("__data__"in c&&(d.__data__=c.__data__),l[f]=d,ca(l[f],e,r,f,l,Be(c,r)));return new rt(i,this._parents,e,r)}function PA(t){var e=this._name,r=this._id;typeof t!="function"&&(t=Wm(t));for(var n=this._groups,a=n.length,i=[],o=[],u=0;u<a;++u)for(var s=n[u],l=s.length,c,d=0;d<l;++d)if(c=s[d]){for(var f=t.call(c,c.__data__,d,s),h,p=Be(c,r),m=0,g=f.length;m<g;++m)(h=f[m])&&ca(h,e,r,m,f,p);i.push(f),o.push(c)}return new rt(i,o,e,r)}var EA=en.prototype.constructor;function _A(){return new EA(this._groups,this._parents)}function OA(t,e){var r,n,a;return function(){var i=nr(this,t),o=(this.style.removeProperty(t),nr(this,t));return i===o?null:i===r&&o===n?a:a=e(r=i,n=o)}}function mg(t){return function(){this.style.removeProperty(t)}}function kA(t,e,r){var n,a=r+"",i;return function(){var o=nr(this,t);return o===a?null:o===n?i:i=e(n=o,r)}}function TA(t,e,r){var n,a,i;return function(){var o=nr(this,t),u=r(this),s=u+"";return u==null&&(s=u=(this.style.removeProperty(t),nr(this,t))),o===s?null:o===n&&s===a?i:(a=s,i=e(n=o,u))}}function NA(t,e){var r,n,a,i="style."+e,o="end."+i,u;return function(){var s=Ye(this,t),l=s.on,c=s.value[i]==null?u||(u=mg(e)):void 0;(l!==r||a!==c)&&(n=(r=l).copy()).on(o,a=c),s.on=n}}function RA(t,e,r){var n=(t+="")=="transform"?jS:pg;return e==null?this.styleTween(t,OA(t,n)).on("end.style."+t,mg(t)):typeof e=="function"?this.styleTween(t,TA(t,n,Nl(this,"style."+t,e))).each(NA(this._id,t)):this.styleTween(t,kA(t,n,e),r).on("end.style."+t,null)}function DA(t,e,r){return function(n){this.style.setProperty(t,e.call(this,n),r)}}function LA(t,e,r){var n,a;function i(){var o=e.apply(this,arguments);return o!==a&&(n=(a=o)&&DA(t,o,r)),n}return i._value=e,i}function jA(t,e,r){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,LA(t,e,r??""))}function qA(t){return function(){this.textContent=t}}function FA(t){return function(){var e=t(this);this.textContent=e??""}}function BA(t){return this.tween("text",typeof t=="function"?FA(Nl(this,"text",t)):qA(t==null?"":t+""))}function zA(t){return function(e){this.textContent=t.call(this,e)}}function HA(t){var e,r;function n(){var a=t.apply(this,arguments);return a!==r&&(e=(r=a)&&zA(a)),e}return n._value=t,n}function UA(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,HA(t))}function $A(){for(var t=this._name,e=this._id,r=gg(),n=this._groups,a=n.length,i=0;i<a;++i)for(var o=n[i],u=o.length,s,l=0;l<u;++l)if(s=o[l]){var c=Be(s,e);ca(s,t,r,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new rt(n,this._parents,t,r)}function GA(){var t,e,r=this,n=r._id,a=r.size();return new Promise(function(i,o){var u={value:o},s={value:function(){--a===0&&i()}};r.each(function(){var l=Ye(this,n),c=l.on;c!==t&&(e=(t=c).copy(),e._.cancel.push(u),e._.interrupt.push(u),e._.end.push(s)),l.on=e}),a===0&&i()})}var VA=0;function rt(t,e,r,n){this._groups=t,this._parents=e,this._name=r,this._id=n}function gg(){return++VA}var Qe=en.prototype;rt.prototype={constructor:rt,select:IA,selectAll:PA,selectChild:Qe.selectChild,selectChildren:Qe.selectChildren,filter:bA,merge:wA,selection:_A,transition:$A,call:Qe.call,nodes:Qe.nodes,node:Qe.node,size:Qe.size,empty:Qe.empty,each:Qe.each,on:MA,attr:nA,attrTween:sA,style:RA,styleTween:jA,text:BA,textTween:UA,remove:AA,tween:ZS,delay:dA,duration:hA,ease:mA,easeVarying:yA,end:GA,[Symbol.iterator]:Qe[Symbol.iterator]};function KA(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var WA={time:null,delay:0,duration:250,ease:KA};function YA(t,e){for(var r;!(r=t.__transition)||!(r=r[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return r}function ZA(t){var e,r;t instanceof rt?(e=t._id,t=t._name):(e=gg(),(r=WA).time=kl(),t=t==null?null:t+"");for(var n=this._groups,a=n.length,i=0;i<a;++i)for(var o=n[i],u=o.length,s,l=0;l<u;++l)(s=o[l])&&ca(s,t,e,l,o,r||YA(s,e));return new rt(n,this._parents,t,e)}en.prototype.interrupt=KS;en.prototype.transition=ZA;const xs=Math.PI,Cs=2*xs,At=1e-6,QA=Cs-At;function yg(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function XA(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return yg;const r=10**e;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class JA{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?yg:XA(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,a){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(e,r,n,a,i,o){this._append`C${+e},${+r},${+n},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(e,r,n,a,i){if(e=+e,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,u=this._y1,s=n-e,l=a-r,c=o-e,d=u-r,f=c*c+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(f>At)if(!(Math.abs(d*s-l*c)>At)||!i)this._append`L${this._x1=e},${this._y1=r}`;else{let h=n-o,p=a-u,m=s*s+l*l,g=h*h+p*p,b=Math.sqrt(m),w=Math.sqrt(f),M=i*Math.tan((xs-Math.acos((m+f-g)/(2*b*w)))/2),y=M/w,C=M/b;Math.abs(y-1)>At&&this._append`L${e+y*c},${r+y*d}`,this._append`A${i},${i},0,0,${+(d*h>c*p)},${this._x1=e+C*s},${this._y1=r+C*l}`}}arc(e,r,n,a,i,o){if(e=+e,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let u=n*Math.cos(a),s=n*Math.sin(a),l=e+u,c=r+s,d=1^o,f=o?a-i:i-a;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>At||Math.abs(this._y1-c)>At)&&this._append`L${l},${c}`,n&&(f<0&&(f=f%Cs+Cs),f>QA?this._append`A${n},${n},0,1,${d},${e-u},${r-s}A${n},${n},0,1,${d},${this._x1=l},${this._y1=c}`:f>At&&this._append`A${n},${n},0,${+(f>=xs)},${d},${this._x1=e+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(e,r,n,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function e5(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function qn(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function ir(t){return t=qn(Math.abs(t)),t?t[1]:NaN}function t5(t,e){return function(r,n){for(var a=r.length,i=[],o=0,u=t[0],s=0;a>0&&u>0&&(s+u+1>n&&(u=Math.max(1,n-s)),i.push(r.substring(a-=u,a+u)),!((s+=u+1)>n));)u=t[o=(o+1)%t.length];return i.reverse().join(e)}}function r5(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var n5=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Fn(t){if(!(e=n5.exec(t)))throw new Error("invalid format: "+t);var e;return new Rl({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Fn.prototype=Rl.prototype;function Rl(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Rl.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function a5(t){e:for(var e=t.length,r=1,n=-1,a;r<e;++r)switch(t[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(a+1):t}var bg;function i5(t,e){var r=qn(t,e);if(!r)return t+"";var n=r[0],a=r[1],i=a-(bg=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+qn(t,Math.max(0,e+i-1))[0]}function th(t,e){var r=qn(t,e);if(!r)return t+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}var rh={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:e5,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>th(t*100,e),r:th,s:i5,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function nh(t){return t}var ah=Array.prototype.map,ih=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function o5(t){var e=t.grouping===void 0||t.thousands===void 0?nh:t5(ah.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?nh:r5(ah.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",u=t.minus===void 0?"−":t.minus+"",s=t.nan===void 0?"NaN":t.nan+"";function l(d){d=Fn(d);var f=d.fill,h=d.align,p=d.sign,m=d.symbol,g=d.zero,b=d.width,w=d.comma,M=d.precision,y=d.trim,C=d.type;C==="n"?(w=!0,C="g"):rh[C]||(M===void 0&&(M=12),y=!0,C="g"),(g||f==="0"&&h==="=")&&(g=!0,f="0",h="=");var S=m==="$"?r:m==="#"&&/[boxX]/.test(C)?"0"+C.toLowerCase():"",I=m==="$"?n:/[%p]/.test(C)?o:"",_=rh[C],O=/[defgprs%]/.test(C);M=M===void 0?6:/[gprs]/.test(C)?Math.max(1,Math.min(21,M)):Math.max(0,Math.min(20,M));function T(P){var N=S,R=I,D,F,q;if(C==="c")R=_(P)+R,P="";else{P=+P;var B=P<0||1/P<0;if(P=isNaN(P)?s:_(Math.abs(P),M),y&&(P=a5(P)),B&&+P==0&&p!=="+"&&(B=!1),N=(B?p==="("?p:u:p==="-"||p==="("?"":p)+N,R=(C==="s"?ih[8+bg/3]:"")+R+(B&&p==="("?")":""),O){for(D=-1,F=P.length;++D<F;)if(q=P.charCodeAt(D),48>q||q>57){R=(q===46?a+P.slice(D+1):P.slice(D))+R,P=P.slice(0,D);break}}}w&&!g&&(P=e(P,1/0));var $=N.length+P.length+R.length,U=$<b?new Array(b-$+1).join(f):"";switch(w&&g&&(P=e(U+P,U.length?b-R.length:1/0),U=""),h){case"<":P=N+P+R+U;break;case"=":P=N+U+P+R;break;case"^":P=U.slice(0,$=U.length>>1)+N+P+R+U.slice($);break;default:P=U+N+P+R;break}return i(P)}return T.toString=function(){return d+""},T}function c(d,f){var h=l((d=Fn(d),d.type="f",d)),p=Math.max(-8,Math.min(8,Math.floor(ir(f)/3)))*3,m=Math.pow(10,-p),g=ih[8+p/3];return function(b){return h(m*b)+g}}return{format:l,formatPrefix:c}}var dn,Dl,wg;u5({thousands:",",grouping:[3],currency:["$",""]});function u5(t){return dn=o5(t),Dl=dn.format,wg=dn.formatPrefix,dn}function s5(t){return Math.max(0,-ir(Math.abs(t)))}function l5(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ir(e)/3)))*3-ir(Math.abs(t)))}function c5(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,ir(e)-ir(t))+1}function d5(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function f5(t){return function(){return t}}function v5(t){return+t}var oh=[0,1];function Wt(t){return t}function Ms(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:f5(isNaN(e)?NaN:.5)}function h5(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function p5(t,e,r){var n=t[0],a=t[1],i=e[0],o=e[1];return a<n?(n=Ms(a,n),i=r(o,i)):(n=Ms(n,a),i=r(i,o)),function(u){return i(n(u))}}function m5(t,e,r){var n=Math.min(t.length,e.length)-1,a=new Array(n),i=new Array(n),o=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<n;)a[o]=Ms(t[o],t[o+1]),i[o]=r(e[o],e[o+1]);return function(u){var s=gC(t,u,1,n)-1;return i[s](a[s](u))}}function g5(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function y5(){var t=oh,e=oh,r=Ol,n,a,i,o=Wt,u,s,l;function c(){var f=Math.min(t.length,e.length);return o!==Wt&&(o=h5(t[0],t[f-1])),u=f>2?m5:p5,s=l=null,d}function d(f){return f==null||isNaN(f=+f)?i:(s||(s=u(t.map(n),e,r)))(n(o(f)))}return d.invert=function(f){return o(a((l||(l=u(e,t.map(n),Ne)))(f)))},d.domain=function(f){return arguments.length?(t=Array.from(f,v5),c()):t.slice()},d.range=function(f){return arguments.length?(e=Array.from(f),c()):e.slice()},d.rangeRound=function(f){return e=Array.from(f),r=RS,c()},d.clamp=function(f){return arguments.length?(o=f?!0:Wt,c()):o!==Wt},d.interpolate=function(f){return arguments.length?(r=f,c()):r},d.unknown=function(f){return arguments.length?(i=f,d):i},function(f,h){return n=f,a=h,c()}}function b5(){return y5()(Wt,Wt)}function w5(t,e,r,n){var a=CC(t,e,r),i;switch(n=Fn(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(i=l5(a,o))&&(n.precision=i),wg(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=c5(a,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=s5(a))&&(n.precision=i-(n.type==="%")*2);break}}return Dl(n)}function x5(t){var e=t.domain;return t.ticks=function(r){var n=e();return xC(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var a=e();return w5(a[0],a[a.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),a=0,i=n.length-1,o=n[a],u=n[i],s,l,c=10;for(u<o&&(l=o,o=u,u=l,l=a,a=i,i=l);c-- >0;){if(l=fs(o,u,r),l===s)return n[a]=o,n[i]=u,e(n);if(l>0)o=Math.floor(o/l)*l,u=Math.ceil(u/l)*l;else if(l<0)o=Math.ceil(o*l)/l,u=Math.floor(u*l)/l;else break;s=l}return t},t}function Ss(){var t=b5();return t.copy=function(){return g5(t,Ss())},d5.apply(t,arguments),x5(t)}function Gt(t){return function(){return t}}function C5(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new JA(e)}function M5(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function xg(t){this._context=t}xg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Cg(t){return new xg(t)}function S5(t){return t[0]}function A5(t){return t[1]}function I5(t,e){var r=Gt(!0),n=null,a=Cg,i=null,o=C5(u);t=typeof t=="function"?t:t===void 0?S5:Gt(t),e=typeof e=="function"?e:e===void 0?A5:Gt(e);function u(s){var l,c=(s=M5(s)).length,d,f=!1,h;for(n==null&&(i=a(h=o())),l=0;l<=c;++l)!(l<c&&r(d=s[l],l,s))===f&&((f=!f)?i.lineStart():i.lineEnd()),f&&i.point(+t(d,l,s),+e(d,l,s));if(h)return i=null,h+""||null}return u.x=function(s){return arguments.length?(t=typeof s=="function"?s:Gt(+s),u):t},u.y=function(s){return arguments.length?(e=typeof s=="function"?s:Gt(+s),u):e},u.defined=function(s){return arguments.length?(r=typeof s=="function"?s:Gt(!!s),u):r},u.curve=function(s){return arguments.length?(a=s,n!=null&&(i=a(n)),u):a},u.context=function(s){return arguments.length?(s==null?n=i=null:i=a(n=s),u):n},u}function kr(t,e,r){this.k=t,this.x=e,this.y=r}kr.prototype={constructor:kr,scale:function(t){return t===1?this:new kr(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new kr(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};kr.prototype;var ce;(function(t){t.Monomer="monomer",t.Preset="preset",t.Bond="bond",t.AmbiguousMonomer="ambiguousMonomer"})(ce||(ce={}));var $e;(function(t){t.Library="library",t.ChainStart="chainStart",t.ChainMiddle="chainMiddle",t.ChainEnd="chainEnd"})($e||($e={}));var Tt;(function(t){t.nanoMol="nM",t.microMol="μM",t.milliMol="mM"})(Tt||(Tt={}));var uh=z(z(z({},Tt.nanoMol,Math.pow(10,9)),Tt.microMol,Math.pow(10,6)),Tt.milliMol,Math.pow(10,3)),P5={isReady:null,activeTool:"select",editor:void 0,editorLayoutMode:void 0,preview:{type:ce.Monomer,monomer:void 0,style:{}},position:void 0,isContextMenuActive:!1,isMacromoleculesPropertiesWindowOpened:!1,macromoleculesProperties:void 0,unipositiveIonsMeasurementUnit:Tt.milliMol,oligonucleotidesMeasurementUnit:Tt.microMol,unipositiveIonsValue:140,oligonucleotidesValue:200},Rr=na({name:"editor",initialState:P5,reducers:{init:function(e){e.isReady=!1},initSuccess:function(e){e.isReady=!0},initFailure:function(e){e.isReady=!1},selectTool:function(e,r){e.activeTool=r.payload},setPosition:function(e,r){e.position=r.payload},createEditor:function(e,r){var n,a,i=new $n({theme:r.payload.theme,canvas:r.payload.canvas,monomersLibraryUpdate:r.payload.monomersLibraryUpdate});e.editor=i,(n=(a=r.payload).onInit)===null||n===void 0||n.call(a,i)},destroyEditor:function(e){e.editorLayoutMode=e.editor.mode.modeName,e.editor.switchToMicromolecules(),e.editor=void 0},showPreview:function(e,r){e.preview=r.payload||{monomer:void 0,style:""}},setContextMenuActive:function(e,r){e.isContextMenuActive=r.payload},setMacromoleculesPropertiesWindowVisibility:function(e,r){e.isMacromoleculesPropertiesWindowOpened=r.payload},toggleMacromoleculesPropertiesWindowVisibility:function(e){e.isMacromoleculesPropertiesWindowOpened=!e.isMacromoleculesPropertiesWindowOpened},setMacromoleculesProperties:function(e,r){e.macromoleculesProperties=r.payload},setUnipositiveIonsMeasurementUnit:function(e,r){e.unipositiveIonsMeasurementUnit=r.payload},setOligonucleotidesMeasurementUnit:function(e,r){e.oligonucleotidesMeasurementUnit=r.payload},setUnipositiveIonsValue:function(e,r){e.unipositiveIonsValue=r.payload},setOligonucleotidesValue:function(e,r){e.oligonucleotidesValue=r.payload}}}),he=Rr.actions,E5=he.init,_5=he.initSuccess,O5=he.initFailure,ct=he.selectTool;he.setPosition;var k5=he.createEditor,T5=he.destroyEditor,or=he.showPreview,Mg=he.setContextMenuActive,N5=he.setMacromoleculesPropertiesWindowVisibility,Sg=he.toggleMacromoleculesPropertiesWindowVisibility,$u=he.setMacromoleculesProperties,R5=he.setUnipositiveIonsMeasurementUnit,D5=he.setOligonucleotidesMeasurementUnit,L5=he.setUnipositiveIonsValue,j5=he.setOligonucleotidesValue,rn=function(e){return e.editor.preview},da=function(e){return e.editor.activeTool},q5=function(e){return e.editor.position},re=function(e){return e.editor.editor},Ze=function(e){var r;return(r=e.editor.editor)===null||r===void 0?void 0:r.isSequenceEditInRNABuilderMode},F5=function(e){return e.editor.editorLayoutMode},B5=function(e){var r;return(r=e.editor.editor)===null||r===void 0?void 0:r.isHandToolSelected},Ag=function(e){var r;return(r=e.editor.editor)===null||r===void 0||(r=r.drawingEntitiesManager)===null||r===void 0?void 0:r.hasAntisenseChains},z5=function(e){return e.editor.isContextMenuActive},Ig=function(e){return e.editor.isMacromoleculesPropertiesWindowOpened},H5=function(e){return e.editor.macromoleculesProperties},Ll=function(e){return e.editor.unipositiveIonsMeasurementUnit},jl=function(e){return e.editor.oligonucleotidesMeasurementUnit},ql=function(e){return e.editor.unipositiveIonsValue},Fl=function(e){return e.editor.oligonucleotidesValue},U5=Rr.reducer,$5=Se.mark(Pg),G5=Se.mark(Eg),V5="editor/fetchData",K5=function(){return new Promise(function(e){setTimeout(function(){return e("some data")},1e3)})};function Pg(){return Se.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ju(E5(Rr));case 2:return e.prev=2,e.next=5,Ix(K5);case 5:return e.next=7,ju(_5(Rr));case 7:e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(2),qr.error("editorSaga.ts::fetchData",e.t0),e.next=14,ju(O5(Rr));case 14:case"end":return e.stop()}},$5,null,[[2,9]])}function Eg(){return Se.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kx(V5,Pg);case 2:case"end":return e.stop()}},G5)}var _g="FAVORITES",W5="PEPTIDE",Dr={PEPTIDE:"PEPTIDE",CHEM:"CHEM",RNA:"RNA"},G;(function(t){t.SUGARS="Sugars",t.BASES="Bases",t.PHOSPHATES="Phosphates",t.PEPTIDES="Amino acids",t.NUCLEOTIDES="Nucleotides"})(G||(G={}));var sh;(function(t){t.R="R",t.A="A",t.C="C",t.G="G",t.T="T",t.U="U",t.X="X",t.P="P"})(sh||(sh={}));var Gu={R:G.SUGARS,A:G.BASES,C:G.BASES,G:G.BASES,T:G.BASES,U:G.BASES,X:G.BASES,P:G.PHOSPHATES},ft="favoriteItemsUniqueKeys",ur="ketcher_custom_presets",lh="Z",Y5="No natural analogue",ch="thymine",dh="uracil",$r={PEPTIDES:1,RNA:2},Bl="★",Z5=function(){function t(){Op(this,t),this.localStorage=window.localStorage}return Ap(t,[{key:"getItem",value:function(r){var n=this.localStorage.getItem(r);return n?JSON.parse(n):null}},{key:"setItem",value:function(r,n){this.localStorage.setItem(r,JSON.stringify(n))}},{key:"removeItem",value:function(r){this.localStorage.removeItem(r)}}]),t}(),Me=new Z5;function fh(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function we(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?fh(Object(r),!0).forEach(function(n){z(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fh(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Q5=z(z({},pt.PEPTIDES,et.AminoAcid),pt.BASES,et.Base),X5={monomers:[],favorites:{},searchFilter:"",selectedTabIndex:$r.RNA};function Le(t){var e;return xe(t)?t.id||t.label:"".concat(t.props.MonomerName,"___").concat((e=t.props)===null||e===void 0?void 0:e.Name)}function J5(t){var e,r,n;return"".concat(t.name,"_").concat(((e=t.base)===null||e===void 0?void 0:e.label)||".","_").concat(((r=t.sugar)===null||r===void 0?void 0:r.label)||".","_").concat(((n=t.phosphate)===null||n===void 0?void 0:n.label)||".")}var Og=na({name:"library",initialState:X5,reducers:{loadMonomerLibrary:function(e,r){var n=r.payload.map(function(a){return we(we({},a),{},{props:we({},a.props)})});e.monomers=n},setFavoriteMonomersFromLocalStorage:function(e){var r={},n=Me.getItem(ft);!n||!Array.isArray(n)||(e.monomers.forEach(function(a){var i=Le(a),o=n.find(function(u){return u===i});o&&(r[i]=we(we({},a),{},{favorite:!0}))}),e.favorites=r)},clearFavorites:function(e){e.favorites={}},toggleMonomerFavorites:function(e,r){var n=Le(r.payload),a=Me.getItem(ft)||[];e.favorites[n]?(delete e.favorites[n],Me.setItem(ft,a.filter(function(i){return i!==n}))):(e.favorites[n]=we(we({},r.payload),{},{favorite:!0}),a.push(n),Me.setItem(ft,a))},setSearchFilter:function(e,r){e.searchFilter=r.payload},setSelectedTabIndex:function(e,r){e.selectedTabIndex=r.payload}}}),kg=function(e,r){return e.filter(function(n){var a;return!n.isAmbiguous&&((a=n.props)===null||a===void 0?void 0:a.MonomerType)===r})},Gr=function(e,r){var n=e.filter(function(o){if(!xe(o))return!1;var u=new We(o,void 0,!1);return Q5[r]===u.monomerClass});if(n.length===0)return[];var a=[];r===pt.BASES?a=[{groupTitle:"Ambiguous DNA Bases",groupItems:n.filter(function(o){return xe(o)&&o.options.find(function(u){return u.templateId.toLowerCase().includes(ch)})})},{groupTitle:"Ambiguous RNA Bases",groupItems:n.filter(function(o){return xe(o)&&o.options.find(function(u){return u.templateId.toLowerCase().includes(dh)})})},{groupTitle:"Ambiguous Bases",groupItems:n.filter(function(o){return xe(o)&&o.options.every(function(u){return!u.templateId.toLowerCase().includes(ch)&&!u.templateId.toLowerCase().includes(dh)})})}]:a.push({groupTitle:"Ambiguous ".concat(r),groupItems:n});var i=["X","N"];return a.forEach(function(o){o.groupItems.sort(function(u,s){return u.label.localeCompare(s.label)}),o.groupItems.sort(function(u){return i.includes(u.label)?-1:1})}),a},e4=function(e){return e.filter(function(r){var n,a;return!r.isAmbiguous&&(((n=r.props)===null||n===void 0?void 0:n.MonomerClass)===et.RNA||((a=r.props)===null||a===void 0?void 0:a.MonomerClass)===et.DNA)})},t4=function(e){return e.filter(function(r){return r.favorite&&!r.isAmbiguous})},r4=function(e){var r=[];for(var n in pt){var a=Gr(e,pt[n]);r=[].concat(ue(r),ue(a))}return r.forEach(function(i){i.groupItems=i.groupItems.filter(function(o){return o.favorite})}),r.filter(function(i){return i.groupItems.length})},fa=k1(function(t){return t.library},function(t){var e=t.searchFilter,r=t.monomers,n=t.favorites,a=e.toLowerCase(),i=function(){var u,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",c=arguments.length>2?arguments[2]:void 0,d=arguments.length>3?arguments[3]:void 0,f=s.toLowerCase(),h=l.toLowerCase(),p=c==null||(u=c.base)===null||u===void 0?void 0:u.toLowerCase(),m=c!=null&&c.modifications?Object.values(c.modifications).map(function(D){return D.toLowerCase()}).join(" "):"";if(d==="/")return!!(p||m);if(d.includes("/")){var g=d.split("/");if(g.length>3||g.length===3&&g[2]!=="")return!1;if(g.length===3&&g[1]!==""){var b=g[1],w=p&&p.length===b.length&&Array.from(p).every(function(D,F){return D===b[F]}),M=m?m.split(" ").some(function(D){return D.length===b.length&&Array.from(D).every(function(F,q){return F===b[q]})}):!1;return w||M}var y=g[0],C=g[1];if(d.startsWith("/")&&d.length>1){var S=d.slice(1);return p&&p.startsWith(S)||m&&m.split(" ").some(function(D){return D.startsWith(S)})}if(d.endsWith("/")&&d.length>1){var I=d.slice(0,-1),_=d[d.length-2];return p&&p.endsWith(I)&&p[p.length-1]===_||m&&m.split(" ").some(function(D){return D.endsWith(I)&&D[D.length-1]===_})}var O=p&&p.startsWith(C)&&p.endsWith(y),T=m?m.split(" ").some(function(D){return D.startsWith(C)&&D.endsWith(y)}):!1;return O||T}var P=p?p.includes(d):!1,N=m?m.includes(d):!1,R=f.includes(d)||h.includes(d)||P||N;return R};return r.filter(function(o){if(o.isAmbiguous){var u=o.label,s=o.id,l=o.idtAliases,c=o.monomers,d=i(u,s,l,a);return d||c.some(function(g){var b=g.monomerItem.props,w=b.Name,M=b.MonomerName,y=b.idtAliases;return i(w,M,y,a)})}else{var f=o.props,h=f.Name,p=f.MonomerName,m=f.idtAliases;return i(h,p,m,a)}}).map(function(o){return we(we({},o),{},{favorite:!!n[Le(o)]})})}),As=function(e){var r=e.reduce(function(i,o){var u=o.props.MonomerNaturalAnalogCode||lh;return i[u]||(i[u]=[]),i[u].push(we(we({},o),{},{label:o.props.MonomerName})),i},{}),n=Object.entries(r).reduce(function(i,o){var u=L(o,2),s=u[0],l=u[1],c=l.sort(function(h,p){return h.label.localeCompare(p.label)}),d=c.findIndex(function(h){return h.label===s});if(d!==-1){var f=c.splice(d,1);c.unshift(f[0])}return i[s]=c,i},{}),a=[];return Object.keys(n).sort(function(i,o){return i.localeCompare(o)}).reduce(function(i,o){var u={groupTitle:o===lh?Y5:o,groupItems:[]};return n[o].forEach(function(s){u.groupItems.push(we(we({},s),{},{props:we({},s.props)}))}),u.groupItems.length&&i.push(u),i},a)},Tg=function(e){return e.library.selectedTabIndex},hr=Og.actions,Is=hr.loadMonomerLibrary,n4=hr.setFavoriteMonomersFromLocalStorage;hr.clearFavorites;var a4=hr.toggleMonomerFavorites,vh=hr.setSearchFilter,Vr=hr.setSelectedTabIndex,i4=Og.reducer,o4=Se.mark(Ng);function Ng(){return Se.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Px(Eg);case 2:case"end":return e.stop()}},o4)}var u4={name:null,isOpen:!1,additionalProps:null,errorTooltipText:"",errorModalText:"",errorModalTitle:""},Rg=na({name:"modal",initialState:u4,reducers:{openModal:function(e,r){typeof r.payload=="string"?e.name=r.payload:(e.name=r.payload.name,e.additionalProps=r.payload.additionalProps),e.isOpen=!0},closeModal:function(e){e.name=null,e.isOpen=!1,e.additionalProps=null},openErrorTooltip:function(e,r){e.errorTooltipText=r.payload},closeErrorTooltip:function(e){e.errorTooltipText=""},openErrorModal:function(e,r){if(typeof r.payload=="string")e.errorModalText=r.payload;else{var n=r.payload,a=n.errorMessage,i=n.errorTitle;e.errorModalText=a,e.errorModalTitle=i}},closeErrorModal:function(e){e.errorModalText=""}}}),pr=Rg.actions,Jt=pr.openModal,s4=pr.closeModal,hh=pr.openErrorTooltip,l4=pr.closeErrorTooltip,Kr=pr.openErrorModal,c4=pr.closeErrorModal,d4=function(e){return e.modal.name},f4=function(e){return e.modal.isOpen},v4=function(e){return e.modal.additionalProps},h4=function(e){return e.modal.errorTooltipText},p4=function(e){return e.modal.errorModalText},m4=function(e){return e.modal.errorModalTitle},g4=Rg.reducer;function ph(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function y4(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ph(Object(r),!0).forEach(function(n){z(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ph(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var sr=function(){return Me.getItem(ur)},zl=function(e){var r,n=sr();return(r=n?.findIndex(function(a){return a.name===e}))!==null&&r!==void 0?r:-1},Dg=function(e){var r=y4({},e),n=sr()||[],a=zl(r.nameInList);r.nameInList=r.name,a>-1?(n.splice(a,1,r),Me.setItem(ur,n)):Me.setItem(ur,[].concat(ue(n),[r]))},b4=function(e){if(e){var r=sr(),n=zl(e);r&&(r.splice(n,1),r.length?Me.setItem(ur,r):Me.removeItem(ur))}},w4=function(e){if(e){var r=sr(),n=zl(e);r&&n>-1&&(r[n].favorite=!r[n].favorite,Me.setItem(ur,r))}},x4=function(e){var r=["sugar","base","phosphate"],n=Eb(e,r);n.templates=[];for(var a=0,i=r;a<i.length;a++){var o,u=i[a],s=e[u],l=(s==null||(o=s.props)===null||o===void 0?void 0:o.id)||s?.id;l&&n.templates.push({$ref:s.isAmbiguous?Ip(l):Pp(l)})}return n},C4=function(e,r){var n,a,i=[],o=[],u=[];return!r||!(e!=null&&e.sugar)&&!(e!=null&&e.phosphate)&&!(e!=null&&e.base)?{sugarValidations:i,phosphateValidations:o,baseValidations:u}:(e!=null&&e.phosphate&&i.push("R2"),e!=null&&e.base&&i.push("R3"),u.push("R1"),e!=null&&(n=e.sugar)!==null&&n!==void 0&&(n=n.props)!==null&&n!==void 0&&n.MonomerCaps&&!("R3"in e.sugar.props.MonomerCaps)&&u.push("DISABLED"),o.push("R1"),e!=null&&(a=e.sugar)!==null&&a!==void 0&&(a=a.props)!==null&&a!==void 0&&a.MonomerCaps&&!("R2"in e.sugar.props.MonomerCaps)&&o.push("DISABLED"),{sugarValidations:i,phosphateValidations:o,baseValidations:u})};function mh(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function xr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mh(Object(r),!0).forEach(function(n){z(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mh(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var me;(function(t){t.Presets="Presets"})(me||(me={}));var M4={activePreset:null,sequenceSelection:void 0,sequenceSelectionName:void 0,isSequenceFirstsOnlyNucleoelementsSelected:void 0,activePresetMonomerGroup:null,groupItemValidations:z(z(z({},G.BASES,[]),G.SUGARS,[]),G.PHOSPHATES,[]),presetsDefault:[],presetsCustom:[],activeRnaBuilderItem:null,activeMonomerKey:null,isEditMode:!1,uniqueNameError:"",invalidPresetError:"",activePresetForContextMenu:null},Pt=z(z(z({},G.BASES,"base"),G.SUGARS,"sugar"),G.PHOSPHATES,"phosphate"),Lg=na({name:"rna-builder",initialState:M4,reducers:{createNewPreset:function(e){e.activePreset={base:void 0,sugar:void 0,phosphate:void 0,name:"",nameInList:""}},setActivePreset:function(e,r){e.activePreset=xr(xr({},r.payload),{},{nameInList:r.payload.name})},setSequenceSelection:function(e,r){e.sequenceSelection=ue(r.payload)},setSequenceSelectionName:function(e,r){e.sequenceSelectionName=r.payload},setIsSequenceFirstsOnlyNucleoelementsSelected:function(e,r){e.isSequenceFirstsOnlyNucleoelementsSelected=r.payload},setActivePresetForContextMenu:function(e,r){e.activePresetForContextMenu=r.payload},setActivePresetName:function(e,r){e.activePreset.name=r.payload},setActiveRnaBuilderItem:function(e,r){e.activeRnaBuilderItem=r.payload},recalculateRnaBuilderValidations:function(e,r){var n=C4(r.payload.rnaPreset,r.payload.isEditMode),a=n.sugarValidations,i=n.phosphateValidations,o=n.baseValidations;e.groupItemValidations[G.SUGARS]=a,e.groupItemValidations[G.BASES]=o,e.groupItemValidations[G.PHOSPHATES]=i},setActivePresetMonomerGroup:function(e,r){e.activePresetMonomerGroup=r.payload},savePreset:function(e,r){var n=r.payload,a=xr({},n);if(Dg(x4(a)),a.nameInList){var i=e.presetsCustom.findIndex(function(o){return o.name===a.nameInList});a.nameInList=a.name,i===-1?e.presetsCustom.push(a):e.presetsCustom.splice(i,1,a)}else e.presetsCustom.push(a);e.activePreset&&(e.activePreset.nameInList=a.name)},deletePreset:function(e,r){var n=r.payload;b4(n.name);var a=e.presetsCustom.findIndex(function(i){return i.name===n.name});e.presetsCustom.splice(a,1),n.nameInList&&(e.activePreset=null)},setIsEditMode:function(e,r){e.isEditMode=r.payload},setUniqueNameError:function(e,r){e.uniqueNameError=r.payload},setInvalidPresetError:function(e,r){e.invalidPresetError=r.payload},setDefaultPresets:function(e,r){var n=r.payload[0];if(n){var a=e.presetsDefault.find(function(i){return i.name===n.name});a||(e.presetsDefault=r.payload)}},setCustomPresets:function(e,r){e.presetsCustom=r.payload},setFavoritePresetsFromLocalStorage:function(e){var r=Me.getItem(ft);!r||!Array.isArray(r)||(e.presetsDefault=e.presetsDefault.map(function(n){var a="".concat(n.name,"_").concat(nc.RNA),i=r.find(function(o){return o===a});return i?xr(xr({},n),{},{favorite:!0}):n}))},clearFavorites:function(e){e.presetsDefault=[]},setActiveMonomerKey:function(e,r){e.activeMonomerKey=r.payload},togglePresetFavorites:function(e,r){var n=e.presetsDefault.findIndex(function(c){return c.name===r.payload.name}),a=e.presetsCustom.findIndex(function(c){return c.name===r.payload.name});if(n>=0){var i=e.presetsDefault[n].favorite;e.presetsDefault[n].favorite=!i}else if(a>=0){w4(e.presetsCustom[a].name);var o=e.presetsCustom[a].favorite;e.presetsCustom[a].favorite=!o;return}var u="".concat(r.payload.name,"_").concat(nc.RNA),s=Me.getItem(ft)||[],l=s.some(function(c){return c===u});l?Me.setItem(ft,s.filter(function(c){return c!==u})):(s.push(u),Me.setItem(ft,s))}}}),jg=function(e){return e.rnaBuilder.activeRnaBuilderItem},S4=function(e){return e.rnaBuilder.groupItemValidations},va=function(e){return e.rnaBuilder.activePreset},qg=function(e){return e.rnaBuilder.sequenceSelection},A4=function(e){return e.rnaBuilder.sequenceSelectionName},I4=function(e){return e.rnaBuilder.isSequenceFirstsOnlyNucleoelementsSelected},Vu=function(e,r){if(!(!Pt[r]||!e))return e[Pt[r]]},P4=function(e){return e.rnaBuilder.activePresetMonomerGroup},gh=function(e){return!!(e.name&&e.sugar&&(e.base||e.phosphate))},mr=function(e){return e.rnaBuilder.isEditMode},Fg=function(e){var r,n,a,i,o,u;if(!e)return"";var s=((r=e.sugar)===null||r===void 0?void 0:r.label)||((n=e.sugar)===null||n===void 0?void 0:n.props.MonomerName)||"",l=((a=e.base)===null||a===void 0?void 0:a.label)||((i=e.base)===null||i===void 0?void 0:i.props.MonomerName)||"",c=((o=e.phosphate)===null||o===void 0?void 0:o.label)||((u=e.phosphate)===null||u===void 0?void 0:u.props.MonomerName)||"",d=s;return s&&c||(s||c)&&l?d+="(".concat(l,")"):d+=l,d+=c,d},E4=function(e){return e.rnaBuilder.uniqueNameError},_4=function(e){return e.rnaBuilder.invalidPresetError},Hl=function(e){var r=e.rnaBuilder.activePreset;return r&&!r.nameInList&&!r.name&&!r.sugar&&!r.base&&!r.phosphate},Bg=function(e){return e.rnaBuilder.activePresetForContextMenu},O4=function(e){return e.filter(function(r){return r.favorite})},zg=function(e){return e.rnaBuilder.activeMonomerKey},ha=function(e){var r=e.rnaBuilder,n=r.presetsDefault,a=n===void 0?[]:n,i=r.presetsCustom,o=i===void 0?[]:i;return[].concat(ue(a),ue(o))},pa=function(e){var r,n=e.library.searchFilter,a=ha(e),i=(r=q5(e))!==null&&r!==void 0?r:br.Library,o=n.toLowerCase();return a.filter(function(u){var s,l,c,d,f,h,p,m,g=(s=u.name)===null||s===void 0?void 0:s.toLowerCase(),b=(l=u.sugar)===null||l===void 0||(l=l.label)===null||l===void 0?void 0:l.toLowerCase(),w=(c=u.phosphate)===null||c===void 0||(c=c.label)===null||c===void 0?void 0:c.toLowerCase(),M=(d=u.base)===null||d===void 0||(d=d.label)===null||d===void 0?void 0:d.toLowerCase(),y=(f=u.idtAliases)===null||f===void 0||(f=f.base)===null||f===void 0?void 0:f.toLowerCase(),C=(h=u.idtAliases)===null||h===void 0?void 0:h.modifications,S=y;if((p=u.name)!==null&&p!==void 0&&p.includes("MOE")&&y){var I,_,O,T=y,P=(I=C?.endpoint5)!==null&&I!==void 0?I:"5".concat(T),N=(_=C?.internal)!==null&&_!==void 0?_:"i".concat(T),R=(O=C?.endpoint3)!==null&&O!==void 0?O:"3".concat(T);switch(i){case br.Library:S="".concat(P,", ").concat(N);break;case br.ChainStart:S=P;break;case br.ChainMiddle:S=N;break;case br.ChainEnd:S=R;break}}var D=(o.match(/\//g)||[]).length,F=o.split("/");if(D>=2&&F[2]!==void 0&&F[2]!=="")return!1;if(o.startsWith("/")&&o.length>1){var q,B=o.slice(1);return((q=S)===null||q===void 0?void 0:q.toLowerCase().startsWith(B))||y?.startsWith(B)||C&&Object.values(C).some(function(ne){return ne?.toLowerCase().startsWith(B)})}if(o.endsWith("/")&&o.length>1){var $,U=o.slice(0,-1),de=o[o.length-2];return(($=S)===null||$===void 0?void 0:$.toLowerCase().endsWith(U))&&S[S.length-1]===de||y?.endsWith(U)&&y[y.length-1]===de||C&&Object.values(C).some(function(ne){return ne?.toLowerCase().endsWith(U)&&ne[ne.length-1]===de})}if(o==="/")return!!u.idtAliases;var ke=g?.includes(o)||b?.includes(o)||w?.includes(o)||M?.includes(o)||((m=S)===null||m===void 0?void 0:m.toLowerCase().includes(o));return ke})},ie=Lg.actions,Wr=ie.setActivePreset,Ul=ie.setSequenceSelection,Hg=ie.setSequenceSelectionName,k4=ie.setIsSequenceFirstsOnlyNucleoelementsSelected;ie.setActivePresetName;var Nt=ie.setActiveRnaBuilderItem,Ug=ie.setActiveMonomerKey,$l=ie.recalculateRnaBuilderValidations,$g=ie.setActivePresetMonomerGroup,T4=ie.savePreset,N4=ie.deletePreset,Gl=ie.createNewPreset,nt=ie.setIsEditMode,Vl=ie.setUniqueNameError,Gg=ie.setInvalidPresetError,R4=ie.setDefaultPresets,D4=ie.setCustomPresets,L4=ie.setActivePresetForContextMenu,j4=ie.togglePresetFavorites,q4=ie.setFavoritePresetsFromLocalStorage,F4=ie.clearFavorites,B4=Lg.reducer;function z4(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=dC(),r=jw({reducer:{editor:U5,modal:g4,library:i4,rnaBuilder:B4},middleware:function(a){return a({thunk:!1,serializableCheck:!1}).concat(e)},preloadedState:t});return e.run(Ng),r}var H4=z4(),X={colorA:{regular:"#CCCBD6",hover:"#B8BBCC"},colorCM:{regular:"#FFE34C",hover:"#FFD700"},colorDQ:{regular:"#AD4551",hover:"#AB0014"},colorEN:{regular:"#93F5F5",hover:"#00F0F0"},colorFY:{regular:"#5656BF",hover:"#2626BF"},colorGX:{regular:"#E1E6ED",hover:"#CAD3E0"},colorH:{regular:"#BFC9FF",hover:"#99AAFF"},colorILV:{regular:"#50E576",hover:"#00D936"},colorKR:{regular:"#365CFF",hover:"#002CEB"},colorP:{regular:"#F2C5B6",hover:"#FFA98C"},colorST:{regular:"#FFC44C",hover:"#FFAA00"},colorW:{regular:"#99458B",hover:"#7F006B"},colorU:{regular:"#99458B",hover:"#7F006B"},chem:{regular:"#333333",hover:"#555555"},default:{regular:"#CCCBD6",hover:"#B8BBCC"}},ae={D:{regular:"#FF8C69",hover:"#0097A8"},E:{regular:"#DC143C",hover:"#0097A8"},K:{regular:"#B0E0E6",hover:"#0097A8"},H:{regular:"#007FFF",hover:"#0097A8"},O:{regular:"#2A52BE",hover:"#0097A8"},R:{regular:"#0A12FF",hover:"#0097A8"},Q:{regular:"#EDB4ED",hover:"#0097A8"},Y:{regular:"#D65CBC",hover:"#0097A8"},U:{regular:"#CA7DE3",hover:"#0097A8"},S:{regular:"#9966CC",hover:"#0097A8"},C:{regular:"#BF00FF",hover:"#0097A8"},N:{regular:"#800080",hover:"#0097A8"},T:{regular:"#FF00FF",hover:"#0097A8"},L:{regular:"#7FFF00",hover:"#0097A8"},I:{regular:"#4CBB17",hover:"#0097A8"},F:{regular:"#008A00",hover:"#0097A8"},A:{regular:"#008080",hover:"#0097A8"},P:{regular:"#D2D900",hover:"#0097A8"},G:{regular:"#BDB76B",hover:"#0097A8"},M:{regular:"#FFF600",hover:"#0097A8"},V:{regular:"#FFD700",hover:"#0097A8"}},yh={color:{background:{canvas:"#F5F5F5",primary:"#FFFFFF",secondary:"#F8FEFF",overlay:"rgba(94,94,94,.8)"},border:{primary:"#CAD3DD",secondary:"#7C7C7F"},text:{primary:"#333333",secondary:"#167782",light:"#585858",dark:"#000000",error:"#FF4A4A",lightgrey:"#7C7C7F"},tab:{regular:"#FFFFFF",active:"#E1E5EA",hover:"#00838F",content:"#EFF2F5"},scroll:{regular:"#717171",inactive:"#DDDDDD"},button:{primary:{active:"#167782",hover:"#00838F",clicked:"#4FB3BF",disabled:"rgba(113, 113, 113, 0.4)"},secondary:{active:"#585858",hover:"#333333",clicked:"#AEAEAE",disabled:"rgba(113, 113, 113, 0.4)"},group:{active:"#167782",hover:"#2E858F"},transparent:{active:"transparent"},text:{primary:"#FFFFFF",secondary:"#005662",disabled:"#7A7A7A"}},dropdown:{primary:"#333333",secondary:"#FFFFFF",hover:"#DDDDDD",disabled:"#7A7A7A"},tooltip:{background:"#FFFFFF",text:"#333333"},link:{active:"#00838F",hover:"#005662"},divider:"#AEAEAE",spinner:"#005662",error:"#FF4A4A",input:{text:{default:"#585858",active:"#333333",disabled:"#585858",error:"#FF4A4A"},background:{primary:"#FFFFFF",default:"#EFF2F5",hover:"#DDDDDD",disabled:"#eff2f5"},border:{regular:"#cad3dd",active:"#FFFFFF",hover:"#43b5c0",focus:"#EFF2F5",error:"#FF4A4A"}},icon:{grey:"#B4B9D6",hover:"#005662",active:"#525252",activeMenu:"#005662",clicked:"#FFFFFF",disabled:"rgba(82, 82, 82, 0.4)"},monomer:{default:"#C8C8C8"},editMode:{sequenceInRNABuilder:"#99d7dc"}},font:{size:{small:"10px",regular:"12px",medium:"14px",xsmall:"6px"},family:{montserrat:"Montserrat, sans-serif",inter:`Inter, FreeSans, Arimo, 'Droid Sans', Helvetica, 'Helvetica Neue',
Arial, sans-serif`,roboto:"Roboto, FreeSans, Arimo, Droid Sans, Helvetica, Helvetica Neue, Arial, sans-serif"},weight:{light:300,regular:400,bold:600}},monomer:{color:{A:X.colorA,C:X.colorCM,M:X.colorCM,D:X.colorDQ,Q:X.colorDQ,E:X.colorEN,N:X.colorEN,F:X.colorFY,Y:X.colorFY,G:X.colorGX,X:X.colorGX,H:X.colorH,I:X.colorILV,L:X.colorILV,V:X.colorILV,K:X.colorKR,R:X.colorKR,P:X.colorP,S:X.colorST,T:X.colorST,W:X.colorW,U:X.colorU,CHEM:X.chem,default:X.default}},peptide:{color:{D:ae.D,E:ae.E,K:ae.K,H:ae.H,O:ae.O,R:ae.R,Q:ae.Q,Y:ae.Y,U:ae.U,S:ae.S,C:ae.C,N:ae.N,T:ae.T,L:ae.L,I:ae.I,F:ae.F,A:ae.A,P:ae.P,G:ae.G,M:ae.M,V:ae.V}},border:{regular:"1px solid #CAD3DD",small:"1px solid #E1E5EA",radius:{regular:"4px"}},shadow:{regular:"0px 1px 1px rgba(197, 203, 207, 0.7)",mainLayoutBlocks:"0px 2px 5px rgba(103, 104, 132, 0.15)"},outline:{small:"1px solid #B4B9D6",medium:"2px solid #B4B9D6",color:"#B4B9D6",selected:{color:"#167782",small:"1px solid #167782",medium:"2px solid #167782"},grey:{small:"1px solid #585858"}},transition:{regular:"all .3s"},zIndex:{base:0,sticky:100,overlay:200,modal:1e3,critical:9999}},U4={},$4=function(e){return Tp({all:"unset",".Ketcher-polymer-editor-root":{all:"unset",fontSize:e.ketcher.font.size.medium,fontFamily:e.ketcher.font.family.inter,fontWeight:e.ketcher.font.weight.regular,backgroundColor:e.ketcher.color.background.primary,color:e.ketcher.color.text.primary,boxSizing:"border-box"},":where(.Ketcher-polymer-editor-root) div":{boxSizing:"border-box"},":where(.Ketcher-polymer-editor-root) input":{fontFamily:e.ketcher.font.family.inter,fontWeight:e.ketcher.font.weight.regular,fontSize:e.ketcher.font.size.regular,boxSizing:"border-box"},":where(.Ketcher-polymer-editor-root) h1":{fontSize:96},":where(.Ketcher-polymer-editor-root) h2":{fontSize:60},":where(.Ketcher-polymer-editor-root) h3":{fontSize:48},":where(.Ketcher-polymer-editor-root) h4":{fontSize:34},":where(.Ketcher-polymer-editor-root) h5":{fontSize:24},":where(.Ketcher-polymer-editor-root) h6":{fontSize:20,fontWeight:e.ketcher.font.weight.bold},":where(.Ketcher-polymer-editor-root) p":{fontSize:e.ketcher.font.size.regular},":where(.Ketcher-polymer-editor-root) button":{textTransform:"uppercase",fontWeight:e.ketcher.font.weight.bold}},"","")},Vg="254px",G4=x("div",{target:"e1vkl5kv5"})("width:",Vg,";height:calc(100% - 16px);display:flex;flex-direction:column;background-color:",function(t){return t.theme.ketcher.color.background.primary},";box-shadow:",function(t){var e=t.theme;return e.ketcher.shadow.mainLayoutBlocks},";border-radius:4px;"),V4=x("div",{target:"e1vkl5kv4"})({name:"n1y6qf",styles:"padding:10px 0 10px 8px;position:relative;display:flex;align-items:center;gap:8px"}),K4=x("div",{target:"e1vkl5kv3"})("height:24px;display:flex;flex-grow:1;gap:4px;align-items:center;padding:4px;background-color:",function(t){return t.theme.ketcher.color.input.background.default},";border-radius:4px;&:hover,&:has(input:focus){outline:",function(t){return t.theme.ketcher.outline.selected.small},";}"),W4=x("button",{target:"e1vkl5kv2"})("height:24px;display:flex;align-items:center;gap:2px;border:none;border-radius:4px 0 0 4px;cursor:pointer;background-color:#e2e5e9;text-transform:none;font-weight:",function(t){var e=t.theme;return e.ketcher.font.weight.regular},";font-size:",function(t){var e=t.theme;return e.ketcher.font.size.regular},";color:",function(t){var e=t.theme;return e.ketcher.color.text.secondary},";"),Y4=x(se,{target:"e1vkl5kv1"})("height:16px;width:16px;color:",function(t){return t.theme.ketcher.color.text.secondary},";"),Z4=x(Dp,{target:"e1vkl5kv0"})({name:"pmmg8c",styles:"flex-grow:1;padding:0;margin:0;background-color:transparent;border:none;outline:none;&:hover{outline:none;}&:focus{outline:none;}"}),bh=x("div",{target:"e1pv9pa10"})(function(t){var e=t.fullWidth,r=t.withPaddingRight;return{width:e?"100%":"fit-content",display:"flex",flexDirection:"column",justifyContent:"space-between",paddingRight:r?"12px":0}},""),Q4=x("div",{target:"e1pv9pa9"})(function(t){var e=t.theme;return{height:"100%",width:"100%",position:"relative",padding:"12px",paddingBottom:0,backgroundColor:e.ketcher.color.background.canvas,display:"flex",justifyContent:"space-between",containerType:"size",overflow:"clip"}},""),X4=x("div",{target:"e1pv9pa8"})(function(t){var e=t.theme;return{height:"100%",width:"100%",position:"relative",paddingBottom:0,backgroundColor:e.ketcher.color.background.canvas,display:"flex",justifyContent:"space-between",columnGap:"3px"}},""),Kg=x("div",{target:"e1pv9pa7"})(function(t){var e=t.hide,r=e===void 0?!1:e;return{height:"100%",width:"fit-content",display:r?"none":"flex",flexDirection:"column"}},""),Wg=x(Kg,{target:"e1pv9pa6"})(""),Yg=x(Kg,{target:"e1pv9pa5"})(""),Zg=x("div",{target:"e1pv9pa4"})(function(t){var e=t.shortened,r=e===void 0?!1:e,n=t.theme;return{height:"36px",width:r?"calc(100% - ".concat(Vg,")"):"calc(100%)",marginBottom:"6px",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#FFFFFF",boxShadow:n.ketcher.shadow.mainLayoutBlocks,borderRadius:"4px"}},""),Qg=x("div",{target:"e1pv9pa3"})({name:"1gavlve",styles:"&:not(:empty){margin-bottom:15px;}"}),Xg=x("div",{target:"e1pv9pa2"})({name:"149k9u4",styles:"height:100%;width:100%;position:relative"}),Jg=x("div",{target:"e1pv9pa1"})({name:"0",styles:""}),J4=x("div",{target:"e1pv9pa0"})({name:"1k18kha",styles:"height:40px"}),Pe=function(e){var r=e.children,n={Left:null,Main:null,Right:null,Top:null,Bottom:null,InsideRoot:null};return yt.Children.forEach(r,function(a){a.type===Wg?n.Left=a:a.type===Yg?n.Right=a:a.type===Zg?n.Top=a:a.type===Qg?n.Bottom=a:a.type===Xg?n.Main=a:a.type===Jg&&(n.InsideRoot=a)}),E(Q4,{children:[E(bh,{fullWidth:!0,withPaddingRight:!0,children:[n.Top,E(X4,{children:[n.Left,v(J4,{}),n.Main]}),n.Bottom]}),v(bh,{children:n.Right}),n.InsideRoot]})};Pe.Left=Wg;Pe.Top=Zg;Pe.Bottom=Qg;Pe.Right=Yg;Pe.Main=Xg;Pe.InsideRoot=Jg;var eI=x("div",{target:"e19unl0y1"})({name:"1g3to66",styles:"background-color:#e1e5ea;flex-grow:1;overflow-y:auto;height:100%"}),tI=x(Rp,{target:"e19unl0y0"})({name:"jwg7h4",styles:"height:100%;width:100%;align-items:start"}),rI=function(e){var r=e.children,n=e.value,a=e.index;return v(eI,{role:"tabpanel",hidden:n!==a,id:a.toString(),children:n===a&&v(tI,{children:r})})},nI=x(F1,{shouldForwardProp:function(e){return e!=="isLayoutToRight"},target:"e1rrs7vg3"})("height:32px;min-height:32px;list-style-type:none;margin:0;padding:4px 8px 0 8px;border-bottom:",function(t){var e=t.theme;return"1px solid ".concat(e.ketcher.color.border.primary)},";overflow:unset;& .MuiTabs-scroller,& .MuiTabs-flexContainer{height:100%;overflow:unset!important;}& .MuiTabs-flexContainer{justify-content:",function(t){var e=t.isLayoutToRight;return e?"flex-end":"flex-start"},";padding-right:",function(t){var e=t.isLayoutToRight;return e?"16px":"0"},";}& .MuiTabs-indicator{display:none;}"),aI=x(zs,{shouldForwardProp:function(e){return e!=="isLayoutToRight"},target:"e1rrs7vg2"})("min-height:24px;min-width:0;position:relative;padding:7px 12px;font-size:",function(t){var e=t.theme;return e.ketcher.font.size.regular},";text-transform:none;cursor:pointer;text-align:center;background-color:",function(t){var e=t.theme;return e.ketcher.color.tab.regular},";color:",function(t){var e=t.theme;return e.ketcher.color.text.light},";list-style-type:none;margin-left:1px;align-items:center;flex:",function(t){var e=t.isLayoutToRight;return e?void 0:"1 1 auto;"},";border:1px solid transparent;border-bottom:none;border-radius:4px 4px 0 0;&:first-of-type{margin-left:0;}&:hover{background-color:",function(t){var e=t.theme;return e.ketcher.color.tab.regular},";color:",function(t){var e=t.theme;return e.ketcher.color.text.primary},";border-color:",function(t){var e=t.theme;return e.ketcher.color.border.primary},";}&.Mui-selected{background-color:",function(t){var e=t.theme;return e.ketcher.color.tab.active},";color:",function(t){var e=t.theme;return e.ketcher.color.text.primary},";border-color:",function(t){var e=t.theme;return e.ketcher.color.border.primary},";margin-bottom:-1px;padding-bottom:8px;&::after{content:'';position:absolute;left:0;bottom:-1px;height:1px;background-color:",function(t){var e=t.theme;return e.ketcher.color.tab.active},";}}&[data-tab='Favorites']{font-size:16px;color:#faa500;}"),iI=x(zs,{target:"e1rrs7vg1"})({name:"2934o7",styles:"width:0;height:0;min-width:0;min-height:0;padding:0;margin:0;visibility:hidden"}),oI=x("div",{target:"e1rrs7vg0"})({name:"2r6rpv",styles:"display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-start;width:100%;height:100%"});function wh(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function xh(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wh(Object(r),!0).forEach(function(n){z(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wh(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var uI=function(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}},sI=function(e){var r=e.tabs,n=e.selectedTabIndex,a=e.isLayoutToRight,i=e.onChange,o=r[n],u=o?.component,s=o?.props;return E(Y,{children:[E(nI,{value:n,onChange:i,isLayoutToRight:a,children:[r.map(function(l,c){return v(aI,xh({label:l.caption,title:l.tooltip,isLayoutToRight:a,"data-testid":l.testId,"data-tab":l.tooltip},uI(c)),c)}),v(iI,{value:-1})]}),o&&v(rI,{value:n,index:n,children:v(oI,{children:v(u,xh({},s))})})]})},e0=A.memo(sI),vt=function(){};function Ch(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ot(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ch(Object(r),!0).forEach(function(n){z(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ch(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Mh=function(e,r,n){var a=new Map(e.map(function(i){var o=xe(i)?Ip(i.id):Pp(Le(i));return[o,i]}));return r.filter(function(i){return i.templates.every(function(o){return!!a.get(o.$ref)})}).map(function(i){var o=new Map(i.templates.map(function(d){var f=a.get(d.$ref),h=y1(f),p=L(h,3),m=p[2];return[m,f]})),u=o.get(et.Sugar),s=o.get(et.Base),l=o.get(et.Phosphate),c={base:s?ot(ot({},s),{},{label:s.label}):void 0,name:i.name,phosphate:l?ot(ot({},l),{},{label:l.label}):void 0,sugar:u?ot(ot({},u),{},{label:u.label}):void 0,favorite:i.favorite,default:n||i.default};return i.idtAliases?ot(ot({},c),{},{idtAliases:i.idtAliases}):c})},Ku=function(e){return Object.entries(e).filter(function(r){var n=L(r,2);n[0];var a=n[1];return!!a}).map(function(r){var n=L(r,1),a=n[0];return a})},ee=function(){return cr()},k=Np;function gr(){var t,e=bp.getKetcher(),r=e==null||(t=e.editor)===null||t===void 0?void 0:t.struct().isBlank(),n=r?Z0:Q0,a=k(re),i=k(F5),o=A.useState(i||n),u=L(o,2),s=u[0],l=u[1],c=A.useCallback(function(d){l(d)},[l]);return A.useEffect(function(){return a?.events.layoutModeChange.add(c),function(){a?.events.layoutModeChange.remove(c)}},[c,a?.events.layoutModeChange]),s}function lI(){var t=k(re),e=k(Ze),r=A.useState(e),n=L(r,2),a=n[0],i=n[1],o=function(s){i(s)};return A.useEffect(function(){return t?.events.toggleSequenceEditInRNABuilderMode.add(o),function(){t?.events.toggleSequenceEditInRNABuilderMode.remove(o)}},[o,t?.events.toggleSequenceEditInRNABuilderMode]),a}var Kl=yt.createContext({}),t0=A.createContext({width:0,height:0}),cI=function(e){var r=e.children,n=e.rootRef,a=e.isMacromoleculesEditorTurnedOn,i=A.useState({width:0,height:0}),o=L(i,2),u=o[0],s=o[1],l=A.useCallback(function(){if(n!=null&&n.current){var d=n.current.getBoundingClientRect(),f=d.width,h=d.height;s({width:f,height:h})}},[n]),c=A.useCallback(ve.debounce(l,100),[l]);return A.useEffect(function(){l()},[a]),A.useEffect(function(){return c(),window.addEventListener("resize",c),function(){window.removeEventListener("resize",c)}},[c]),v(t0.Provider,{value:u,children:r})},Wl=function(){var e=A.useContext(t0),r=e.height;return r<720},r0=x("div",{target:"e719szw2"})("background:white;height:48px;text-align:center;cursor:",function(t){var e=t.disabled;return e?"default":"pointer"},";opacity:",function(t){var e=t.disabled;return e?"0.4":"1"},";display:flex;justify-content:space-between;align-items:center;font-size:",function(t){var e=t.theme;return e.ketcher.font.size.small},";color:",function(t){var e=t.theme;return e.ketcher.color.text.primary},";position:relative;overflow:hidden;border-radius:4px;box-shadow:0 2px 5px 0 rgba(103, 104, 132, 0.149);margin:0;user-select:none;border-color:#167782;border-width:",function(t){var e=t.selected;return e?"2px 2px 2px":"0px"},";border-style:solid;box-sizing:border-box;z-index:",function(t){var e=t.selected;return e?2:void 0},";.hidden & .star{visibility:hidden!important;}&:hover{outline:1px solid #b4b9d6;>.star{visibility:visible;opacity:1;}}&::after{content:'';display:block;position:absolute;top:0;left:0;width:100%;height:8px;border-bottom:",function(t){var e=t.isVariantMonomer;return e?"1px solid #CAD3DD":"none"},";background:",function(t){var e,r,n,a,i,o=t.code,u=t.theme,s=t.item;if(!s)return(e=u.ketcher.monomer.color.default)===null||e===void 0?void 0:e.regular;var l=s,c=((r=l.props)===null||r===void 0?void 0:r.MonomerType)==="PEPTIDE";if(c&&(n=u.ketcher.peptide.color[o])!==null&&n!==void 0&&n.regular){var d;return(d=u.ketcher.peptide.color[o])===null||d===void 0?void 0:d.regular}var f=((a=u.ketcher.monomer.color[o])===null||a===void 0?void 0:a.regular)||((i=u.ketcher.monomer.color.default)===null||i===void 0?void 0:i.regular);return f},";},>span{position:absolute;bottom:",function(t){var e=t.selected;return e?"4px":"6px"},";left:",function(t){var e=t.selected;return e?"4px":"6px"},";overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:85%;}>.star{color:#e1e5ea;position:absolute;top:12px;right:3px;font-size:15px;opacity:0;transition:0.2s ease;flex-shrink:0;&.visible{visibility:visible;opacity:1;}&:active{transform:scale(1.4);}&:hover,&.visible{color:#faa500;}}"),dI=x("div",{target:"e719szw1"})("display:flex;justify-content:center;align-items:center;height:15px;width:",function(t){var e=t.monomersAmount;return e>=10?"20px":"15px"},";border-radius:",function(t){var e=t.monomersAmount;return e>=10?"20px":"50%"},";border:1px solid #cceaee;position:absolute;bottom:",function(t){var e=t.selected;return e?"4px":"6px"},";left:",function(t){var e=t.selected;return e?"18px":"20px"},";font-size:12px;line-height:12px;"),fI=x("span",{target:"e719szw0"})({name:"rnnx2x",styles:"font-size:12px"}),vI=function(e,r){var n,a,i,o=k(Ze),u=Np(I4),s=A.useState(!1),l=L(s,2),c=l[0],d=l[1];return A.useEffect(function(){if(!o)return d(!1);if(r===pt.BASES){var f;d(!(e!=null&&(f=e.props)!==null&&f!==void 0&&(f=f.MonomerCaps)!==null&&f!==void 0&&f.R1))}else if(r===pt.PHOSPHATES){var h,p;d(!(e!=null&&(h=e.props)!==null&&h!==void 0&&(h=h.MonomerCaps)!==null&&h!==void 0&&h.R1&&e!==null&&e!==void 0&&(p=e.props)!==null&&p!==void 0&&(p=p.MonomerCaps)!==null&&p!==void 0&&p.R2))}else if(r===pt.SUGARS)if(u){var m,g;d(!(e!=null&&(m=e.props)!==null&&m!==void 0&&(m=m.MonomerCaps)!==null&&m!==void 0&&m.R3&&e!==null&&e!==void 0&&(g=e.props)!==null&&g!==void 0&&(g=g.MonomerCaps)!==null&&g!==void 0&&g.R2))}else{var b,w,M;d(!(e!=null&&(b=e.props)!==null&&b!==void 0&&(b=b.MonomerCaps)!==null&&b!==void 0&&b.R3&&e!==null&&e!==void 0&&(w=e.props)!==null&&w!==void 0&&(w=w.MonomerCaps)!==null&&w!==void 0&&w.R2&&e!==null&&e!==void 0&&(M=e.props)!==null&&M!==void 0&&(M=M.MonomerCaps)!==null&&M!==void 0&&M.R1))}},[r,o,u,e==null||(n=e.props)===null||n===void 0||(n=n.MonomerCaps)===null||n===void 0?void 0:n.R1,e==null||(a=e.props)===null||a===void 0||(a=a.MonomerCaps)===null||a===void 0?void 0:a.R2,e==null||(i=e.props)===null||i===void 0||(i=i.MonomerCaps)===null||i===void 0?void 0:i.R3,d]),c};function Sh(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ah(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Sh(Object(r),!0).forEach(function(n){z(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Sh(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var hI=function(e){var r=e.item,n=e.groupName,a=e.onMouseLeave,i=e.onMouseMove,o=e.isSelected,u=e.disabled,s=e.onClick,l=s===void 0?vt:s,c=ee(),d=vI(r,n)||u,f=xe(r)?"":r.props.MonomerType===Dr.CHEM?r.props.MonomerType:r.props.MonomerNaturalAnalogCode,h=Le(r),p=xe(r)?void 0:r,m=A.useCallback(function(g){g.stopPropagation(),c(a4(r))},[c,r]);return E(r0,Ah(Ah({selected:o,disabled:d,"data-testid":h,"data-monomer-item-id":h,item:p,isVariantMonomer:r.isAmbiguous,code:f,onMouseLeave:a,onMouseMove:i},d?{}:{onClick:l}),{},{children:[v(fI,{children:r.label}),!d&&v("div",{onClick:m,className:"star ".concat(r.favorite?"visible":""),children:Bl}),xe(r)&&v(dI,{selected:o,monomersAmount:r.monomers.length,children:r.monomers.length})]}))},n0=x("div",{target:"e10tnh3n3"})({name:"37420",styles:"display:grid;grid-template-columns:repeat(3, 1fr);grid-template-rows:auto;flex:1;gap:4px;&::after{content:'';flex:auto;}"}),a0=x("div",{target:"e10tnh3n2"})("position:relative;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-start;font-size:",function(t){var e=t.theme;return e.ketcher.font.size.small},";font-family:",function(t){var e=t.theme;return e.ketcher.font.family.roboto},";color:",function(t){var e=t.theme;return e.ketcher.color.divider},";margin:0;gap:4px;"),pI=x(a0,{target:"e10tnh3n1"})({name:"qdeacm",styles:"flex-direction:column"}),mI=x("div",{target:"e10tnh3n0"})("height:100%;display:flex;flex-grow:0;flex-basis:14px;flex-direction:column;flex-wrap:wrap;justify-content:flex-start;font-size:",function(t){var e=t.theme;return e.ketcher.font.size.medium},";font-family:",function(t){var e=t.theme;return e.ketcher.font.family.roboto},";color:",function(t){var e=t.theme;return e.ketcher.color.text.primary},";margin:0;"),lr=function(e){var r=e.items,n=e.title,a=e.groupName,i=e.selectedMonomerUniqueKey,o=e.libraryName,u=e.disabled,s=e.onItemClick,l=s===void 0?vt:s,c=ee(),d=k(re),f=k(S4),h=function(C){var S=!1;if(xe(C))return!1;if(u)S=u;else{var I,_,O=f["".concat((I=C.props)===null||I===void 0?void 0:I.MonomerClass,"s")];if(O?.length>0&&(_=C.props)!==null&&_!==void 0&&_.MonomerCaps)for(var T=0;T<O.length;T++)O[T]in C.props.MonomerCaps||(S=!0)}return S},p=A.useCallback(function(y){return c(or(y))},[c]),m=A.useCallback(ve.debounce(function(y){return p(y)},500),[p]),g=function(){m.cancel(),c(or(void 0))},b=function(C,S){g();var I=S.currentTarget.getBoundingClientRect(),_,O,T;if(xe(C)){T=C?jp(C)(I):"";var P="".concat(I.left+I.width/2,"px");O=ce.AmbiguousMonomer,_={left:P,top:T,transform:"translate(-50%, 0)"}}else T=C?z1(I):"",_={right:"-88px",top:T,transform:"translate(-50%, 0)"},O=ce.Monomer;var N={type:O,monomer:C,style:_};m(N)},w=function(C){c(ct("monomer")),["FAVORITES","PEPTIDE","CHEM"].includes(o??"")&&d.events.selectMonomer.dispatch(C),l(C)},M=function(C){return i===Le(C)};return E(pI,{children:[n&&v(mI,{children:n}),v(n0,{children:r.map(function(y){return v(hI,{disabled:h(y),item:y,groupName:a,isSelected:M(y),onMouseLeave:g,onMouseMove:function(S){return b(y,S)},onClick:function(){return w(y)}},Le(y))})})]})},gI=x("div",{target:"e1bp6il60"})({name:"8z91a1",styles:"width:100%;display:flex;flex-direction:column;justify-items:center;gap:8px;padding:8px"}),yI=x(r0,{target:"e1txcvj90"})("&::after{content:'';background:",function(t){var e=t.theme,r=t.selected;return r?e.ketcher.color.button.primary.active:"#faa500"},";}.dots{visibility:hidden;position:absolute;right:2px;top:10px;}&:hover .dots{visibility:visible;}>.star{right:0;left:4px;top:10px;width:min-content;}"),bI=x("div",{target:"e1h0dkll2"})(function(t){return{minHeight:"32px",display:"flex",alignItems:"center",padding:"8px 12px",gap:"8px",borderBottom:t.theme.ketcher.border.small}},""),wI=x("span",{target:"e1h0dkll1"})(function(t){return{flexGrow:1,fontSize:t.theme.ketcher.font.size.regular}},""),Ps=x(se,{target:"e1h0dkll0"})(function(t){return{width:"16px",height:"16px",color:t.theme.ketcher.color.icon.grey,transition:t.theme.ketcher.transition.regular,transform:t.expanded?"rotate(180deg)":"none"}},""),xI=function(e){var r=e.preset,n=e.isSelected,a=e.onClick,i=a===void 0?vt:a,o=e.onContextMenu,u=o===void 0?vt:o,s=e.onMouseLeave,l=s===void 0?vt:s,c=e.onMouseMove,d=c===void 0?vt:c,f=ee(),h=A.useCallback(function(p){p.stopPropagation(),f(j4(r))},[f,r]);return E(yI,{"data-testid":J5(r),onClick:i,onContextMenu:u,onMouseLeave:l,onMouseMove:d,selected:n,code:r.name,"data-rna-preset-item-name":r.name,children:[v("span",{children:r.name}),v(Ps,{name:"vertical-dots",className:"dots",onClick:u}),v("div",{"aria-hidden":!0,onClick:h,className:"star ".concat(r.favorite?"visible":""),children:Bl})]})},CI=A.memo(xI),Ke;(function(t){t.FOR_RNA="context-menu-for-RNA",t.FOR_SEQUENCE="context-menu-for-sequence",t.FOR_POLYMER_BOND="context-menu-for-polymer-bond",t.FOR_SELECTED_MONOMERS="context-menu-for-selected-monomers"})(Ke||(Ke={}));var MI=x(R1,{target:"ekj16lc0"})("--contexify-activeItem-bgColor:rgba(243, 245, 247, 1);--contexify-menu-minWidth:140px;--contexify-activeItem-color:rgba(51, 51, 51, 1);.contexify_itemContent{font-family:",function(t){var e=t.theme;return e.ketcher.font.family.inter},";font-size:",function(t){var e=t.theme;return e.ketcher.font.size.regular},";}.contexify_separator{color:rgba(225, 229, 234, 1);}.contexify_item-title{opacity:1;font-weight:bold;}"),SI=function(e,r){var n=[];return e.forEach(function(a,i){var o=a.name,u=a.title,s=a.hidden,l=a.disabled,c=a.isMenuTitle,d=a.separator,f=v(T1,{id:o,onClick:r,"data-testid":o,hidden:s,disabled:l,className:c?"contexify_item-title":"",children:v("span",{children:u})},o);n.push(f),d&&n.push(v(N1,{},i))}),n},ma=function(e){var r=e.id,n=e.handleMenuChange,a=e.menuItems,i=ee();return A.useEffect(function(){var o=function(s){var l,c,d=((l=s.target)===null||l===void 0||(l=l.__data__)===null||l===void 0?void 0:l.node)||((c=s.target)===null||c===void 0||(c=c.__data__)===null||c===void 0?void 0:c.monomer);if(d){s.stopPropagation();return}i(Mg(!1))};return document.addEventListener("click",o),document.addEventListener("contextmenu",o),function(){document.removeEventListener("click",o),document.removeEventListener("contextmenu",o)}},[i,r]),v(MI,{id:r,children:SI(a,n)})},AI=function(){var e=$r.RNA,r=ee(),n=k(Bg),a=k(Tg),i=k(Ze),o=[{name:"duplicateandedit",title:"Duplicate and Edit...",disabled:!1},{name:"edit",title:"Edit...",separator:!0,disabled:n?.default},{name:"deletepreset",title:"Delete Preset",disabled:n?.default}],u=function(c){var d=c.id,f=c.props;switch(d){case"duplicateandedit":f.duplicatePreset(n),a!==e&&r(Vr(e));break;case"edit":f.editPreset(n),a!==e&&r(Vr(e));break;case"deletepreset":r(Jt("delete"));break}},s=document.querySelector(qt);return s&&!i?Vn.createPortal(v(ma,{id:Ke.FOR_RNA,menuItems:o,handleMenuChange:u}),s):null},Yl=function(e){var r=e.presets,n=e.duplicatePreset,a=e.editPreset,i=k(va),o=k(re),u=vn({id:Ke.FOR_RNA}),s=u.show,l=cr(),c=function(y){var C,S,I,_=!0,O=!0,T=!0;if(y!=null&&(C=y.base)!==null&&C!==void 0&&(C=C.props)!==null&&C!==void 0&&C.MonomerCaps&&(_="R1"in y.base.props.MonomerCaps),y!=null&&(S=y.sugar)!==null&&S!==void 0&&(S=S.props)!==null&&S!==void 0&&S.MonomerCaps){var P;_&&y!==null&&y!==void 0&&(P=y.base)!==null&&P!==void 0&&(P=P.props)!==null&&P!==void 0&&P.MonomerCaps&&(O="R3"in y.sugar.props.MonomerCaps)}if(y!=null&&(I=y.phosphate)!==null&&I!==void 0&&(I=I.props)!==null&&I!==void 0&&I.MonomerCaps){var N;T="R1"in y.phosphate.props.MonomerCaps,O&&y!==null&&y!==void 0&&(N=y.sugar)!==null&&N!==void 0&&(N=N.props)!==null&&N!==void 0&&N.MonomerCaps&&(O="R2"in y.sugar.props.MonomerCaps)}return _&&O&&T},d=function(y){return function(){var C=c(y);if(!C&&y.name){l(Gg(y.name));return}l(Wr(y)),o.events.selectPreset.dispatch(y),y.name!==i.name&&l(nt(!1))}},f=function(y){var C,S=y instanceof HTMLDivElement;!S&&y.parentElement&&(y=y.parentElement);var I=y.getBoundingClientRect(),_=(C=y.offsetParent)===null||C===void 0?void 0:C.getBoundingClientRect(),O=140,T=I.right-O,P=I.y+I.height/2;return _!=null&&_.x&&_?.x>T&&(T=I.x),{x:T,y:P}},h=k(rn),p=A.useCallback(function(M){return l(or(M))},[l]),m=A.useCallback(ve.debounce(function(M){return p(M)},500),[p]),g=function(){m.cancel(),l(or(void 0))},b=function(y,C){if(g(),!(h.type===ce.Preset||!C.currentTarget)){var S=[y.sugar,y.base,y.phosphate],I=C.currentTarget.getBoundingClientRect(),_={left:"".concat(I.left+I.width,"px"),top:xe(y.base)?jp(y.base)(I):H1(I),transform:"translate(-100%, 0)"},O=xe(y.base)?{type:ce.AmbiguousMonomer,monomer:y.base,presetMonomers:S,style:_}:{type:ce.Preset,monomers:S,name:y.name,idtAliases:y.idtAliases,position:$e.Library,style:_};m(O)}},w=function(y){return function(C){C.stopPropagation(),l(L4(y)),s({event:C,props:{duplicatePreset:n,editPreset:a},position:f(C.currentTarget)})}};return E(a0,{"data-testid":"rna-preset-group",children:[v(n0,{children:r.map(function(M,y){return v(CI,{isSelected:i?.name===M.name,preset:M,onClick:d(M),onContextMenu:w(M),onMouseMove:function(S){return b(M,S)},onMouseLeave:g},"".concat(M.name).concat(y))})}),v(AI,{})]})},Wu=function(e){var r=e.onItemClick,n=e.libraryName,a=e.duplicatePreset,i=e.editPreset,o=k(fa),u=k(pa),s=k(da),l=n===_g,c=l?{monomers:t4(o),presets:O4(u)}:kg(o,n),d=As(l?c.monomers:c),f=l?r4(o):Gr(o,G.PEPTIDES),h=A.useState(""),p=L(h,2),m=p[0],g=p[1],b=function(M){g(Le(M))};return A.useEffect(function(){s!=="monomer"&&g("")},[s]),E(gI,{children:[l&&d.length>0&&v("div",{children:"Monomers"}),d.map(function(w,M,y){var C=w.groupItems,S=w.groupTitle;return v(lr,{title:y.length===1?void 0:S,items:C,libraryName:n,onItemClick:r||b,selectedMonomerUniqueKey:m},S)}),l&&c.presets.length>0&&E(Y,{children:[v("div",{children:"Presets"}),v(Yl,{duplicatePreset:a,editPreset:i,presets:c.presets})]}),v(Y,{children:(n===W5||l)&&f.map(function(w){return v(lr,{title:w.groupTitle,items:w.groupItems,libraryName:n,onItemClick:r||b,selectedMonomerUniqueKey:m},w.groupTitle)})})]})},II=x("div",{target:"e1fsx6x2"})({name:"kxxltl",styles:"display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding:8px;background-color:#f7f9fa;border-radius:0 0 4px 4px"}),PI=x("span",{target:"e1fsx6x1"})("font-size:",function(t){return t.theme.ketcher.font.size.medium},";overflow:hidden;text-overflow:ellipsis;color:",function(t){return t.theme.ketcher.color.text.primary},";"),EI=x("div",{target:"e1fsx6x0"})({name:"1x17g94",styles:"display:flex;align-items:center;width:100%"}),_I=function(e){var r=e.name,n=e.fullName;return!r&&!n?null:v(II,{children:v(EI,{children:v(PI,{children:r||n})})})},OI=A.memo(_I),kI=x("div",{target:"e1ie5fzr8"})(function(t){return{height:"40px",position:"relative",marginLeft:t.isEditMode?"30px":"28.5px",display:"flex",alignItems:"center",border:t.isEditMode?"none":"1.5px solid ".concat(t.theme.ketcher.outline.color),backgroundColor:t.selected?t.theme.ketcher.color.button.primary.active:t.isEditMode?t.theme.ketcher.color.background.primary:"transparent",borderRadius:t.theme.ketcher.border.radius.regular,boxShadow:t.isEditMode?t.theme.ketcher.shadow.regular:"none",padding:"5px 10px",color:t.selected?"white":"black",gap:"8px",cursor:"pointer",outlineOffset:"1px",boxSizing:"border-box",":hover":{outline:t.theme.ketcher.outline.small},":not(:last-child)":{":after":{content:'""',position:"absolute",right:"100%",bottom:"calc(50% - 1px)",borderLeft:t.theme.ketcher.outline.medium,borderBottom:t.theme.ketcher.outline.medium,height:"2px",width:"17px"}},":last-child":{":after":{content:'""',position:"absolute",right:"100%",bottom:"calc(50% - 1px)",borderLeft:t.theme.ketcher.outline.medium,borderBottom:t.theme.ketcher.outline.medium,borderRadius:"0 0 0 4px",height:"130px",width:"17px"}}}},""),TI=x("div",{target:"e1ie5fzr7"})({name:"1fttcpj",styles:"display:flex;flex-direction:column"}),NI=x("span",{target:"e1ie5fzr6"})("font-size:",function(t){var e=t.theme;return e.ketcher.font.size.small},";color:",function(t){var e=t.selected,r=t.theme;return e?r.ketcher.color.background.primary:r.ketcher.color.text.light},";opacity:",function(t){var e=t.selected;return e?.4:1},";"),RI=x("span",{target:"e1ie5fzr5"})("margin-top:1px;font-size:",function(t){var e=t.theme;return e.ketcher.font.size.medium},";color:",function(t){var e=t.selected,r=t.empty,n=t.theme;return e?n.ketcher.color.button.text.primary:r?"#b4b9d6":n.ketcher.color.text.primary},";opacity:",function(t){var e=t.selected,r=t.empty;return e&&r?.4:1},";"),DI=x("div",{target:"e1ie5fzr4"})({name:"wgokoh",styles:"position:relative;width:16px;height:16px;display:flex;align-items:center;justify-content:center"}),LI=x(se,{target:"e1ie5fzr3"})("fill:",function(t){var e=t.selected,r=t.empty,n=t.theme;return r?"none":e?n.ketcher.color.background.primary:n.ketcher.color.icon.grey},";color:",function(t){var e=t.selected,r=t.theme;return e?r.ketcher.color.background.primary:r.ketcher.color.icon.grey},";"),jI=x("div",{target:"e1ie5fzr2"})("position:relative;width:60px;display:flex;flex-direction:column;gap:8px;padding:4px;border-radius:4px;box-shadow:0 1px 2px 0 rgba(180, 185, 214, 0.6);cursor:pointer;background-color:",function(t){var e=t.selected,r=t.theme;return e?r.ketcher.color.button.primary.active:r.ketcher.color.background.primary},";&:hover{outline:",function(t){var e=t.theme;return e.ketcher.outline.selected.small},";}"),qI=x("div",{target:"e1ie5fzr1"})("position:absolute;top:-35%;left:50%;height:15px;width:2px;background-color:",function(t){var e=t.theme;return e.ketcher.outline.color},";"),FI=x("p",{target:"e1ie5fzr0"})("margin:0;font-size:",function(t){var e=t.theme;return e.ketcher.font.size.small},";font-weight:",function(t){var e=t.theme;return e.ketcher.font.weight.regular},";color:",function(t){var e=t.selected,r=t.empty,n=t.theme;return e?n.ketcher.color.button.text.primary:r?"#b4b9d6":n.ketcher.color.text.primary},";opacity:",function(t){var e=t.selected,r=t.empty;return e&&r?.4:1},";"),i0=z(z(z({},G.SUGARS,"Sugar"),G.BASES,"Base"),G.PHOSPHATES,"Phosphate"),BI=function(e){var r=e.selected,n=e.empty,a=e.name;return v(DI,{children:v(LI,{selected:r,empty:n,name:a})})},o0=A.memo(BI),zI=function(e){var r=e.groupName,n=e.iconName,a=e.monomerName,i=e.selected,o=e.onClick,u=e.testid,s=k(mr),l=!a;return E(jI,{selected:i,onClick:o,isEditMode:s,"data-testid":u,children:[v(qI,{}),v(o0,{name:n,selected:i,empty:l}),v(FI,{selected:i,empty:l,children:a||i0[r]})]})},HI=function(e){var r=e.groupName,n=e.iconName,a=e.monomerName,i=e.selected,o=e.onClick,u=e.testid,s=k(mr),l=!a;return E(kI,{selected:i,onClick:o,isEditMode:s,"data-testid":u,children:[v(o0,{name:n,selected:i,empty:l}),E(TI,{children:[v(NI,{selected:i,children:i0[r]}),v(RI,{empty:l,selected:i,children:a||"Not selected"})]})]})};function Ih(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ph(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ih(Object(r),!0).forEach(function(n){z(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ih(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var UI=function(e){var r=Wl();return r?v(zI,Ph({},e)):v(HI,Ph({},e))},$I=x("div",{target:"e18wzlbg8"})(function(t){return{display:"flex",flexDirection:"column",padding:"10px",backgroundColor:"#F7F9FA",borderRadius:"0 0 4px 4px","&.rna-editor-expanded--sequence-edit-mode":{padding:"8px",paddingTop:"10px",border:"2px ".concat(t.theme.ketcher.color.editMode.sequenceInRNABuilder," solid"),borderTop:"none"}}},""),GI=x("input",{target:"e18wzlbg7"})("width:100%;padding:6px;border:none;border-radius:4px;box-shadow:0 1px 2px 0 rgba(180, 185, 214, 0.6);&:hover,&:focus{outline:",function(t){var e=t.theme;return e.ketcher.outline.selected.small},";}"),VI=x("div",{target:"e18wzlbg6"})("width:100%;display:flex;flex-direction:",function(t){var e=t.compact;return e?"row":"column"},";justify-content:",function(t){var e=t.compact;return e?"space-between":"flex-start"},";gap:8px;margin-top:16px;"),KI=x("div",{target:"e18wzlbg5"})({name:"zmhcg5",styles:"margin-top:16px;display:flex;justify-content:space-evenly;align-items:center;gap:8px"}),Cr=x(Wn,{target:"e18wzlbg4"})(function(t){return{width:"100%",whiteSpace:"nowrap",fontSize:t.theme.ketcher.font.size.regular,backgroundColor:t.primary?t.theme.ketcher.color.button.primary.active:void 0,color:t.primary&&!t.disabled?t.theme.ketcher.color.button.text.primary:t.theme.ketcher.color.text.light,outline:t.primary&&!t.disabled?t.theme.ketcher.outline.selected.small:t.theme.ketcher.outline.grey.small}},""),WI=x("div",{target:"e18wzlbg3"})(function(t){return{position:"relative",borderRadius:t.theme.ketcher.border.radius.regular,backgroundColor:t.theme.ketcher.color.background.primary,boxShadow:t.theme.ketcher.shadow.regular,cursor:"pointer",overflow:"hidden",padding:"0 6px 6px 6px",display:"flex",alignItems:"flex-end",height:"48px",outline:t.selected?t.theme.ketcher.outline.selected.medium:"none",":hover":{outline:t.selected?void 0:t.theme.ketcher.outline.small}}},""),YI=x("span",{target:"e18wzlbg2"})(function(t){return{position:"absolute",top:"0",left:"0",width:"100%",height:"8px",backgroundColor:t.selected?t.theme.ketcher.outline.selected.color:t.theme.ketcher.outline.color}},""),ZI=x(Dp,{target:"e18wzlbg1"})({name:"1jdipvd",styles:"width:100%;&:disabled{background:none;outline:none;color:inherit;}"}),QI=x("div",{target:"e18wzlbg0"})({name:"1gz2b5f",styles:"overflow:hidden;text-overflow:ellipsis"}),Yu=function(e){return e.size===0?"":e.size===1?ue(e)[0]:"[multiple]"},Es=function(e){if(e!=null&&e.length){for(var r={sugarLabel:new Set,baseLabel:new Set,phosphateLabel:new Set},n=0;n<e.length;n++)for(var a=0,i=["sugarLabel","baseLabel","phosphateLabel"];a<i.length;a++){var o,u,s,l=i[a];((o=e[n])!==null&&o!==void 0&&o[l]||!((u=e[n])!==null&&u!==void 0&&u[l])&&e[n].type===Je.Nucleoside&&!e[n].isNucleosideConnectedAndSelectedWithPhosphate)&&r[l].add((s=e[n])===null||s===void 0?void 0:s[l])}return{Sugars:Yu(r.sugarLabel),Bases:Yu(r.baseLabel),Phosphates:Yu(r.phosphateLabel)}}},XI=function(e){var r=Es(e);return"".concat(r?.Sugars,"(").concat(r?.Bases,")").concat(r?.Phosphates||"")},u0=function(e){e($g(null)),e(nt(!1))},Eh=function(e){u0(e)},Bn=function(e,r){u0(e),e(Ul([])),r.events.turnOffSequenceEditInRNABuilderMode.dispatch(),r.mode instanceof Sp&&r.mode.turnOffEditMode()},zn=function(e){return e.filter(function(r){return r.type?r.type===Je.Nucleotide||r.type===Je.Nucleoside:r.node?r.node instanceof Lr||r.node instanceof jr:!1}).length};function _h(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ut(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_h(Object(r),!0).forEach(function(n){z(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_h(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var JI=function(e){var r=e.isEditMode,n=e.onDuplicate,a=[{groupName:G.SUGARS,iconName:"sugar",testId:"rna-builder-slot--sugar"},{groupName:G.BASES,iconName:"base",testId:"rna-builder-slot--base"},{groupName:G.PHOSPHATES,iconName:"phosphate",testId:"rna-builder-slot--phosphate"}],i=cr(),o=k(va),u=k(Hl),s=k(jg),l=k(re),c=k(ha),d=k(P4),f=A.useState(o),h=L(f,2),p=h[0],m=h[1],g=k(qg),b=k(A4),w=k(Ze),M=A.useState(!1),y=L(M,2),C=y[0],S=y[1],I=A.useState(Es(g)),_=L(I,2),O=_[0],T=_[1],P=gr()===tr.sequence,N=function(){if(d){var H=Pt[d.groupName],j=ut(ut({},p),{},z({},H,d.groupItem));return m(j),j}return p};A.useEffect(function(){m(o)},[o]),A.useEffect(function(){g&&(zn(g)===1&&i(Hg(XI(g))),T(Es(g)))},[i,g]),A.useEffect(function(){if(s!==me.Presets&&r)if(w&&d){var K=Pt[d.groupName],H="".concat(K,"Label"),j=g.map(function(ye){return ye.isNucleosideConnectedAndSelectedWithPhosphate&&H==="phosphateLabel"||ye.type===Je.Phosphate&&(H==="sugarLabel"||H==="baseLabel")?ye:ut(ut({},ye),{},z(z({},H,d.groupItem.label),"rnaBaseMonomerItem",d.groupName==="Bases"?d.groupItem:ye.rnaBaseMonomerItem))});S(!0),i(Ul(j))}else{var te=N(),Ie=p?.name;te.editedName||(Ie=Fg(te)),m(ut(ut({},te),{},{name:Ie}))}},[d?.groupItem,w]);var R=function(H){if(H===me.Presets){_s(p?.name),p&&l.events.selectPreset.dispatch(p);return}var j=p[Pt[H]];j&&nP(Le(j))},D=function(H){return function(){var j=Vu(p,H);j&&!P&&l.events.selectMonomer.dispatch(j),p[Pt[H]]&&i(Ug(Le(p[Pt[H]]))),i(Nt(H)),i($l({rnaPreset:p,isEditMode:r})),setTimeout(function(){return R(H)},100)}},F=function(H){if(r){var j=H.target.value;m(ut(ut({},p),{},{name:j.trim(),editedName:!0}))}},q=function(){zn(g)>1?i(Jt("updateSequenceInRNABuilder")):(l.events.modifySequenceInRnaBuilder.dispatch(g),Bn(i,l))},B=function(){if(p!=null&&p.name){var H=c.find(function(j){return j.name===p.name});if(H&&o.nameInList!==H.name){i(Vl(p.name));return}i(T4(p)),i(Wr(p)),P||l.events.selectPreset.dispatch(p),setTimeout(function(){_s(p.name)},0),Eh(i)}},$=function(){w?Bn(i,l):(m(o),Eh(i))},U=function(){i(nt(!0))},de=function(H){var j,te;return d&&d.groupName===H?d.groupItem.label:((j=Vu(p,H))===null||j===void 0?void 0:j.label)||((te=Vu(p,H))===null||te===void 0?void 0:te.props.MonomerName)},ke=function(H){return O?O[H]:""};A.useEffect(function(){var K=function(j){j.key==="Escape"?($(),j.preventDefault(),j.stopPropagation()):j.key==="Enter"&&(w?q():l.events.startNewSequence.dispatch({}),j.preventDefault(),j.stopPropagation())};return l?.events.keyDown.add(K),function(){l?.events.keyDown.remove(K)}},[l,g]);var ne;u&&!w?ne=v(Cr,{disabled:!gh(p),primary:!0,"data-testid":"add-to-presets-btn",onClick:B,children:"Add to Presets"}):r?ne=v(Cr,{primary:!0,disabled:w?!C:!1,"data-testid":"save-btn",onClick:w?q:B,children:w?"Update":"Save"}):ne=v(Cr,{"data-testid":"edit-btn",onClick:U,disabled:o.default,children:"Edit"});var ze=Wl();return E($I,{"data-testid":"rna-editor-expanded",className:An(w&&"rna-editor-expanded--sequence-edit-mode"),children:[ze?v(GI,{value:w?b:p?.name,placeholder:"Name your structure",disabled:w,onChange:F}):E(WI,{selected:s===me.Presets,onClick:function(){return D(me.Presets)},children:[r?v(ZI,{value:w?b:p?.name,placeholder:"Name your structure",disabled:w,onChange:F}):v(QI,{children:p?.name}),v(YI,{selected:s===me.Presets})]}),v(VI,{compact:ze,children:a.map(function(K){var H=K.groupName,j=K.iconName,te=K.testId;return v(UI,{selected:s===H,groupName:H,monomerName:w?ke(H):de(H),iconName:j,testid:te,onClick:D(H)},H)})}),E(KI,{children:[r?v(Cr,{"data-testid":"cancel-btn",onClick:$,children:"Cancel"}):v(Cr,{"data-testid":"duplicate-btn",disabled:!gh(p),onClick:function(){return n(p)},children:"Duplicate and Edit"}),ne]})]})},eP=x("div",{target:"e1ms1w5g2"})({name:"1tk8yx0",styles:"padding:8px"}),tP=x("button",{target:"e1ms1w5g1"})("width:100%;display:flex;justify-content:space-between;align-items:center;padding:8px;background-color:",function(t){return t.theme.ketcher.color.background.primary},";font-weight:",function(t){return t.theme.ketcher.font.weight.regular},";font-size:",function(t){return t.theme.ketcher.font.size.regular},";border:none;border-radius:4px;text-transform:none;cursor:pointer;&.styled-header--sequence-edit-mode{background-color:",function(t){return t.theme.ketcher.color.editMode.sequenceInRNABuilder},";}&.styled-header--expanded,&.styled-header--active-preset{border-radius:4px 4px 0 0;}"),rP=x(se,{target:"e1ms1w5g0"})("height:16px;width:16px;transform:",function(t){return t.expanded?"rotate(180deg)":"none"},";"),s0=function(e){var r=document.body.querySelector(e);r?.scrollIntoView()},_s=function(e){s0('[data-rna-preset-item-name="'.concat(e,'"]'))},nP=function(e){s0('[data-monomer-item-id="'.concat(e,'"]'))},aP=function(e){var r=e.duplicatePreset,n=k(va),a=k(mr),i=k(Ze),o=Fg(n),u=ee(),s=A.useState(!1),l=L(s,2),c=l[0],d=l[1];A.useEffect(function(){if(n){(n.name||a)&&d(!0);return}u(Gl()),u(Nt(me.Presets))},[n]),A.useEffect(function(){u($l({rnaPreset:n,isEditMode:a}))},[a]);var f=function(){d(!c),n!=null&&n.nameInList||u(nt(!0))};return E(eP,{"data-testid":"rna-editor",children:[E(tP,{className:An(i&&"styled-header--sequence-edit-mode",c&&"styled-header--expanded",n?.name&&"styled-header--active-preset"),onClick:f,"data-testid":"rna-builder-expand-button",children:["RNA Builder",v(rP,{expanded:c,name:"chevron"})]}),n&&(c?v(JI,{isEditMode:a,onDuplicate:r}):v(OI,{name:n.name,fullName:o}))]})},iP=x("div",{target:"e1ocltcl0"})({name:"16fpk5u",styles:"height:100%;width:100%;display:flex;flex-direction:column;justify-content:space-between"}),l0=function(e){var r=e.ketcher;return Tp("scrollbar-width:thin;scrollbar-color:",r.color.scroll.regular," ",r.color.scroll.inactive,";&::-webkit-scrollbar{width:4px;height:4px;background-color:",r.color.scroll.inactive,";border-radius:2px;-webkit-border-radius:2px;}&::-webkit-scrollbar-thumb{background-color:",r.color.scroll.regular,";border-radius:2px;-webkit-border-radius:2px;}&::-webkit-scrollbar-thumb:active{background-color:",r.color.scroll.regular,";}","")},oP={expandButton:"Modal-module_expandButton__J1QYl"};function Oh(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function uP(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Oh(Object(r),!0).forEach(function(n){z(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Oh(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var sP=x(q1,{target:"e45wfhi5"})({name:"dzuq2w",styles:".MuiPaper-root{min-width:304px;}"}),lP=x(j1,{target:"e45wfhi4"})(function(t){var e=t.theme;return{padding:"2px 4px 2px 12px;",display:"flex",alignItems:"center",justifyContent:"space-between",fontFamily:"".concat(e.ketcher.font.family.inter),fontSize:"".concat(e.ketcher.font.size.medium),fontWeight:500,textTransform:"capitalize",borderBottom:"1px solid rgba(202, 211, 221, 1)"}},""),cP=x("div",{target:"e45wfhi3"})({name:"10by1a4",styles:"margin-right:10px;font-size:14px"}),kh=x(se,{target:"e45wfhi2"})({name:"4jxctt",styles:"width:16px;height:16px;color:rgba(51, 51, 51, 1)"}),c0=x(D1,{target:"e45wfhi1"})("padding:0;font-size:",function(t){var e=t.theme;return e.ketcher.font.size.medium},";line-height:17px;color:#000000;",function(t){var e=t.theme;return l0(e)},";"),d0=x(L1,{target:"e45wfhi0"})("height:52px;margin:0;padding:0 12px;border-top:",function(t){var e=t.theme,r=t.withborder;return r==="true"?e.ketcher.border.small:"none"},";justify-content:flex-end;.MuiButtonBase-root{border-radius:4px;font-size:",function(t){var e=t.theme;return e.ketcher.font.size.regular},";}"),Q=function(e){var r=e.children,n=e.title,a=e.isOpen,i=e.showCloseButton,o=i===void 0?!0:i,u=e.showExpandButton,s=u===void 0?!1:u,l=e.onClose,c=e.className,d=e.modalWidth,f=e.expanded,h=f===void 0?!1:f,p=e.setExpanded,m=p===void 0?vt:p,g=e.testId,b=O1(),w=A.useMemo(function(){return{testId:g,style:uP({background:b.ketcher.color.background.primary,borderRadius:"8px",color:b.ketcher.color.text.primary},s&&{margin:"auto",width:h?"100%":d,height:h?"100%":void 0,maxWidth:"calc(min(1280px, 100%))",maxHeight:"calc(min(980px, 100%))"})}},[b.ketcher.color.text.primary,b.ketcher.color.background.canvas,h]),M=A.useMemo(function(){return{style:{background:b.ketcher.color.background.overlay,opacity:.4}}},[b.ketcher.color.background.overlay]),y={Content:null,Footer:null};return yt.Children.forEach(r,function(C){C.type===c0?y.Content=C:C.type===d0&&(y.Footer=C)}),E(sP,{BackdropProps:M,PaperProps:w,open:a,onClose:l,container:document.querySelector(qt),disableEscapeKeyDown:!o,className:c,sx:{padding:"24px"},children:[n||o||s?E(lP,{children:[v(cP,{children:n}),E("span",{children:[s&&v(oc,{title:"expand window",className:oP.expandButton,onClick:function(){m(!h)},children:v(kh,{name:h?"minimize-expansion":"expand"})}),o&&v(oc,{title:"Close window",onClick:l,"data-testid":"close-window-button",children:v(kh,{name:"close"})})]})]}):"",y.Content,y.Footer]})};Q.Content=c0;Q.Footer=d0;var dP=x("div",{target:"e117eqk610"})({name:"uawiic",styles:"display:flex;flex-direction:column;justify-content:flex-start;overflow:hidden;height:100%"}),Th=x(K1,{target:"e117eqk69"})({name:"u6kpdv",styles:"min-height:32px"}),fP=x("div",{target:"e117eqk68"})({name:"vz8pb8",styles:"flex-grow:2;min-height:32px"}),Hn=x("div",{target:"e117eqk67"})("position:relative;width:100%;display:flex;flex-direction:column;gap:8px;justify-content:start;padding:",function(t){var e=t.compact;return e?"4px":"8px"},";"),vP=x("div",{target:"e117eqk66"})({name:"6imefc",styles:"flex-grow:1;min-height:0;background-color:#f7f9fa;border-radius:4px;margin:4px 8px;padding:4px;&.first-tab{border-radius:0 4px 4px 4px;}&.last-tab{border-radius:4px 0 4px 4px;}"}),hP=x("div",{target:"e117eqk65"})("height:100%;background-color:",function(t){var e=t.theme;return e.ketcher.color.tab.content},";border-radius:2px;overflow:auto;"),Zl=x(Wn,{target:"e117eqk64"})("background-color:",function(t){var e=t.theme;return e.ketcher.color.button.transparent.active},";color:",function(t){var e=t.theme;return e.ketcher.color.text.light},";border-color:",function(t){var e=t.theme;return e.ketcher.color.text.light},";"),f0=x("div",{target:"e117eqk63"})({name:"1q5khk2",styles:"width:100%;height:100%;background-color:#eff2f594;position:absolute;top:0;left:0"}),pP=x("div",{target:"e117eqk62"})({name:"bimmx8",styles:"display:flex;justify-content:space-between;gap:8px;padding:6px 8px 0"}),mP=x("div",{target:"e117eqk61"})({name:"qnk899",styles:"position:relative;display:flex;align-items:center;&.rna-tab--selected{& button{border-radius:4px 4px 0 0;background-color:#f7f9fa;}&::after{content:'';position:absolute;bottom:-4px;left:0;right:0;height:8px;background-color:#f7f9fa;}}"}),gP=x(zs,{target:"e117eqk60"})("height:24px;min-height:24px;min-width:24px;",function(t){var e=t.selected;return e?"min-width: 104px;":""}," display:flex;flex-direction:row;gap:4px;align-items:center;justify-content:center;padding:4px;",function(t){var e=t.selected;return e?"margin-top: -8px;":""}," font-weight:400;font-size:10px;border-radius:4px;background-color:white;opacity:",function(t){var e=t.selected;return e?1:.6},";text-transform:none;&:hover{background-color:#f3f8f9;}>svg{height:16px;width:16px;color:#b4b9d6;&.MuiTab-iconWrapper{margin:0;}}");function Nh(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Rh(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Nh(Object(r),!0).forEach(function(n){z(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Nh(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var yP=function(e){var r=k(fa),n=k(pa),a=kg(r,e),i=As(a),o=e4(r),u=As(o);return A.useMemo(function(){return[{groupName:me.Presets,iconName:"preset",groups:[{groupItems:n}]},{groupName:G.SUGARS,iconName:"sugar",groups:i.filter(function(s){return Gu[s.groupTitle]===G.SUGARS})},{groupName:G.BASES,iconName:"base",groups:i.filter(function(s){return Gu[s.groupTitle]===G.BASES}).map(function(s){return Rh(Rh({},s),{},{groupItems:s.groupItems.filter(function(l){var c;return((c=l.props)===null||c===void 0?void 0:c.MonomerClass)!==et.RNA})})})},{groupName:G.PHOSPHATES,iconName:"phosphate",groups:i.filter(function(s){return Gu[s.groupTitle]===G.PHOSPHATES})},{groupName:G.NUCLEOTIDES,iconName:"nucleotide",groups:u}]},[i,n,u])},bP=function(e){var r=e.activeRnaBuilderItem,n=e.groupsData,a=e.onNewPresetClick,i=e.onSelectItem,o=e.duplicatePreset,u=e.editPreset,s=e.libraryName,l=cr(),c=k(pa),d=k(fa),f=k(mr),h=k(Hl),p=k(zg);return E(Y,{children:[v(pP,{children:n.map(function(m){var g=m.groupName,b=m.groups,w=m.iconName,M=g===r,y=Gr(d,g),C=[].concat(ue(b),ue(y)).reduce(function(I,_){return I+(_.groupItems.length||0)},0),S=M?"".concat(g," (").concat(C,")"):null;return v(mP,{className:An(M&&"rna-tab--selected"),children:v(gP,{label:S,title:g,selected:M,icon:v(se,{name:w}),onClick:function(){return l(Nt(g))},"data-testid":"summary-".concat(g)})},g)})}),n.map(function(m){var g=m.groupName,b=m.groups;if(g!==r)return null;var w=Gr(d,g),M=g===me.Presets?E(Hn,{compact:!0,children:[v(Zl,{onClick:a,children:"New Preset"}),v(Yl,{duplicatePreset:o,editPreset:u,presets:c}),f&&!h&&v(f0,{})]}):v(Hn,{compact:!0,children:E(Y,{children:[b.map(function(S){var I=S.groupItems,_=S.groupTitle;return v(lr,{title:b.length>1?_:void 0,groupName:g,items:I,selectedMonomerUniqueKey:p,onItemClick:function(T){return i(T,g)}},_)}),w.map(function(S){var I=S.groupTitle,_=S.groupItems;return v(lr,{title:I,items:_,libraryName:s,selectedMonomerUniqueKey:p,onItemClick:function(T){return i(T,g)}},I)})]})}),y=r===me.Presets,C=r===G.NUCLEOTIDES;return v(vP,{className:An(y&&"first-tab",C&&"last-tab"),children:v(hP,{children:M})},g)})]})},wP=A.memo(bP),xP=function(e){var r=e.groupName,n=e.quantity,a=e.expanded,i=e.iconName;return E(bI,{"data-testid":"summary-".concat(r),children:[v(Ps,{name:i}),E(wI,{children:[r," (",n,")"]}),v(Ps,{name:"chevron",expanded:a})]})},CP=function(e){var r=e.activeRnaBuilderItem,n=e.groupsData,a=e.newPreset,i=e.onNewPresetClick,o=e.onSelectItem,u=e.duplicatePreset,s=e.editPreset,l=e.libraryName,c=cr(),d=k(pa),f=k(fa),h=k(mr),p=k(Hl),m=k(zg),g=A.useState(r),b=L(g,2),w=b[0],M=b[1],y=function(S){w===S?M(null):(M(S),c($l({rnaPreset:a,isEditMode:h})))};return A.useEffect(function(){M(r)},[r]),v(Y,{children:n.map(function(C){var S=w===C.groupName,I=Gr(f,C.groupName),_=[].concat(ue(C.groups),ue(I)).reduce(function(P,N){return P+(N.groupItems.length||0)},0),O=v(xP,{iconName:C.iconName,groupName:C.groupName,quantity:_,expanded:S}),T=C.groupName===me.Presets?E(Hn,{children:[v(Zl,{onClick:i,children:"New Preset"}),v(Yl,{duplicatePreset:u,editPreset:s,presets:d}),h&&!p&&v(f0,{})]}):v(Hn,{children:E(Y,{children:[C.groups.map(function(P){var N=P.groupItems,R=P.groupTitle;return v(lr,{title:C.groups.length>1?R:void 0,groupName:C.groupName,items:N,selectedMonomerUniqueKey:m,onItemClick:function(F){return o(F,C.groupName)}},R)}),I.map(function(P){return v(lr,{title:P.groupTitle,items:P.groupItems,libraryName:l,selectedMonomerUniqueKey:m,onItemClick:function(R){return o(R,C.groupName)}},P.groupTitle)})]})});return C.groupName===me.Presets&&S?v(fP,{children:v(Th,{"data-testid":"styled-accordion",dataTestIdDetails:"rna-accordion-details-".concat(C.groupName),summary:O,details:T,expanded:S,onSummaryClick:function(){return y(C.groupName)}})},C.groupName):v(Th,{"data-testid":"styled-accordion",dataTestIdDetails:"rna-accordion-details-".concat(C.groupName),summary:O,details:T,expanded:S,onSummaryClick:function(){return y(C.groupName)}},C.groupName)})})},MP=A.memo(CP);function Dh(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Lh(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Dh(Object(r),!0).forEach(function(n){z(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Dh(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var SP=function(e){var r=e.view,n=e.libraryName,a=e.duplicatePreset,i=e.editPreset,o=cr(),u=k(jg),s=k(va),l=k(mr),c=k(re),d=k(Ze),f=A.useState(s),h=L(f,2),p=h[0],m=h[1];A.useEffect(function(){o(Nt(l&&s?u:me.Presets))},[l]);var g=yP(n),b=A.useCallback(function(){o(Gl()),o(Nt(me.Presets)),o(nt(!0))},[o]),w=A.useCallback(function(M,y){var C;if(o(Ug(Le(M))),!d&&!l&&c.events.selectMonomer.dispatch(M),!!l){var S=xe(M)?(C=M.monomers[0].monomerItem.props.MonomerClass)===null||C===void 0?void 0:C.toLowerCase():M.props.MonomerClass.toLowerCase(),I=Lh(Lh({},p),{},z({},S,M));m(I),o($g({groupName:y,groupItem:M})),o(Nt(y))}},[o,c,l,d,p]);return v(dP,{"data-testid":"rna-accordion",children:r==="tabs"?v(wP,{activeRnaBuilderItem:u,groupsData:g,onNewPresetClick:b,onSelectItem:w,libraryName:n,editPreset:i,duplicatePreset:a}):v(MP,{activeRnaBuilderItem:u,groupsData:g,newPreset:p,onNewPresetClick:b,onSelectItem:w,libraryName:n,editPreset:i,duplicatePreset:a})})},AP=function(e){var r=e.libraryName,n=e.duplicatePreset,a=e.editPreset,i=ee(),o=k(E4),u=k(_4),s=Wl(),l=function(){o.length>0&&i(Vl("")),u.length>0&&i(Gg(""))};return E(iP,{children:[v(aP,{duplicatePreset:n}),v(SP,{libraryName:r,duplicatePreset:n,editPreset:a,view:s?"tabs":"accordion"}),E(Q,{isOpen:!!o||!!u,title:"Error Message",onClose:l,children:[v(Q.Content,{children:E("div",{style:{padding:"12px"},children:[o&&'Preset with name "'.concat(o,'" already exists. Please choose another name.'),u&&'Preset with name "'.concat(u,`" can't be used. Because it is impossible to establish bonds between monomers. Edit it's structure or choose another one.`)]})}),v(Q.Footer,{children:v(Zl,{onClick:l,children:"Close"})})]})]})},IP=function(e,r){return[{caption:Bl,tooltip:"Favorites",component:Wu,testId:"FAVORITES-TAB",props:{libraryName:_g,duplicatePreset:e,editPreset:r}},{caption:"Peptides",component:Wu,testId:"PEPTIDES-TAB",props:{libraryName:Dr.PEPTIDE}},{caption:"RNA",testId:"RNA-TAB",component:AP,props:{libraryName:Dr.RNA,duplicatePreset:e,editPreset:r}},{caption:"CHEM",component:Wu,testId:"CHEM-TAB",props:{libraryName:Dr.CHEM}}]};function jh(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function qh(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?jh(Object(r),!0).forEach(function(n){z(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jh(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Zu="_Copy",PP=function(e){var r=e.toggleLibraryVisibility,n=A.useRef([]),a=ee(),i=k(Tg);A.useEffect(function(){a(vh(""))},[a]),k(ha,function(d){return n.current=d,!0});var o=A.useCallback(function(d){a(vh(d.target.value))},[a]),u=A.useCallback(function(d){var f="".concat(d?.name).concat(Zu),h;do h=n.current.find(function(g){return g.name===f}),h&&(f+=Zu);while(h);if(h){a(Vl(f));return}var p=h?"".concat(f).concat(Zu):f,m=qh(qh({},d),{},{name:p,nameInList:p,default:!1,favorite:!1});a(Wr(m)),a(nt(!0)),_s(d?.name)},[a]),s=A.useCallback(function(d){a(Wr(d)),a(nt(!0))},[a]),l=A.useMemo(function(){return IP(u,s)},[u,s]),c=A.useCallback(function(d,f){a(Vr(f))},[a]);return E(G4,{"data-testid":"monomer-library",children:[E(V4,{children:[E(K4,{children:[v(Y4,{name:"search"}),v(Z4,{type:"search","data-testid":"monomer-library-input",onChange:o,placeholder:"Search by name..."})]}),v(W4,{title:"Hide library",onClick:r,"data-testid":"hide-monomer-library",children:v(se,{name:"arrows-right"})})]}),v(e0,{tabs:l,selectedTabIndex:i,onChange:c})]})},EP=x("div",{target:"emj253a0"})(function(t){var e=t.theme;return{margin:0,fontSize:e.ketcher.font.size.regular,position:"absolute",top:"12px",cursor:"pointer",visibility:"visible",opacity:1,whiteSpace:"nowrap",display:"flex",alignItems:"center",lineHeight:1,userSelect:"none",backgroundColor:e.ketcher.color.button.primary.active,color:e.ketcher.color.button.text.primary,right:"12px",padding:"10px 8px",borderRadius:"4px","& > span":{display:"flex",justifyContent:"center",alignItems:"center","&.icon":{marginRight:"2px"}}}},""),_P=function(e){var r=e.onClick;return E(EP,{onClick:r,"data-testid":"show-monomer-library",children:[v("span",{className:"icon",children:v(se,{name:"arrows-left"})}),"Show Library"]})},OP=x("div",{target:"e10ckbgw0"})("display:flex;flex-direction:row;justify-content:space-between;align-items:flex-start;width:40px;height:12px;margin-top:10px;& span{display:inline-block;width:8px;height:8px;border:2px solid ",function(t){var e=t.theme;return e.ketcher.color.spinner},";border-radius:100%;box-sizing:border-box;&:nth-of-type(1){animation:bounce 1s ease-in-out infinite;}&:nth-of-type(2){animation:bounce 1s ease-in-out 0.33s infinite;}&:nth-of-type(3){animation:bounce 1s ease-in-out 0.66s infinite;}}@keyframes bounce{0%,75%,100%{-webkit-transform:translateY(0);-ms-transform:translateY(0);-o-transform:translateY(0);transform:translateY(0);}25%{-webkit-transform:translateY(-100%);-ms-transform:translateY(-100%);-o-transform:translateY(-100%);transform:translateY(-100%);}}"),ga=function(){return E(OP,{className:"loading-spinner",children:[v("span",{}),v("span",{}),v("span",{})]})},kP="file-thumbnail",TP=x("div",{target:"ep0evuw1"})({name:"1btsn9l",styles:"width:410px;min-height:23em;flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center"}),NP=x("div",{target:"ep0evuw0"})({name:"vbftiw",styles:"display:flex;flex-direction:row;align-items:center;svg{margin-right:13px;}p{color:#585858;font-size:16px;line-height:19px;}"}),RP=function(e){var r=e.fileName;return E(TP,{children:[r&&E(NP,{children:[v(se,{name:kP}),v("p",{children:r})]}),v(ga,{})]})},DP=["textLabel","iconName","disabled","disabledText"];function Fh(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Vt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Fh(Object(r),!0).forEach(function(n){z(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Fh(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var LP={width:"100%",height:"100%",display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"space-between"},jP=x(se,{target:"erk2iw51"})("filter:",function(t){var e=t.disabled;return e?"grayscale(1)":""},";opacity:",function(t){var e=t.disabled;return e?"0.6":"1"},";"),qP={backgroundColor:"#F8FEFFFF"},FP=x("div",{target:"erk2iw50"})("display:flex;flex-direction:column;align-items:center;&>span{font-size:",function(t){var e=t.theme;return e.ketcher.font.size.small},";color:",function(t){var e=t.theme;return e.ketcher.color.text.primary},";opacity:50%;}&>svg{margin-bottom:8px;}"),Bh=function(e){var r=e.textLabel,n=e.iconName,a=e.disabled,i=e.disabledText,o=Fs(e,DP),u=V1(Vt({multiple:!1,noClick:!0,disabled:a},o)),s=u.getRootProps,l=u.getInputProps,c=u.isDragActive,d=u.open,f=A.useMemo(function(){return Vt(Vt({},LP),c?qP:{})},[c]);return E("div",Vt(Vt({},s({style:f})),{},{onClick:d,children:[v("input",Vt({},l())),v(jP,{name:n,disabled:a}),a?v(BP,{children:i}):E(Y,{children:[v(FP,{children:r&&v("span",{children:r})}),v(v0,{children:"Open from file"})]})]}))},Qu={PASTE:"open-window-paste-icon",FILE:"open-window-upload-icon",IMAGE:"image-frame"},v0=x("p",{target:"e1035cyz3"})("font-size:10px;text-transform:uppercase;color:",function(t){var e=t.theme;return e.ketcher.color.text.light},";margin:0;text-align:center;line-height:12px;"),BP=x("p",{target:"e1035cyz2"})("font-size:10px;margin:0;text-align:center;color:",function(t){var e=t.theme;return e.ketcher.color.text.primary},";opacity:50%;line-height:12px;"),zP=x("div",{target:"e1035cyz1"})({name:"h9hj7s",styles:"display:flex;flex-direction:row;justify-content:space-between;align-items:flex-start;margin-bottom:20px;&>*{margin-right:18px;}& :last-child{margin-right:0;}"}),Xu=x("div",{target:"e1035cyz0"})("width:128px;height:134px;box-shadow:0 4px 12px rgba(103, 104, 132, 0.18);padding:16px;border-radius:12px;flex:1;display:flex;flex-direction:column;justify-content:space-between;align-items:center;box-sizing:border-box;position:relative;cursor:pointer;&>p{margin-top:6px;text-align:center;}svg{fill:",function(t){var e=t.theme;return e.ketcher.color.button.primary.active},";}"),HP=function(e){var r=e.selectClipboard,n=e.fileLoadHandler,a=e.errorHandler;return E(zP,{children:[E(Xu,{"data-testid":"paste-from-clipboard-button",onClick:r,children:[v(se,{name:Qu.PASTE}),v(v0,{children:"Paste from clipboard"})]}),v(Xu,{"data-testid":"open-from-file-button",children:v(Bh,{onDropAccepted:n,onDropRejected:function(o){return a("Unable to accept file(s). ".concat(o))},buttonLabel:"Open from file",textLabel:"or drag file here",iconName:Qu.FILE})}),v(Xu,{"data-testid":"open-from-image-button",children:v(Bh,{accept:"image/*",onDropAccepted:n,onDropRejected:function(o){return a("Unable to accept file(s). ".concat(o))},buttonLabel:"Open from image",textLabel:"or drag file here",iconName:Qu.IMAGE,disabled:!0,disabledText:"Image Recognition service is not available"})})]})},UP=x("textarea",{target:"e1q335jk0"})("min-width:430px;padding:12px;width:100%;height:100%;overflow:auto;white-space:pre-wrap;resize:none;box-sizing:border-box;outline:transparent;border:none;color:",function(t){var e=t.theme;return e.ketcher.color.input.text.active},";font-size:",function(t){var e=t.theme;return e.ketcher.font.size.regular},";background-color:",function(t){var e=t.theme,r=t.readOnly;return r?e.ketcher.color.input.background.disabled:e.ketcher.color.input.background.primary},";",function(t){var e=t.theme;return l0(e)},";"),h0=function(e){var r=e.value,n=e.inputHandler,a=e.readonly,i=a===void 0?!1:a,o=e.selectOnInit,u=o===void 0?!1:o,s=e.className,l=e.testId,c=A.useRef(null);return A.useEffect(function(){if(u){var d;(d=c.current)===null||d===void 0||d.select()}},[c,r,u]),v(UP,{value:r,readOnly:i,onChange:n&&function(d){return n(d.target.value)},ref:c,className:s,"data-testid":l})};function zh(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Hh(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zh(Object(r),!0).forEach(function(n){z(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zh(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var $P=x(h0,{target:"e17hogtk0"})({name:"17fmpnb",styles:"width:100%;height:320px"}),GP=function(e){if(e.isAnalyzingFile)return v(RP,{fileName:e.fileName});switch(e.currentState){case e.states.openOptions:return v(HP,Hh({},e));case e.states.textEditor:return v($P,Hh({testId:"open-structure-textarea"},e));default:return null}},VP=["label","clickHandler","children","styleType"];function Uh(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function fn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Uh(Object(r),!0).forEach(function(n){z(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Uh(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var p0={name:"zlt300",styles:"padding:5px 8px;border-radius:2px;text-transform:none;line-height:14px;font-size:12px;text-align:center;&.MuiButtonBase-root{width:unset;min-width:70px;}"},KP=x(Lp,{target:"ejign8b1"})(function(t){var e=t.theme;return{backgroundColor:e.ketcher.color.button.primary.active,border:"1px solid ".concat(e.ketcher.color.button.primary.active),color:"rgb(245, 245, 245)",fontWeight:e.ketcher.font.weight.regular,width:"62px",height:"24px","&:hover":{backgroundColor:e.ketcher.color.button.primary.hover},"&:disabled":{background:e.ketcher.color.button.primary.disabled,border:"1px solid transparent",opacity:.4}}},p0,""),WP=x(Lp,{target:"ejign8b0"})(function(t){var e=t.theme;return{backgroundColor:"transparent",border:"1px solid ".concat(e.ketcher.color.button.secondary.active),color:e.ketcher.color.button.secondary.active,fontWeight:e.ketcher.font.weight.regular,width:"72px",height:"24px","&:hover":{border:"1px solid ".concat(e.ketcher.color.button.secondary.hover),color:e.ketcher.color.button.secondary.hover},"&:disabled":{border:"1px solid ".concat(e.ketcher.color.button.secondary.disabled),color:e.ketcher.color.button.secondary.disabled},"&:clicked":{border:"1px solid ".concat(e.ketcher.color.button.secondary.clicked),color:e.ketcher.color.button.secondary.clicked}}},p0,""),Oe=function(e){var r=e.label,n=e.clickHandler,a=e.children,i=e.styleType,o=Fs(e,VP);return i==="secondary"?v(WP,fn(fn({onClick:n,title:o.title||r,role:"button"},o),{},{children:a||r})):v(KP,fn(fn({onClick:n,title:o.title||r,role:"button"},o),{},{children:a||r}))};function YP(){return new Promise(function(t,e){globalThis.FileReader?t(ZP):e(new Error("Your browser does not support opening files locally"))})}function ZP(t){return new Promise(function(e,r){var n=new FileReader;n.onload=function(){var a=n.result;t.msClose&&t.msClose(),e(a)},n.onerror=function(a){r(a)},n.readAsText(t,"UTF-8")})}var QP=x("div",{target:"efvrr8x1"})("position:relative;padding:",function(t){var e=t.currentState;return e===lt.openOptions?"10px 12px":"0"},";");x(Oe,{target:"efvrr8x0"})({name:"1tx1l5v",styles:"margin-right:auto"});x(se,{target:"e23iben1"})({name:"1ux2zfx",styles:"fill:#343434"});var XP=x(se,{target:"e23iben0"})({name:"wpnrak",styles:"user-select:none;width:16px;height:1em;display:inline-block;flex-shrink:0;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.5rem;position:absolute;right:7px;top:calc(50% - 0.5em);pointer-events:none;fill:#5b6077"}),JP=function(e){var r=e.className;return v(XP,{name:"chevron",className:r})};function $h(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Gh(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$h(Object(r),!0).forEach(function(n){z(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$h(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var eE=x(G1,{target:"e944g1i2"})({name:"1pt8ucq",styles:"width:100%;padding:0 8px;& label{font-size:12px;line-height:unset;}"}),tE={name:"af34ib",styles:"background-color:white;border-bottom-left-radius:0;border-bottom-right-radius:0"},rE=x($1,{target:"e944g1i1"})("height:24px;border:1px solid #e1e5ea;border-radius:4px;font-size:14px;background-color:white;",function(t){var e=t.open;return e&&tE}," & .MuiSelect-select{padding:0 24px 0 8px;height:100%;}& span{",function(t){var e=t.theme;return"font-size: ".concat(e.ketcher.font.size.medium)},";}& .MuiOutlinedInput-notchedOutline{border:0;}"),nE={width:"120px",backgroundColor:"white",border:"1px solid #5B6077",borderTopWidth:"0",borderRadius:"0px 0px 2px 2px",boxShadow:"0 6px 10px rgba(103, 104, 132, 0.15)"},aE=x(U1,{target:"e944g1i0"})("display:flex;flex-direction:row;justify-content:space-between;padding:0 8px;height:28px;font-size:14px;&.MuiButtonBase-root:hover{border-left:2px solid #167782;}& .MuiTypography-root{",function(t){var e=t.theme;return"font-size: ".concat(e.ketcher.font.size.medium)},";}"),m0=function(e){var r=e.options,n=e.currentSelection,a=e.selectionHandler,i=e.className,o=e.label,u=e.testId,s=e.customStylesForExpanded,l=s===void 0?{}:s,c=e.disabled,d=c===void 0?!1:c,f=A.useState(!1),h=L(f,2),p=h[0],m=h[1],g=function(C){var S=r.filter(function(I){return I.id===C})[0];return v("span",{children:S.label})},b=function(C){a(C.target.value)},w=function(C){C.type!=="keydown"&&m(!0)},M=function(){m(!1)};return E(eE,{className:i,children:[o&&v("label",{htmlFor:"fileformat",children:"File format:"}),v(rE,{value:n,onChange:b,open:p,onOpen:w,onClose:M,renderValue:g,IconComponent:JP,disabled:d,fullWidth:!0,"data-testid":u||"dropdown-select",MenuProps:{PaperProps:{style:Gh(Gh({},nE),l)},MenuListProps:{style:{padding:"0"}}},children:r.map(function(y){return v(aE,{value:y.id,"data-testid":"".concat(y.label,"-option"),children:v(B1,{primary:y.label})},y.id)})})]})},iE=x("form",{target:"el6v3ot5"})({name:"9pd72t",styles:"display:flex;flex-direction:column;height:300px"}),oE=x("div",{target:"el6v3ot4"})({name:"itz7qk",styles:"display:flex;justify-content:space-between;margin-bottom:16px"}),g0=x(m0,{target:"el6v3ot3"})(function(t){var e=t.theme;return{width:"calc(50% - 6px)",height:"28px","& .MuiOutlinedInput-root:hover:not(.Mui-disabled)":{border:"1px solid ".concat(e.ketcher.color.input.border.hover)},"& .MuiOutlinedInput-root":{border:"1px solid ".concat(e.ketcher.color.input.border.regular),backgroundColor:e.ketcher.color.background.primary,color:e.ketcher.color.text.primary,fontFamily:e.ketcher.font.family.inter}}},""),Os={border:"none"},y0=x("div",{target:"el6v3ot2"})({name:"kq43v2",styles:"position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:#fff"}),uE=x("div",{target:"el6v3ot1"})(function(t){var e=t.theme;return{height:"100%",position:"relative",border:"1px solid ".concat(e.ketcher.color.input.border.regular)}},""),sE=x("div",{target:"el6v3ot0"})(function(t){var e=t.theme;return{display:"flex",flexGrow:1,position:"relative","& button":{opacity:0,position:"absolute",right:"12px",top:"12px",borderRadius:"4px",padding:"2px",width:"28px",height:"28px","&:not(:active)":{backgroundColor:e.ketcher.color.background.primary,color:e.ketcher.color.text.primary}},"&:hover button":{opacity:1},"&:focus-within button":{opacity:0},"&:focus-within button:hover":{opacity:1}}},""),lE=x(Q,{target:"e1oaegu38"})(function(t){var e=t.modalWidth;return`
    .MuiPaper-root {
      width: `.concat(e,`;
      max-width: `).concat(e,`;
    }`)},""),cE=x("div",{target:"e1oaegu37"})({name:"kj5rtd",styles:"width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center"}),dE=x("div",{target:"e1oaegu36"})({name:"rpuipy",styles:"display:flex;height:24px;font-size:12px"}),Ql=x(g0,{target:"e1oaegu35"})({name:"7nflbq",styles:"padding:0;font-size:12px;& .MuiSelect-select{display:flex;align-items:center;padding:0 20px 0 8px;padding-right:20px !important;height:100%;}& span{font-size:12px;}"}),fE=x(Ql,{target:"e1oaegu34"})(function(){return{width:"140px"}},""),vE=x(Ql,{target:"e1oaegu33"})({name:"16zm0c",styles:"width:76px;margin-left:8px"}),hE=x(Ql,{target:"e1oaegu32"})({name:"l4tg7k",styles:"width:105px;margin-left:8px"}),pE=x("div",{target:"e1oaegu31"})({name:"oq6u0f",styles:"display:flex;gap:10px"}),Vh=x(Oe,{target:"e1oaegu30"})({name:"b9l38d",styles:"width:min-content"}),ks="ket",xn="seq",Ts="rna",b0="peptide",w0="fasta",x0="one-letter",Ns="three-letter",Kh=[{id:"ket",label:"Ket"},{id:"mol",label:"MDL Molfile V3000"},{id:"seq",label:"Sequence"},{id:"fasta",label:"FASTA"},{id:"idt",label:"IDT"},{id:"helm",label:"HELM"}],mE=[{id:Ts,label:"RNA"},{id:"dna",label:"DNA"},{id:b0,label:"Peptide"}],gE=[{id:x0,label:"1-letter code"},{id:Ns,label:"3-letter code"}],Ju=c1,lt={openOptions:"openOptions",textEditor:"textEditor"},Wh=function(e){var r=e.ketSerializer,n=e.editor,a=e.struct,i=!n.drawingEntitiesManager.hasDrawingEntities,o=r.deserializeToDrawingEntities(a);if(!o)throw new Error("Error during parsing file");o.drawingEntitiesManager.centerMacroStructure();var u=o.drawingEntitiesManager.mergeInto(n.drawingEntitiesManager),s=u.command,l=new _p(n),c=n.mode instanceof Sp,d=n.mode instanceof p1,f=n.mode instanceof m1;f&&(n.drawingEntitiesManager.recalculateAntisenseChains(),n.drawingEntitiesManager.hasAntisenseChains&&(s.merge(n.drawingEntitiesManager.applySnakeLayout(n.canvas.width.baseVal.value,!0,!0,!0)),s.setUndoOperationsByPriority())),n.drawingEntitiesManager.detectBondsOverlappedByMonomers(),n.renderersContainer.update(s),l.update(s),c&&(s.setUndoOperationReverse(),n.events.selectMode.dispatch({mode:tr.sequence,mergeWithLatestHistoryCommand:!0})),d&&(s.setUndoOperationReverse(),n.events.selectMode.dispatch({mode:tr.snake,mergeWithLatestHistoryCommand:!0})),i&&n.zoomToStructuresIfNeeded()},Yh=function(){var t=Un(Se.mark(function e(r){var n,a,i,o,u,s,l,c,d,f,h,p,m,g,b,w,M,y;return Se.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(n=r.struct,a=r.formatSelection,i=r.additionalSelection,o=r.peptideLettersFormatSelection,u=r.onCloseCallback,s=r.setIsLoading,l=r.dispatch,c=a===ks,d=a===xn,f=a===w0,h=new Cn,p=$n.provideEditorInstance(),g=n,b=function(_){var O="Convert error! "+_;l(Kr({errorMessage:O,errorTitle:d||f?"Unsupported symbols":""}))},!c){S.next=13;break}try{Wh({struct:n,ketSerializer:h,editor:p}),u()}catch{b("Error during file parsing.")}return S.abrupt("return");case 13:f||d&&o!==Ns?(m=Ju[a][i],g=g.toUpperCase()):d&&o===Ns?m=Ju.seq.peptide3Letter:m=Ju[a];case 14:return w=Bs.getIndigo(),S.prev=15,s(!0),S.next=19,w.convert({struct:g,output_format:Mt.KET,input_format:m});case 19:M=S.sent,Wh({struct:M.struct,ketSerializer:h,editor:p}),u(),S.next=29;break;case 24:S.prev=24,S.t0=S.catch(15),y=typeof S.t0=="string"?S.t0:JSON.stringify(S.t0),b(y),qr.error(S.t0);case 29:return S.prev=29,s(!1),S.finish(29);case 32:case"end":return S.stop()}},e,null,[[15,24,29,32]])}));return function(r){return t.apply(this,arguments)}}(),Zh=!1,Qh=function(e){},yE=function(e){var r=e.isModalOpen,n=e.onClose,a=ee(),i=A.useState(""),o=L(i,2),u=o[0],s=o[1],l=A.useState(""),c=L(l,2),d=c[0],f=c[1],h=A.useState(!1),p=L(h,2),m=p[0],g=p[1],b=A.useState(),w=L(b,2),M=w[0],y=w[1],C=A.useState(lt.openOptions),S=L(C,2),I=S[0],_=S[1],O=A.useState(ks),T=L(O,2),P=T[0],N=T[1],R=A.useState(Ts),D=L(R,2),F=D[0],q=D[1],B=A.useState(x0),$=L(B,2),U=$[0],de=$[1];A.useEffect(function(){var j=d?.split("."),te=j[j.length-1];if(te){var Ie=Kh.find(function(yr){return yr.id===te}),ye=Ie!=null&&Ie.id?Ie.id:xn;N(ye)}},[d]),A.useEffect(function(){YP().then(function(j){y({chosenOpener:j})})},[]);var ke=A.useCallback(function(){_(lt.openOptions),s(""),N(ks),q(Ts),n()},[n]),ne=function(te){var Ie=function(ya){s(ya),_(lt.textEditor)},ye=function(){return Qh()};f(te[0].name),M?.chosenOpener(te[0]).then(Ie,ye)},ze=function(){Yh({struct:u,formatSelection:P,additionalSelection:F,peptideLettersFormatSelection:U,onCloseCallback:ke,setIsLoading:g,dispatch:a})},K=function(){var te=$n.provideEditorInstance(),Ie=new _p(te),ye=te.drawingEntitiesManager.deleteAllEntities();Ie.update(ye),te.renderersContainer.update(ye),te.zoomToStructuresIfNeeded(),Yh({struct:u,formatSelection:P,additionalSelection:F,peptideLettersFormatSelection:U,onCloseCallback:ke,setIsLoading:g,dispatch:a})},H=function(){return E(cE,{children:[E(dE,{children:[v(fE,{options:Kh,currentSelection:P,selectionHandler:N,customStylesForExpanded:Os},P),P===xn||P===w0?v(vE,{options:mE,currentSelection:F,selectionHandler:q,customStylesForExpanded:Os,testId:"dropdown-select-type"},F):null,P===xn&&F===b0?v(hE,{options:gE,currentSelection:U,selectionHandler:de,testId:"dropdown-select-peptide-letters-format"}):null]}),E(pE,{children:[v(Vh,{disabled:!u,clickHandler:K,label:"Open as New",styleType:"secondary","data-testid":"open-as-new-button"},"openButton"),v(Vh,{disabled:!u,clickHandler:ze,label:"Add to Canvas",title:"Structure will be loaded as fragment and added to Clipboard","data-testid":"add-to-canvas-button"},"copyButton")]})]})};return E(lE,{isOpen:r,title:"Open Structure",onClose:ke,modalWidth:I===lt.textEditor?"620px":"",children:[v(Q.Content,{children:E(QP,{currentState:I,children:[v(GP,{isAnalyzingFile:Zh,fileName:d,currentState:I,states:lt,selectClipboard:function(){return _(lt.textEditor)},fileLoadHandler:ne,errorHandler:Qh,value:u,inputHandler:s}),m&&v(y0,{children:v(ga,{})})]})}),I===lt.textEditor&&!Zh?v(Q.Footer,{withborder:"true",children:H()}):v(Y,{})]})},bE=["value","id","onChange","label","type","className","inputClassName"];function Xh(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function wE(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Xh(Object(r),!0).forEach(function(n){z(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Xh(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var xE=x("label",{target:"e10m4n7r1"})(function(t){var e=t.theme;return{display:"flex",flexDirection:"column",marginRight:"8px",color:e.ketcher.color.text.primary,fontSize:"12px"}},""),CE=x("input",{target:"e10m4n7r0"})(function(t){var e=t.theme;return{height:"24px",padding:"3px 7px",border:"1px solid ".concat(e.ketcher.color.input.border.regular),fontSize:"14px",borderRadius:"4px",backgroundColor:e.ketcher.color.input.background.primary,color:e.ketcher.color.text.primary,outline:"transparent",width:"164px",letterSpacing:"normal","&:active, &:focus":{color:e.ketcher.color.input.text.active},"&:hover":{border:"1px solid ".concat(e.ketcher.color.input.border.hover)}}},""),C0=function(e){var r=e.value,n=e.id,a=e.onChange,i=e.label,o=e.type,u=e.className,s=e.inputClassName,l=Fs(e,bE),c=function(f){a(f.target.value)};return v(Y,{children:E(xE,{htmlFor:n,className:u,children:[i&&v("span",{children:i}),v(CE,wE({type:o||"text",id:n,value:r,className:s,onChange:c},l))]})})},Ue;(function(t){t.Ket="chemical/x-ket",t.Mol="chemical/x-mdl-molfile",t.HELM="chemincal/x-helm",t.Fasta="chemical/x-fasta",t.Sequence="chemical/x-sequence",t.Idt="chemical/x-idt",t.Svg="image/svg+xml"})(Ue||(Ue={}));var st=Ap(function t(e,r,n,a,i){Op(this,t),this.name=e,this.mime=r,this.extensions=n,this.supportsCoords=a||!1,this.options=i||{}}),ME={ket:new st("Ket file",Ue.Ket,[".ket"],!0,{}),mol:new st("MDL Molfile V3000",Ue.Mol,[".mol"],!0,{"molfile-saving-mode":"3000"}),fasta:new st("FASTA",Ue.Fasta,[".fasta"],!1,{}),sequence:new st("SEQUENCE",Ue.Sequence,[".seq"],!1,{}),"sequence-3-letter":new st("SEQUENCE (3-letter code)",Ue.Sequence,[".seq"],!1,{}),idt:new st("IDT",Ue.Idt,[".idt"],!1,{}),helm:new st("HELM",Ue.HELM,[".helm"]),svg:new st("SVG Document",Ue.Svg,[".svg"])},Jh=function(e){return ME[e]},SE=[{id:"ket",label:"Ket"},{id:"mol",label:"MDL Molfile V3000"},{id:"sequence",label:"Sequence (1-letter code)"},{id:"sequence-3-letter",label:"Sequence (3-letter code)"},{id:"fasta",label:"FASTA"},{id:"idt",label:"IDT"},{id:"svg",label:"SVG Document"},{id:"helm",label:"HELM"}],AE={mol:Mt.Mol,fasta:Mt.FASTA,sequence:Mt.SEQUENCE,"sequence-3-letter":Mt.PeptideSequenceThreeLetter,idt:Mt.IDT,helm:Mt.HELM},IE=x(Q,{target:"e12csxs60"})({name:"krpfk5",styles:"& div.MuiPaper-root{background:white;min-height:400px;min-width:430px;}& .MuiDialogContent-root{overflow:hidden;height:100%;}"}),PE=function(e){var r=e.onClose,n=e.isModalOpen,a=ee(),i=A.useState("ket"),o=L(i,2),u=o[0],s=o[1],l=A.useState("ketcher"),c=L(l,2),d=c[0],f=c[1],h=A.useState(""),p=L(h,2),m=p[0],g=p[1],b=A.useState(!1),w=L(b,2),M=w[0],y=w[1],C=A.useState(),S=L(C,2),I=S[0],_=S[1],O=Bs.getIndigo(),T=$n.provideEditorInstance(),P=function(){var F=Un(Se.mark(function q(B){var $,U,de,ke,ne,ze,K;return Se.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(s(B),$=new Cn,U=$.serialize(T.drawingEntitiesManager.micromoleculesHiddenEntities.clone(),T.drawingEntitiesManager),_(void 0),B!=="ket"){j.next=7;break}return g(U),j.abrupt("return");case 7:if(B!=="svg"){j.next=11;break}return de=ac(T.canvas,"preview"),_(de),j.abrupt("return");case 11:if(j.prev=11,y(!0),!(B==="fasta"||B==="sequence")){j.next=17;break}if(ke=T.drawingEntitiesManager.validateIfApplicableForFasta(),ke){j.next=17;break}throw new Error("Error during sequence type recognition(RNA, DNA or Peptide)");case 17:return j.next=19,O.convert({struct:U,output_format:AE[B]});case 19:ne=j.sent,g(ne.struct),j.next=30;break;case 23:j.prev=23,j.t0=j.catch(11),j.t0 instanceof Error?ze=j.t0.message:ze=typeof j.t0=="string"?j.t0:JSON.stringify(j.t0),K="Convert error! "+ze,a(Kr(K)),qr.error(K),s("ket");case 30:return j.prev=30,y(!1),j.finish(30);case 33:case"end":return j.stop()}},q,null,[[11,23,30,33]])}));return function(B){return F.apply(this,arguments)}}(),N=function(q){f(q)},R=function(){var q;if(u==="svg"){var B=ac(T.canvas,"file");if(!B){r();return}q=B}else q=m;var $=new Blob([q],{type:Jh(u).mime}),U=Jh(u);i1.saveAs($,"".concat(d).concat(U.extensions[0])),r()},D=function(q){q.preventDefault();try{o1()?navigator.clipboard.writeText(m):u1(q.clipboardData,{"text/plain":m})}catch(B){qr.error("copyAs.js::copyAs",B),a(Kr("This feature is not available in your browser"))}};return A.useEffect(function(){if(u==="ket"){var F=new Cn,q=F.serialize(T.drawingEntitiesManager.micromoleculesHiddenEntities.clone(),T.drawingEntitiesManager);g(q)}},[u]),E(IE,{title:"save structure",isOpen:n,onClose:r,testId:"save-structure-dialog",children:[v(Q.Content,{children:E(iE,{onSubmit:R,id:"save",children:[E(oE,{style:{padding:"12px 12px 10px"},children:[v("div",{children:v(C0,{value:d,id:"filename",onChange:N,label:"File name:","data-testid":"filename-input"})}),v(g0,{label:"File format:",options:SE,currentSelection:u,selectionHandler:P,customStylesForExpanded:Os,testId:"file-format-list"})]}),I?v(uE,{dangerouslySetInnerHTML:{__html:I},"data-testid":"preview-area"}):E(sE,{children:[v(h0,{testId:"preview-area",value:m,readonly:!0}),v(Gn,{onClick:D,iconName:"copy",title:"Copy to clipboard",testId:"copy-to-clipboard"}),M&&v(y0,{children:v(ga,{})})]})]})}),E(Q.Footer,{children:[v(Oe,{label:"Cancel",styleType:"secondary",clickHandler:r,"data-testid":"cancel-button"}),v(Oe,{label:"Save",clickHandler:R,disabled:!d,"data-testid":"save-button"})]})]})},ep=x(Oe,{target:"e1kgbmg80"})(function(){return{width:"72px"}},""),EE=x("div",{target:"e11sfr0q0"})({name:"606i4c",styles:"padding:12px"}),_E=function(e){var r=e.isModalOpen,n=e.onClose,a=ee(),i=k(Bg),o=k(re),u=A.useCallback(function(){n()},[n]),s=function(){u()},l=function(){u(),a(N4(i)),a(nt(!1)),a(Gl()),o.events.selectPreset.dispatch(null)};return E(Q,{isOpen:r,title:"Delete RNA Preset",onClose:u,children:[v(Q.Content,{children:E(EE,{"data-testid":"delete-preset-popup-content",children:[v("div",{children:"You are about to delete"}),E("div",{children:['"',i.name,'" RNA preset.']}),v("div",{children:"This operation cannot be undone."})]})}),E(Q.Footer,{children:[v(ep,{clickHandler:s,label:"Cancel",styleType:"secondary"},"cancel"),v(ep,{clickHandler:l,label:"Delete"},"delete")]})]})},OE=x("div",{target:"e1wvbgsi0"})({name:"606i4c",styles:"padding:12px"}),kE=function(e){var r=e.isModalOpen,n=e.onClose,a=ee(),i=k(qg),o=k(re),u=zn(i),s=A.useCallback(function(){n()},[n]),l=function(){Bn(a,o)},c=function(){s()},d=function(){s(),o.events.modifySequenceInRnaBuilder.dispatch(i),l()};return E(Q,{isOpen:r,title:"Update sequence",onClose:s,children:[v(Q.Content,{children:E(OE,{children:["You are going to modify ",u," nucleotides. Are you sure?"]})}),E(Q.Footer,{children:[v(Oe,{clickHandler:c,label:"Cancel",styleType:"secondary"},"cancel"),v(Oe,{clickHandler:d,label:"Yes"},"update")]})]})},TE=x("div",{target:"e1tvvbc92"})(function(){return{display:"flex",flexDirection:"column",rowGap:"2px",alignItems:"center",marginBottom:"5px"}},""),NE=x("span",{target:"e1tvvbc91"})(function(t){return{margin:0,padding:0,textAlign:"center",display:"block",font:t.theme.ketcher.font.family.inter,fontSize:t.theme.ketcher.font.size.small,fontWeight:t.theme.ketcher.font.weight.regular,color:t.disabled?"rgba(180, 185, 214, 1)":t.theme.ketcher.color.text.light}},""),RE=x("div",{target:"e1tvvbc90"})(function(){return{height:"100%"}},""),M0=function(e){return e==="O"?"OH":e},DE=x(qp,{target:"e1huhxto1"})(function(t){var e=t.theme,r=t.isExpanded;return{display:"flex",border:"1.5px solid ".concat(e.ketcher.outline.color),borderRadius:"6px",padding:5,maxHeight:"100%",minHeight:"150px",height:r?"auto":"150px",width:r?"auto":"150px",alignSelf:"stretch","& svg":{maxWidth:"fit-content",margin:"auto"}}},""),LE=x("div",{target:"e1huhxto0"})({name:"wfzm1y",styles:"display:flex;flex-wrap:wrap;justify-content:center;align-self:flex-start;width:100%;gap:7px"}),jE=x("div",{target:"e8i5wzj0"})({name:"2oefzz",styles:"display:flex;flex-direction:column;justify-content:center;align-items:center;gap:8px;padding:8px;color:#7c7c7f;border:1px solid #cad3dd;width:100%;height:100%"}),S0=function(){return E(jE,{children:[v(se,{name:"questionMark"}),"Unknown structure"]})},qE=x("div",{target:"e1q9gayd0"})(function(t){var e=t.theme,r=t.expanded;return{display:"flex",border:"1.5px solid ".concat(e.ketcher.outline.color),borderRadius:"6px",padding:5,maxHeight:"100%",minHeight:"150px",height:r?"auto":"150px",width:r?"auto":"150px",alignSelf:"stretch","& svg":{maxWidth:"fit-content",margin:"auto"}}},""),FE=function(e){var r=e.monomer,n=e.expanded,a=e.selectedAttachmentPoint,i=e.connectedAttachmentPoints,o=e.usage,u=A.useRef(null);return A.useLayoutEffect(function(){var s=u.current;if(s){var l=Er(s);if(r instanceof We){var c=(s.width.baseVal.value-s.x.baseVal.value)/2,d=(s.height.baseVal.value-s.y.baseVal.value)/2,f=new f1(c,d),h=v1.canvasToModel(f),p=new We(r.variantMonomerItem,h),m=new h1(p);m.showExternal({canvas:l,usage:o,selectedAttachmentPoint:a,connectedAttachmentPoints:i})}}},[a,i]),v(qE,{expanded:n,children:v("svg",{ref:u})})},Rs=function(e){var r=e.monomer,n=e.attachmentPoints,a=e.connectedAttachmentPoints,i=e.selectedAttachmentPoint,o=e.usage,u=e.needCache,s=e.update,l=e.expanded,c=r instanceof We,d=r.monomerItem.props.unresolved;return E(Y,{children:[c?v(FE,{monomer:r,expanded:l,selectedAttachmentPoint:i,connectedAttachmentPoints:a,usage:o}):d?v(S0,{}):v(DE,{struct:r.monomerItem.struct,options:{connectedMonomerAttachmentPoints:a,currentlySelectedMonomerAttachmentPoint:i??void 0,usageInMacromolecule:o,labelInMonomerConnectionsModal:!0,needCache:u??!1},update:s,isExpanded:l}),v(LE,{children:n})]})},tp=x("div",{target:"e14t14ao2"})(function(t){var e=t.theme,r=t.isExpanded;return{margin:0,padding:0,textAlign:"center",alignSelf:"flex-end",display:"block",font:e.ketcher.font.family.inter,fontSize:e.ketcher.font.size.regular,fontWeight:e.ketcher.font.weight.regular,flexBasis:"200px",lineHeight:"14px",maxWidth:r?void 0:"150px"}},""),BE=x("div",{target:"e14t14ao1"})(function(t){var e=t.theme;return{width:10,height:2,display:"block",color:e.ketcher.color.button.secondary.hover,backgroundColor:e.ketcher.color.button.secondary.hover,borderRadius:20,margin:"auto"}},""),zE=x("div",{target:"e14t14ao0"})(function(){return{display:"grid",gridAutoFlow:"column",gridTemplateRows:"auto auto auto",gridTemplateColumns:"1fr 10px 1fr",justifyContent:"center",alignItems:"flex-start",padding:"12px",paddingBottom:0,height:"100%",columnGap:"12px",rowGap:"8px"}},""),rp=function(e){return e instanceof We?"Ambiguous ".concat(e.monomerClass):e.monomerItem.props.Name},A0=function(e){var r=e.firstMonomer,n=e.secondMonomer,a=e.expanded,i=e.firstMonomerOverview,o=e.secondMonomerOverview,u=rp(r),s=rp(n);return E(zE,{children:[v(tp,{isExpanded:a,children:u}),i,v("span",{}),v(BE,{}),v("span",{}),v(tp,{isExpanded:a,children:s}),o]})};function np(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function HE(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?np(Object(r),!0).forEach(function(n){z(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):np(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var UE=x(Q,{target:"e1byht5d3"})({name:"1j7jcep",styles:"& .MuiPaper-root{background:#fff !important;}& .MuiDialogContent-root{overflow:hidden;}"}),$E=x(Oe,{target:"e1byht5d2"})(function(){return{width:"97px !important"}},""),GE=x(Oe,{target:"e1byht5d1"})(function(t){return{width:"97px !important",color:t.disabled?"rgba(51, 51, 51, 0.6)":"",background:t.disabled?"rgba(225, 229, 234, 1) !important":"",opacity:"1 !important",minHeight:"0"}},""),VE=x(Oe,{target:"e1byht5d0"})(function(t){return{borderRadius:5,minWidth:"45px !important",padding:"4px",border:"1px solid ".concat(t.theme.ketcher.color.border.secondary),color:t.disabled?"rgba(51, 51, 51, 0.6) !important":"",background:t.disabled?"rgba(225, 229, 234)":"",borderColor:t.disabled?"rgba(225, 229, 234) !important":""}},""),KE=function(e){var r=e.onClose,n=e.isModalOpen,a=e.firstMonomer,i=e.secondMonomer,o=e.polymerBond,u=e.isReconnectionDialog,s=k(re),l=A.useRef(o?.firstMonomerAttachmentPoint),c=A.useRef(o?.secondMonomerAttachmentPoint),d=A.useRef(a?.hasFreeAttachmentPoint||i?.hasFreeAttachmentPoint);if(!a||!i)throw new Error("Monomers must exist!");var f=A.useState(l.current||ip(a)),h=L(f,2),p=h[0],m=h[1],g=A.useState(c.current||ip(i)),b=L(g,2),w=b[0],M=b[1],y=A.useState(!1),C=L(y,2),S=C[0],I=C[1],_=function(){if(u){var P;o?.firstMonomer.setBond(l.current,o),o==null||(P=o.secondMonomer)===null||P===void 0||P.setBond(c.current,o),r()}else s.events.cancelBondCreationViaModal.dispatch(i),r()},O=function(){if(!p||!w)throw new Error("Attachment points cannot be falsy");if(p===l.current&&w===c.current){_();return}s.events.createBondViaModal.dispatch({firstMonomer:a,secondMonomer:i,firstSelectedAttachmentPoint:p,secondSelectedAttachmentPoint:w,polymerBond:o,isReconnection:u,initialFirstMonomerAttachmentPoint:l.current,initialSecondMonomerAttachmentPoint:c.current}),r()};return E(UE,{title:u?"Edit Connection Points":"Select connection points",isOpen:n,onClose:_,showExpandButton:!0,modalWidth:"358px",expanded:S,setExpanded:I,children:[v(Q.Content,{children:v(RE,{children:v(A0,{firstMonomer:a,secondMonomer:i,expanded:S,firstMonomerOverview:v(ap,{monomer:a,selectedAttachmentPoint:p,onSelectAttachmentPoint:m,expanded:S}),secondMonomerOverview:v(ap,{monomer:i,selectedAttachmentPoint:w,onSelectAttachmentPoint:M,expanded:S})})})}),E(Q.Footer,{children:[v($E,{label:"Cancel",styleType:"secondary",clickHandler:_}),v(GE,{label:u?"Reconnect":"Connect",disabled:!p||!w||!d.current,clickHandler:O})]})]})};function ap(t){var e=t.monomer,r=t.selectedAttachmentPoint,n=t.onSelectAttachmentPoint,a=t.expanded,i=a===void 0?!1:a,o=A.useState(e.attachmentPointsToBonds),u=L(o,2),s=u[0],l=u[1],c=A.useState(function(){return Ku(s)}),d=L(c,2),f=d[0],h=d[1];A.useEffect(function(){l(e.attachmentPointsToBonds)},[r]),A.useEffect(function(){var g=Ku(s);h(g)},[s]);var p=function(b){var w=e.monomerCaps,M=e instanceof We;if(!w)return M?null:"H";var y=w[b];return M0(y)},m=function(b){var w=HE({},e.attachmentPointsToBonds),M=r?w[r]:null;r&&M&&e.removeBond(M);var y=e.getPotentialBond(b);w[b]=y,l(w),n(b);var C=Ku(w);h(C)};return v(Rs,{monomer:e,connectedAttachmentPoints:f,selectedAttachmentPoint:r,usage:Mn.MonomerConnectionsModal,update:i,expanded:i,attachmentPoints:e.listOfAttachmentPoints.map(function(g){var b=!!(f.includes(g)&&g!==r);return E(TE,{children:[v(VE,{label:g,styleType:g===r?"primary":"secondary",clickHandler:function(){return m(g)},disabled:b}),v(NE,{"data-testid":"leaving-group-value",disabled:b,children:p(g)})]},g)})})}function ip(t){if(t.chosenFirstAttachmentPointForBond)return t.chosenFirstAttachmentPointForBond;if(t.chosenSecondAttachmentPointForBond)return t.chosenSecondAttachmentPointForBond;var e=Object.entries(t.attachmentPointsToBonds).filter(function(a){var i=L(a,2);i[0];var o=i[1];return o==null});if(e.length===1){var r=L(e[0],1),n=r[0];return n}return null}var WE=x("p",{target:"e1e4h5hm0"})({name:"1fayh9l",styles:"padding:12px;font-size:12px;color:#000"}),YE=function(e){var r=e.title,n=e.confirmationText,a=e.onConfirm,i=e.isModalOpen,o=e.onClose,u=function(){a(),o()};return E(Q,{isOpen:i,title:r||"Confirm your action",onClose:o,children:[v(Q.Content,{children:v(WE,{children:n})}),E(Q.Footer,{children:[v(Oe,{label:"Cancel",clickHandler:o}),v(Oe,{label:"Yes",clickHandler:u,styleType:"secondary"})]})]})},I0={open:yE,save:PE,delete:_E,updateSequenceInRNABuilder:kE,monomerConnection:KE,confirmationDialog:YE};function op(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ZE(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?op(Object(r),!0).forEach(function(n){z(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):op(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var QE=function(){var e=k(f4),r=k(d4),n=k(v4),a=ee(),i=A.useCallback(function(){a(s4())},[a]);if(!r)return null;var o=I0[r];if(!o)throw new Error("There is no modal window named ".concat(r));return n?v(o,ZE({onClose:i,isModalOpen:e},n)):v(o,{onClose:i,isModalOpen:e})},XE=x("div",{target:"e15avtnm2"})({name:"1bweptz",styles:"background-color:#333333;max-height:40px;display:flex;align-items:stretch"}),JE=x("div",{target:"e15avtnm1"})({name:"1my6l07",styles:"max-width:356px;padding:4px 10px 4px 10px;color:white;display:flex"}),e3=x(Gn,{target:"e15avtnm0"})({name:"1c8hqv0",styles:"color:white;width:24px;height:auto;display:flex;align-items:center;justify-content:center;&:hover{background-color:#585858;color:white;}svg{width:16px;height:16px;}"}),t3=function(){return E(Y,{children:[v("symbol",{id:"chem",viewBox:"0 0 59 59",width:"59",height:"59",children:v("rect",{className:"monomer-body",width:"29.5",height:"29.5","data-actual-width":"29.5","data-actual-height":"29.5",x:"0.5",y:"0.5",rx:"0.75",fill:"#F5F6F7"})}),v("symbol",{id:"chem-selection",viewBox:"0 0 59 59",width:"59",height:"59",children:v("rect",{width:"29.5",height:"29.5",x:"0.5",y:"0.5",rx:"0.75",stroke:"#0097A8",fill:"none",strokeWidth:"1.5"})})]})},r3=function(){return E(Y,{children:[v("symbol",{id:"peptide",viewBox:"0 0 70 61",width:"70",height:"61",children:v("path",{className:"monomer-body",transform:"scale(0.5)","data-actual-width":"35","data-actual-height":"30.5",d:"M16.9236 1.00466C17.2801 0.383231 17.9418 6.10888e-07 18.6583 5.98224e-07L51.3417 2.04752e-08C52.0582 7.81036e-09 52.7199 0.383234 53.0764 1.00466L69.4289 29.5047C69.7826 30.1211 69.7826 30.8789 69.4289 31.4953L53.0764 59.9953C52.7199 60.6168 52.0582 61 51.3417 61H18.6583C17.9418 61 17.2801 60.6168 16.9236 59.9953L0.571095 31.4953C0.217407 30.8789 0.217408 30.1211 0.571096 29.5047L16.9236 1.00466Z"})}),E("symbol",{id:"peptide-hover",viewBox:"0 0 70 61",width:"70",height:"61",children:[v("path",{d:"M18.2246 1.75116C18.3137 1.59581 18.4792 1.5 18.6583 1.5L51.3417 1.5C51.5208 1.5 51.6863 1.59581 51.7754 1.75116L53.06 1.01408L51.7754 1.75117L68.1279 30.2512C68.2163 30.4053 68.2163 30.5947 68.1279 30.7488L51.7754 59.2488C51.6863 59.4042 51.5208 59.5 51.3417 59.5H18.6583C18.4792 59.5 18.3137 59.4042 18.2246 59.2488L1.87215 30.7488C1.78372 30.5947 1.78372 30.4053 1.87215 30.2512L18.2246 1.75116Z",fill:"none",transform:"scale(0.5)",stroke:"#0097A8",strokeWidth:"3"})," "]}),v("symbol",{id:"modified-background",viewBox:"0 0 60 20",width:"30",height:"20",x:"2.5",y:"5",children:v("path",{xmlns:"http://www.w3.org/2000/svg",d:`M6.52702 20C5.81057 20 5.14885 19.6168 4.79229 18.9953L0.570974 11.6382C0.217285 11.0218 
           0.217285 10.2639 0.570974 9.64751L5.52999 1.00466C5.88654 0.383235 6.54827 0 7.26472 0H52.735C53.4515
           0 54.1132 0.383234 54.4698 1.00466L59.4288 9.64751C59.7825 10.2639 59.7825 11.0218 59.4288 11.6382
           L55.2075 18.9953C54.8509 19.6168 54.1892 20 53.4727 20H6.52702Z`,fillOpacity:"0.6"})})]})},n3=function(){return E(Y,{children:[v("symbol",{id:"sugar",viewBox:"0 0 70 70",width:"70",height:"70",children:v("rect",{className:"monomer-body",width:"28.5",height:"28.5","data-actual-width":"28.5","data-actual-height":"28.5",rx:"5"})}),v("symbol",{id:"sugar-selection",viewBox:"-1 -1 100 100",width:"70",height:"70",children:v("rect",{width:"39",height:"39",rx:"5",fill:"none",stroke:"#0097A8",strokeWidth:"2.5"})}),v("symbol",{id:"sugar-variant",viewBox:"0 0 72 72",width:"70",height:"70",children:v("rect",{className:"monomer-body",width:"28.5",height:"28.5","data-actual-width":"28.5","data-actual-height":"28.5",x:"0.5",y:"0.5",rx:"5",stroke:"#585858",strokeWidth:"0.5"})}),v("symbol",{id:"sugar-modified-background",viewBox:"0 0 28 10",width:"27",height:"10",x:"0.7",y:"10",children:v("path",{d:"M1.5 10C0.947715 10 0.5 9.55229 0.5 9V1C0.5 0.447715 0.947715 0 1.5 0H26.5C27.0523 0 27.5 0.447715 27.5 1V9C27.5 9.55228 27.0523 10 26.5 10H1.5Z",fill:"white",fillOpacity:"0.6"})})]})},a3=function(){return E(Y,{children:[v("symbol",{id:"phosphate",viewBox:"0 0 70 70",width:"70",height:"70",children:v("rect",{className:"monomer-body",width:"28",height:"28","data-actual-width":"28","data-actual-height":"28",rx:"15"})}),v("symbol",{id:"phosphate-selection",viewBox:"-1 -1 75 75",width:"70",height:"70",children:v("rect",{width:"28",height:"28",rx:"15",fill:"none",stroke:"#0097A8",strokeWidth:"1.5"})}),v("symbol",{id:"phosphate-variant",viewBox:"0 0 70 70",width:"70",height:"70",children:v("rect",{className:"monomer-body",width:"27",height:"27","data-actual-width":"27","data-actual-height":"27",stroke:"#585858",strokeWidth:"0.5",x:"0.5",y:"0.5",rx:"15"})}),v("symbol",{id:"phosphate-modified-background",viewBox:"0 0 28 10",width:"26",height:"10",x:"1",y:"9.5",children:v("path",{d:"M2.13388 0C1.72465 0 1.35333 0.248229 1.22109 0.635509C0.753639 2.00455 0.5 3.47265 0.5 5C0.5 6.52735 0.753639 7.99545 1.22109 9.36449C1.35333 9.75177 1.72465 10 2.13389 10H25.8661C26.2753 10 26.6467 9.75177 26.7789 9.36449C27.2464 7.99545 27.5 6.52735 27.5 5C27.5 3.47265 27.2464 2.00455 26.7789 0.635509C26.6467 0.248229 26.2753 0 25.8661 0H2.13388Z",fill:"#333333",fillOpacity:"0.6"})})]})},i3=function(){return E(Y,{children:[v("symbol",{id:"rna-base",viewBox:"-16 0 65 65",width:"65",height:"95",children:v("rect",{width:"22.5",height:"22.5","data-actual-width":"31.82","data-actual-height":"31.82",rx:"1",x:"-11.25",y:"-11.25",transform:"rotate(45)",className:"monomer-body"})}),v("symbol",{id:"rna-base-selection",viewBox:"-15.75 -0.25 65 65",width:"65",height:"95",children:v("rect",{width:"21",height:"21",rx:"1",x:"-10.5",y:"-10.5",transform:"rotate(45)",stroke:"#0097A8",strokeWidth:"1.5",fill:"none"})}),v("symbol",{id:"rna-base-variant",viewBox:"-16 0 65 65",width:"65",height:"94",children:v("rect",{width:"21.5",height:"21.5","data-actual-width":"30","data-actual-height":"30",stroke:"#585858",strokeWidth:"0.5",rx:"1",x:"-10.25",y:"-10.25",transform:"rotate(45)",className:"monomer-body"})}),v("symbol",{id:"rna-base-modified-background",viewBox:"0 0 32 10",width:"30",height:"9",x:"0.8",y:"10.8",children:v("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.30156 10C6.03634 10 5.78199 9.89464 5.59445 9.70711L1.1508 5.26346C0.760279 4.87293 0.760279 4.23977 1.1508 3.84924L4.70715 0.292893C4.89469 0.105357 5.14904 0 5.41426 0H26.5858C26.851 0 27.1054 0.105357 27.2929 0.292893L30.8493 3.84924C31.2398 4.23977 31.2398 4.87293 30.8493 5.26346L26.4056 9.70711C26.2181 9.89464 25.9637 10 25.6985 10H6.30156Z",fill:"#333333",fillOpacity:"0.6"})})]})},o3=function(){return E(Y,{children:[E("symbol",{id:"unresolved-monomer",viewBox:"0 0 59 59",width:"59",height:"59",children:[v("rect",{className:"monomer-body",width:"29.5",height:"29.5","data-actual-width":"29.5","data-actual-height":"29.5",x:"0.5",y:"0.5",rx:"1.5",stroke:"#333333"}),v("rect",{width:"29.5",height:"29.5","data-actual-width":"29.5","data-actual-height":"29.5",x:"0.5",y:"0.5",rx:"1.5",fill:"#585858"})]}),v("symbol",{id:"unresolved-monomer-hover",children:v("rect",{width:"29.5",height:"29.5",x:"0.5",y:"0.5",rx:"1.5",fill:"none",stroke:"#0097A8",strokeWidth:"1.5"})})]})},u3=function(){return E(Y,{children:[v("symbol",{id:"nucleotide",viewBox:"0 0 84 84",width:"42",height:"42",children:v("path",{className:"monomer-body","data-actual-width":"42","data-actual-height":"42",d:"M43.0152 71.4019C42.3887 71.771 41.6113 71.771 40.9848 71.4019L9.25584 52.7093C8.50744 52.2684 8.1292 51.3948 8.31974 50.5473L16.6358 13.5613C16.841 12.6485 17.6516 12 18.5871 12L65.4129 12C66.3484 12 67.159 12.6485 67.3642 13.5613L75.6803 50.5473C75.8708 51.3948 75.4926 52.2684 74.7442 52.7093L43.0152 71.4019Z",transform:"rotate(180, 42, 42)"})}),v("symbol",{id:"nucleotide-hover",viewBox:"0 0 84 84",width:"42",height:"42",children:v("path",{"data-actual-width":"42","data-actual-height":"42",d:"M43.0152 71.4019C42.3887 71.771 41.6113 71.771 40.9848 71.4019L9.25584 52.7093C8.50744 52.2684 8.1292 51.3948 8.31974 50.5473L16.6358 13.5613C16.841 12.6485 17.6516 12 18.5871 12L65.4129 12C66.3484 12 67.159 12.6485 67.3642 13.5613L75.6803 50.5473C75.8708 51.3948 75.4926 52.2684 74.7442 52.7093L43.0152 71.4019Z",transform:"rotate(180, 42, 42)",fill:"none",stroke:"#0097A8",strokeWidth:"3"})})]})},s3=function(){return E(Y,{children:[v("path",{strokeLinecap:"round",d:"M5,0 0,2.5 5,5z",id:"arrow-marker-content"}),v("marker",{id:"arrow-marker",markerHeight:"3",markerWidth:"5",orient:"auto",refX:"2.5",refY:"1.5",children:v("use",{href:"#arrow-marker-content",transform:"rotate(180 2.5 1.5) scale(1,0.6)",strokeWidth:"1.2500",fill:"black",stroke:"none"})}),v("marker",{id:"arrow-marker-arc",markerWidth:"5",markerHeight:"5",viewBox:"0 0 5 5",refX:"5",refY:"2.5",orient:"auto",children:v("use",{href:"#arrow-marker-content",transform:"rotate(180, 2.5, 2.5)",fill:"#365CFF",stroke:"none"})})]})},l3=function(){return v(Y,{children:v("symbol",{id:"sequence-start-arrow",viewBox:"0 0 65 65",width:"65",height:"95",children:v("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:v("path",{d:"M10.2802 5.09664C10.9756 5.49813 10.9756 6.50187 10.2802 6.90336L2.56467 11.3579C1.86926 11.7594 1 11.2576 1 10.4546V1.54541C1 0.742426 1.86926 0.240558 2.56467 0.642053L10.2802 5.09664Z",stroke:"#7C7C7F"})})})})},c3=x("div",{target:"e1phidy70"})({name:"1fayh9l",styles:"padding:12px;font-size:12px;color:#000"}),d3=function(){var e=ee(),r=k(p4),n=k(m4)||"Error message",a=r!=="",i=function(){e(c4())};return E(Q,{isOpen:a,title:n,onClose:i,children:[v(Q.Content,{children:v(c3,{children:r})}),v(Q.Footer,{children:v(Oe,{label:"Close",clickHandler:i})})]})},f3=x("div",{target:"embh3ih3"})(function(){return{height:"100%"}},""),v3=x("div",{target:"embh3ih2"})(function(){return{display:"flex",alignItems:"center"}},""),h3=x("div",{target:"embh3ih1"})(function(){return{background:"","&.toggler-component-wrapper--disabled":{opacity:.4,pointerEvents:"none",cursor:"default"}}},""),p3=x("svg",{target:"embh3ih0"})(function(){return{"&.handCursor":{cursor:`
      url('data:image/svg+xml;base64,PHN2ZwogICAgICAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgICAgICB3aWR0aD0iMjQiCiAgICAgICAgaGVpZ2h0PSIyNCIKICAgICAgICBmaWxsPSJub25lIgogICAgICAgIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aAogICAgICAgICAgICBmaWxsPSIjMDAwIgogICAgICAgICAgICBkPSJNMjAuNDM0IDcuNjczYy0uMS0uNi0uNzEzLTEuNzMxLTIuMzItMS43MzEtLjEyNiAwLS4yNTIuMDA3LS4zNzcuMDIzdi0uNzlhMS4wMSAxLjAxIDAgMCAwLS4wNDUtLjNjLS4xNzctLjU2NC0uODc2LTEuNjMxLTIuMjYyLTEuNjMxYTIuNTk5IDIuNTk5IDAgMCAwLS42NzYuMDg2IDIuMzk0IDIuMzk0IDAgMCAwLS4xNDYtLjIzYy0uNDUzLS42NDUtMS4xODYtMS0yLjA2My0xLS44NzcgMC0xLjU4NC4zNi0yLjAyNSAxLjAxN2EyLjQ2MSAyLjQ2MSAwIDAgMC0uMzYxLjg1IDIuNjYzIDIuNjYzIDAgMCAwLS40MDgtLjAzYy0xLjQ3NCAwLTIuMTI0IDEuMTUtMi4yNjIgMS43NTdhMS4wMzQgMS4wMzQgMCAwIDAtLjAyNC4yMjJWMTEuMWwtLjEzLS4xYy0uNTg4LS41LTIuMDM0LTEuMTIxLTMuMzkxLjAyOS0xLjM1NyAxLjE1LTEuMDE1IDIuNjY0LS40MzEgMy40NTIuNDUzLjc3MyA0LjUxMiA3LjQyNSAxMC4yMjMgNy40MjUgMy4yNSAwIDQuOTEtMS41MTIgNS43MjktMi43ODFhNi4yOTEgNi4yOTEgMCAwIDAgLjk4LTIuOFY3LjgzOGMuMDAxLS4wNTYtLjAwMy0uMTEtLjAxMS0uMTY1WiIKICAgIC8+CiAgICA8cGF0aAogICAgICAgICAgICBmaWxsPSIjZmZmIgogICAgICAgICAgICBzdHJva2U9IiNmZmYiCiAgICAgICAgICAgIGQ9Ik0xOC40NDggMTYuMjE1YTQuNDc0IDQuNDc0IDAgMCAxLS43IDEuODg3Yy0uODA1IDEuMi0yLjE1MyAxLjgtNC4wMDggMS44LTQuNzY4IDAtOC40ODQtNi40MTItOC41Mi02LjQ3NmEuNjY5LjY2OSAwIDAgMC0uMDktLjEyNmMtLjI5NC0uNDA4IDAtLjY1NS4xMDctLjc0OC4yNjctLjIyNy41NC0uMjM3LjgxLS4wMzFsMS43NyAxLjQ1MmExIDEgMCAwIDAgMS42NDQtLjc2M1Y2LjA4YS4yODcuMjg3IDAgMCAxIC4yOS0uMTQ4LjQ0LjQ0IDAgMCAxIC4zNzIuMTZ2NC43YTEgMSAwIDEgMCAyIDB2LTYuNDVjLjA2OC0uMjQ4LjMtLjI0OC40MjItLjI0OC4yIDAgLjQxNC4wMzIuNDgyLjI1NXY2LjQ0YTEgMSAwIDEgMCAyIDB2LTUuMmEuNzUuNzUgMCAwIDEgLjA3NC0uMTljLjA0OS0uMDgxLjEwOC0uMTUuMzI1LS4xNWEuMzUuMzUgMCAwIDEgLjMwNy4xNXY1LjM5YTEgMSAwIDEgMCAyIDBWOC4wNDdhLjU4My41ODMgMCAwIDEgLjM3Ny0uMWMuMDY1IDAgLjI1OC4wMDYuMzM0LjA3OGwuMDA0IDguMTlaIgogICAgLz4KPC9zdmc+Cg=='),
      auto
    `},"&.handCursorGrabbing":{cursor:`
      url('data:image/svg+xml;base64,PHN2ZwogICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICAgd2lkdGg9IjI0IgogICAgaGVpZ2h0PSIyNCIKICAgIGZpbGw9Im5vbmUiCiAgICB2aWV3Qm94PSIwIDAgMzAgMzAiCiAgPgogICAgPHBhdGgKICAgICAgZmlsbD0iI2ZmZiIKICAgICAgZD0iTTEwLjc0NCAzQzguODkgMyA3LjM4NCA0LjUyNSA3LjM4NCA2LjR2LjIyaC0uMDEyYy0xLjk5NyAwLTMuNjIyIDEuNjAyLTMuNjIyIDMuNTY4bC4wMDEgNy4wMmMwIDEuNzcgMS41MTIgMy41MTUgMy4xMTIgNS4zNjEuNzIuODMgMS45MTkgMi4yMTYgMi4wMzQgMi43MzF2MS41MjJoMTMuNDQydi0xLjU1NGMwLS41OS42MTgtMS43NyAxLjE2My0yLjgxLjkzOC0xLjc4OSAxLjk5OC0zLjgxNSAxLjk5OC01Ljk5MSAwLTMuMjU4LS4wMS02LjI0OC0uMDEtNi4yNDggMC0xLjY5Ni0xLjM5LTMuMDgtMy4xLTMuMDgtLjIwMyAwLS40LjAyLS41OTIuMDU3YTMuNjUgMy42NSAwIDAgMC0zLjAzMy0xLjYwN2MtLjM2NyAwLS43Mi4wNTMtMS4wNTUuMTUzYTMuNjM2IDMuNjM2IDAgMCAwLTMuMDktMS43MDVjLS40NDQgMC0uODcuMDgtMS4yNjQuMjI1QTMuMzQ1IDMuMzQ1IDAgMCAwIDEwLjc0NCAzWiIKICAgIC8+CiAgICA8cGF0aAogICAgICBmaWxsPSIjMDAwIgogICAgICBkPSJNMTAuNzQ0IDQuNTU0YzEgMCAxLjgwOC44MjYgMS44MDggMS44NDV2MS4xOTdjMC0xLjEwOS45MjctMi4wMDggMi4wNjgtMi4wMDggMS4xNDMgMCAyLjA2OC45IDIuMDY4IDIuMDA4djEuNTUyYzAtMS4xMS45My0yLjAwOCAyLjA3Ny0yLjAwOCAxLjE0NyAwIDIuMDc2Ljg5OSAyLjA3NiAyLjAwOHYxLjA2OEExLjU0IDEuNTQgMCAwIDEgMjIuMzkgOC42OWMuODU2IDAgMS41NDguNjg0IDEuNTQ4IDEuNTMgMCAwIC4wMSAyLjk4OC4wMSA2LjI0NCAwIDMuMjU3LTMuMTYxIDYuNjM2LTMuMTYxIDguODAySDEwLjQ1YzAtMS45NC01LjE0Ni01Ljc3My01LjE0Ni04LjA2MXYtNy4wMmMwLTEuMTEyLjkyNi0yLjAxNCAyLjA3LTIuMDE1djQuMDUxYzAgLjM0Mi4zNS42Mi43ODEuNjIuNDMyIDAgLjc4Mi0uMjc4Ljc4Mi0uNjJWNi40YzAtMS4wMi44MDktMS44NDUgMS44MDctMS44NDVabTAtMS41NTRDOC44OSAzIDcuMzg0IDQuNTI1IDcuMzg0IDYuNHYuMjJoLS4wMTJjLTEuOTk3IDAtMy42MjIgMS42MDItMy42MjIgMy41NjhsLjAwMSA3LjAyYzAgMS43NyAxLjUxMiAzLjUxNSAzLjExMiA1LjM2MS43Mi44MyAxLjkxOSAyLjIxNiAyLjAzNCAyLjczMXYxLjUyMmgxMy40NDJ2LTEuNTU0YzAtLjU5LjYxOC0xLjc3IDEuMTYzLTIuODEuOTM4LTEuNzg5IDEuOTk4LTMuODE1IDEuOTk4LTUuOTkxIDAtMy4yNTgtLjAxLTYuMjQ4LS4wMS02LjI0OCAwLTEuNjk2LTEuMzktMy4wOC0zLjEtMy4wOC0uMjAzIDAtLjQuMDItLjU5Mi4wNTdhMy42NSAzLjY1IDAgMCAwLTMuMDMzLTEuNjA3Yy0uMzY3IDAtLjcyLjA1My0xLjA1NS4xNTNhMy42MzYgMy42MzYgMCAwIDAtMy4wOS0xLjcwNWMtLjQ0NCAwLS44Ny4wOC0xLjI2NC4yMjVBMy4zNDUgMy4zNDUgMCAwIDAgMTAuNzQ0IDNaIgogICAgLz4KICA8L3N2Zz4='),
      auto
    `}}},"");function m3(){var t=bp.getKetcher(),e=A.useState(!1),r=L(e,2),n=r[0],a=r[1],i=A.useCallback(function(){return a(!0)},[a]),o=A.useCallback(function(){return a(!1)},[a]);return A.useEffect(function(){return t.eventBus.addListener($t.LOADING,i),t.eventBus.addListener($t.SUCCESS,o),t.eventBus.addListener($t.FAILURE,o),function(){t.eventBus.removeListener($t.LOADING,i),t.eventBus.removeListener($t.SUCCESS,o),t.eventBus.removeListener($t.FAILURE,o)}},[t.eventBus,o,i]),n}function up(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function sp(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?up(Object(r),!0).forEach(function(n){z(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):up(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function g3(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=y3(t))||e){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(l){throw l},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,o=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var l=r.next();return o=l.done,l},e:function(l){u=!0,i=l},f:function(){try{o||r.return==null||r.return()}finally{if(u)throw i}}}}function y3(t,e){if(t){if(typeof t=="string")return lp(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?lp(t,e):void 0}}function lp(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function b3(){var t=ee(),e=k(re);A.useEffect(function(){if(e){var r=e.monomersLibrary,n=e.defaultRnaPresetsLibraryItems,a=ue(Mh(r,n,!0)),i=sr(),o=[],u=a.map(function(h){return h.name});if(i){var s=g3(i),l;try{for(s.s();!(l=s.n()).done;){for(var c=l.value,d=0,f=c.name;u.includes(f);)d++,f="".concat(c.name).concat("_Copy".repeat(d));f!==c.name&&Dg(sp(sp({},c),{},{name:f}))}}catch(h){s.e(h)}finally{s.f()}i=sr(),o=Mh(r,i)}return t(Is(r)),t(n4(null)),t(R4(a)),i&&t(D4(o)),t(q4()),function(){t(Is([])),t(F4())}}},[e])}var w3=x("div",{target:"ex562360"})({name:"1vtgpt7",styles:"position:absolute;top:0;left:0;height:100%;width:100%;display:flex;justify-content:center;align-items:center"}),x3=function(){return v(w3,{children:v(ga,{})})},C3=function(e){e.requestFullscreen&&e.requestFullscreen()||e.msRequestFullscreen&&e.msRequestFullscreen()||e.mozRequestFullScreen&&e.mozRequestFullScreen()||e.webkitRequestFullscreen&&e.webkitRequestFullscreen()},M3=function(){document.exitFullscreen&&document.exitFullscreen()||document.msExitFullscreen&&document.msExitFullscreen()||document.mozCancelFullScreen&&document.mozCancelFullScreen()||document.webkitExitFullscreen&&document.webkitExitFullscreen()},S3=function(){return!!(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)},A3=x("div",{target:"e1yct69a0"})({name:"14ocoqf",styles:"display:flex;& svg:first-of-type{display:flex;justify-content:center;align-items:center;width:24px;height:24px;padding:2px;border-radius:4px;}"}),I3=function(e){var r=A.useState(S3()),n=L(r,2),a=n[0],i=n[1],o=function(){var s=document.querySelector(qt)||document.documentElement;a?M3():C3(s),i(!a)};return v(A3,{className:e.className,children:v(Gn,{onClick:o,iconName:a?"fullscreen-exit":"fullscreen-enter",testId:"fullscreen-mode-button"})})},P0=function(){return yt.useContext(Kl)},P3=x(Gn,{target:"e1erwxoo0"})({name:"1y95nj0",styles:"margin:2px;outline:none"});function Xl(){var t;(t=document.activeElement)===null||t===void 0||t.blur()}var E3=x(Kn,{target:"e1ann9o40"})({name:"2gmlyg",styles:"display:flex;justify-content:space-between;font-weight:400;font-size:12px;line-height:14px;padding:7px 8px;text-transform:none;color:#333333;width:max-content"}),Ds=function(e){var r=e.itemId,n=e.title,a=n===void 0?"":n,i=e.disabled,o=e.testId,u=e.onClick,s=e.type,l=s===void 0?"icon-button":s,c=P0(),d=c.isActive,f=c.activate,h=A.useCallback(function(){f(r),Xl(),u&&u()},[f,r]),p=d(r),m=p?" active":"";return v(Y,{children:l==="icon-button"?v(P3,{title:a,className:r+m,isActive:p,onClick:h,iconName:r,testId:o,disabled:i}):v(E3,{title:a,onClick:h,disabled:i,"data-testid":o,children:a})})},_3=x(se,{shouldForwardProp:function(e){return e!=="isActive"},target:"e13kdqxv4"})("position:absolute;height:7px;width:7px;right:3px;bottom:3px;cursor:pointer;path{fill:",function(t){var e=t.isActive;return e?"white":void 0},";}"),O3=x("div",{target:"e13kdqxv3"})({name:"k5saax",styles:"display:flex;position:relative;align-items:center;&:active{.dropdown{fill:white;}}"}),k3=x("div",{target:"e13kdqxv2"})("display:flex;position:absolute;left:",function(t){var e=t.isVertical;return e?"-34px":"5px"},";top:",function(t){var e=t.isVertical,r=t.islayoutModeButton;return e&&r?"24px":e?"38px":"0px"},";border-radius:4px;flex-direction:",function(t){var e=t.isVertical;return e?"column":"row"},";z-index:1;background-color:white;padding:2px;"),T3=x(W1,{target:"e13kdqxv1"})({name:"bjn8wh",styles:"position:relative"}),N3=x("div",{target:"e13kdqxv0"})({name:"a1qh1t",styles:"display:flex;align-items:center;position:relative;width:32px;height:32px;padding:0;justify-content:center;border-radius:2px"}),R3=function(e){var r=e.children,n=e.vertical,a=n===void 0?!1:n,i=e.disabled,o=i===void 0?!1:i,u=e.needOpenByMenuItemClick,s=u===void 0?!1:u,l=e.testId,c=e.layoutModeButton,d=c===void 0?!1:c,f=e.generalTitle,h=e.activeItem,p=A.useState(!1),m=L(p,2),g=m[0],b=m[1],w=P0(),M=w.isActive,y=function(){o||b(function(D){return!D})},C=function(){g&&b(!1)},S=yt.Children.map(r,function(R){return R.type===Ds?R:null}),I=S.map(function(R){return R.props.itemId}).filter(function(R){return R}),_=I.filter(function(R){return M(R)}),O=h??(_.length?_[0]:I[0]),T=S.find(function(R){return R.props.itemId===O}),P=T?.props.testId,N=f??T?.props.title;return E(O3,{"data-testid":l,children:[E(N3,{children:[v(Ds,{disabled:o,itemId:O,title:N,testId:P,onClick:s?y:vt}),g||v(_3,{className:"dropdown",name:"dropdown",onClick:y,isActive:M(O),dataTestId:"dropdown-expand"})]}),v(T3,{in:g,timeout:"auto",unmountOnExit:!0,onClick:C,children:v(Y1,{onClickAway:C,children:v(k3,{isVertical:a,islayoutModeButton:d,"data-testId":"multi-tool-dropdown",children:S.map(function(R){return R})})})})]})},D3=x("div",{target:"e1fh0ozy3"})(function(t){var e=t.theme,r=t.isHorizontal;return{backgroundColor:e.ketcher.color.background.primary,borderRadius:"4px",display:"flex",flexDirection:r?"row":"column"}},""),L3=x("hr",{target:"e1fh0ozy2"})("width:18px;margin:6px 0;align-self:center;border-width:thin 0px 0px 0px;border-style:solid;border-color:",function(t){var e=t.theme;return e.ketcher.color.divider},";"),E0=x("hr",{target:"e1fh0ozy1"})("height:18px;margin:0px 6px;align-self:center;border-width:0px thin 0px 0px;border-style:solid;border-color:",function(t){var e=t.theme;return e.ketcher.color.divider},";"),j3=x("div",{target:"e1fh0ozy0"})(function(t){var e=t.theme,r=t.isHorizontal;return{display:"flex",flexDirection:r?"row":"column",flexWrap:"nowrap",alignItems:"center",backgroundColor:e.ketcher.color.background.primary,borderRadius:"2px",width:r?void 0:"32px",marginBottom:r?void 0:"8px","> :last-child":r?void 0:{marginBottom:0}}},""),_0=function(e){var r=e.children,n=e.divider,a=n===void 0?!1:n,i=e.isHorizontal,o=yt.Children.map(r,function(u){return u});return E(Y,{children:[v(j3,{isHorizontal:i,children:o.map(function(u){return u})}),a&&(i?v(E0,{}):v(L3,{}))]})},W=function(e){var r=e.children,n=e.onItemClick,a=e.activeMenuItems,i=e.testId,o=e.isHorizontal,u=yt.useMemo(function(){return{isActive:function(c){return a?a.includes(c):!1},activate:function(c){n(c)}}},[a,n]),s=yt.Children.map(r,function(l){return l.type===_0?l:null});return v(Kl.Provider,{value:u,children:v(D3,{"data-testid":i,isHorizontal:o,children:s.map(function(l){return l})})})};W.Group=_0;W.Item=Ds;W.Submenu=R3;var q3=function(){var e=k(re),r=gr(),n=A.useState(r),a=L(n,2),i=a[0],o=a[1],u=k(Ze),s={isActive:function(c){return i===c},activate:function(c){c!==i&&(o(c),e.events.selectMode.dispatch(c),e.events.layoutModeChange.dispatch(c))}};return A.useEffect(function(){o(r)},[r]),v(Kl.Provider,{value:s,children:E(W.Submenu,{disabled:u,testId:"layout-mode",vertical:!0,needOpenByMenuItemClick:!0,layoutModeButton:!0,children:[v(W.Item,{itemId:"sequence-layout-mode",testId:"sequence-layout-mode",title:"Switch to sequence layout mode"}),v(W.Item,{itemId:"snake-layout-mode",testId:"snake-layout-mode",title:"Switch to snake layout mode"}),v(W.Item,{itemId:"flex-layout-mode",testId:"flex-layout-mode",title:"Switch to flex layout mode"})]})})};function F3(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=B3(t))||e){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(l){throw l},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,o=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var l=r.next();return o=l.done,l},e:function(l){u=!0,i=l},f:function(){try{o||r.return==null||r.return()}finally{if(u)throw i}}}}function B3(t,e){if(t){if(typeof t=="string")return cp(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?cp(t,e):void 0}}function cp(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var z3=function(e){var r=[],n=F3(e),a;try{for(n.s();!(a=n.n()).done;){var i=a.value,o=i.node,u=i.nodeIndexOverall,s=i.isNucleosideConnectedAndSelectedWithPhosphate,l=i.hasR1Connection,c=i.twoStrandedNode,d=!!c?.antisenseNode;if(o instanceof Lr){var f,h,p;r.push({type:Je.Nucleotide,baseLabel:o==null||(f=o.rnaBase)===null||f===void 0?void 0:f.label,sugarLabel:o==null||(h=o.sugar)===null||h===void 0?void 0:h.label,phosphateLabel:o==null||(p=o.phosphate)===null||p===void 0?void 0:p.label,rnaBaseMonomerItem:o.rnaBase instanceof We?o.rnaBase.variantMonomerItem:o.rnaBase.monomerItem,hasR1Connection:l,nodeIndexOverall:u,hasAntisense:d})}else if(o instanceof jr){var m,g;r.push({type:Je.Nucleoside,baseLabel:o==null||(m=o.rnaBase)===null||m===void 0?void 0:m.label,sugarLabel:o==null||(g=o.sugar)===null||g===void 0?void 0:g.label,rnaBaseMonomerItem:o.rnaBase instanceof We?o.rnaBase.variantMonomerItem:o.rnaBase.monomerItem,isNucleosideConnectedAndSelectedWithPhosphate:s,hasR1Connection:l,nodeIndexOverall:u,hasAntisense:d})}else if(o?.monomer instanceof Ep){var b;r.push({type:Je.Phosphate,phosphateLabel:o==null||(b=o.monomer)===null||b===void 0?void 0:b.label,nodeIndexOverall:u,hasAntisense:d})}}}catch(w){n.e(w)}finally{n.f()}return r};function H3(t){var e=t.node;return e instanceof Lr||e instanceof jr||e?.monomer instanceof Ep}var U3=function(e){for(var r="",n=e.length===1?e[0]:ve.merge.apply(void 0,[{}].concat(ue(e))),a=0,i=["sugarLabel","baseLabel","phosphateLabel"];a<i.length;a++){var o=i[a],u=ve.get(n,o,"");o==="baseLabel"?r+="(".concat(u,")"):r+=u}return r},$3=function(e){if(e!=null&&e.length){for(var r=ve.flatten(e),n=r.length,a=zn(r),i,o=!1,u=!0,s=!1,l=!0,c=z3(r),d=0;d<c.length;d++){var f=c[d],h=c[d-1],p=f.type===Je.Nucleotide||f.type===Je.Nucleoside,m=h?.isNucleosideConnectedAndSelectedWithPhosphate;p&&(o=!0),p||m?f.hasR1Connection&&(l=!1):(l=!1,u=!1),f.hasAntisense&&(s=!0)}return n>a&&(r.every(H3)||(u=!1)),n===1||a===1&&u?i=U3(c):i=u?"".concat(a," nucleotides"):"".concat(n," elements"),{title:i,selectedSequenceLabeledNodes:c,isSelectedOnlyNucleoelements:u,isSelectedAtLeastOneNucleoelement:o,isSequenceFirstsOnlyNucleoelementsSelected:l,hasAntisense:s}}};function G3(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return t.every(function(e){return e.every(function(r){return xp(r.twoStrandedNode)})})}function dp(t){return t?.monomers.some(function(e){return e.hydrogenBonds.length!==0})}var V3=function(e){return e.map(function(r){return r.monomerItem.props.MonomerNaturalAnalogCode}).sort().join("")},fp=function(e){var r=e.monomerItem,n=r.props.MonomerNaturalAnalogCode==="A"||r.props.MonomerNaturalAnalogCode==="C"||r.props.MonomerNaturalAnalogCode==="G"||r.props.MonomerNaturalAnalogCode==="T"||r.props.MonomerNaturalAnalogCode==="U";if(n)return!0;if(!e.monomerItem.isAmbiguous||e.subtype===a1.MIXTURE)return!1;var a="ACGT",i="ACGU",o="CGT",u="CGU",s="AGT",l="AGU",c="ACT",d="ACU",f="GT",h="GU",p="AT",m="AU",g="CT",b="CU",w="AC",M="AG",y="CG",C="ACG",S=[a,i,o,u,s,l,c,d,f,h,p,m,g,b,w,M,y,C],I=V3(e.monomers);return S.some(function(_){return _===I})},ht=function(e){return e?.some(function(r){var n=r instanceof Yr&&Cp(r);return r instanceof Mp&&(r.hydrogenBonds.length>0||r.covalentBonds.length>1)||W0(r)&&!fp(r)||n&&(n.hydrogenBonds.length>0||!fp(n))})},K3=function(e){return e?.every(function(r){return r instanceof Yr?r.label===kp.SUGAR_DNA:!0})},W3=function(e){return e?.every(function(r){return r instanceof Yr?r.label===kp.SUGAR_RNA:!0})},Rt=function(e){return e?.some(function(r){return r instanceof Mp&&Y0(r)||r instanceof Yr&&Cp(r)})},oe;(function(t){t.title="sequence_menu_title",t.createRnaAntisenseStrand="create_antisense_rna_chain",t.createDnaAntisenseStrand="create_antisense_dna_chain",t.modifyInRnaBuilder="modify_in_rna_builder",t.establishHydrogenBond="establish_hydrogen_bond",t.deleteHydrogenBond="delete_hydrogen_bond",t.editSequence="edit_sequence",t.startNewSequence="start_new_sequence",t.copy="copy",t.paste="paste",t.delete="delete"})(oe||(oe={}));var Y3=function(e){var r,n=e.selections,a=k(re),i=ee(),o=$3(n),u=(n==null||(r=n.flat())===null||r===void 0?void 0:r.flatMap(function(h){return h.node.monomers}))||[],s=k(Ze),l=gr()===tr.sequence,c=[{name:oe.title,title:o?.title,isMenuTitle:!0,disabled:!0,hidden:function(p){var m=p.props;return!(m!=null&&m.sequenceItemRenderer)||!(o!=null&&o.isSelectedAtLeastOneNucleoelement)}},{name:oe.copy,title:"Copy",disabled:u?.length===0},{name:oe.paste,title:"Paste",disabled:!1,separator:!0},{name:oe.createRnaAntisenseStrand,title:"Create RNA antisense strand",disabled:ht(u),hidden:function(){return!u||!Rt(u)}},{name:oe.createDnaAntisenseStrand,title:"Create DNA antisense strand",disabled:ht(u),hidden:function(){return!u||!Rt(u)}},{name:oe.modifyInRnaBuilder,title:"Modify in RNA Builder...",disabled:!(o!=null&&o.isSelectedOnlyNucleoelements)||o.hasAntisense,hidden:function(p){var m=p.props;return!(m!=null&&m.sequenceItemRenderer)||!(o!=null&&o.isSelectedAtLeastOneNucleoelement)}},{name:oe.editSequence,title:"Edit sequence",disabled:!1,hidden:function(p){var m=p.props;return!(m!=null&&m.sequenceItemRenderer)}},{name:oe.startNewSequence,title:"Start new sequence",disabled:!1},{name:oe.establishHydrogenBond,title:"Establish Hydrogen Bonds",disabled:function(p){var m,g=p.props;return n?.length===0?xp(g==null||(m=g.sequenceItemRenderer)===null||m===void 0?void 0:m.twoStrandedNode):G3(n)},hidden:function(p){var m=p.props;return!(m!=null&&m.sequenceItemRenderer)}},{name:oe.deleteHydrogenBond,title:"Delete Hydrogen Bonds",separator:!0,disabled:function(p){var m,g=p.props;return n?.length===0?!dp(g==null||(m=g.sequenceItemRenderer)===null||m===void 0?void 0:m.node):!(n!=null&&n.some(function(b){return b.some(function(w){return dp(w.node)})}))},hidden:function(p){var m=p.props;return!(m!=null&&m.sequenceItemRenderer)}},{name:oe.delete,title:"Delete",disabled:u?.length===0}],d=function(p){var m,g=p.id,b=p.props;switch(g){case oe.modifyInRnaBuilder:a.events.turnOnSequenceEditInRNABuilderMode.dispatch(),i(Vr($r.RNA)),i(nt(!0)),i(Wr({})),i(Nt(null)),o!=null&&(m=o.selectedSequenceLabeledNodes)!==null&&m!==void 0&&m.length&&o!==null&&o!==void 0&&o.title&&(i(Hg(o?.title)),i(Ul(o?.selectedSequenceLabeledNodes)),i(k4(o?.isSequenceFirstsOnlyNucleoelementsSelected)));break;case oe.startNewSequence:a.events.startNewSequence.dispatch(b.sequenceItemRenderer);break;case oe.editSequence:a.events.editSequence.dispatch(b.sequenceItemRenderer);break;case oe.createRnaAntisenseStrand:a.events.createAntisenseChain.dispatch(!1);break;case oe.createDnaAntisenseStrand:a.events.createAntisenseChain.dispatch(!0);break;case oe.establishHydrogenBond:a.events.establishHydrogenBond.dispatch(b.sequenceItemRenderer);break;case oe.deleteHydrogenBond:{var w,M=r1.sequenceViewModel,y=M.chainsCollection.monomerToChain,C=new Map,S=n!=null&&n.length?n.reduce(function(_,O){return[].concat(ue(_),ue(O))},[]).map(function(_){return _.twoStrandedNode}):[(w=b.sequenceItemRenderer)===null||w===void 0?void 0:w.twoStrandedNode];S.forEach(function(_){if(_.antisenseChain&&_.antisenseNode&&!(_.antisenseNode instanceof n1||_.antisenseNode instanceof wp)){C.has(_.antisenseChain)||C.set(_.antisenseChain,new Set);var O=C.get(_.antisenseChain);if(!O)return;O.add(_)}});var I=!1;C.forEach(function(_,O){var T=ue(_.values())[0],P=T.chain,N=new Set(ue(_.values()).map(function(D){return D.antisenseNode})),R=O.nodes.some(function(D){return!N.has(D)&&D.monomers.some(function(F){return F.hydrogenBonds.some(function(q){var B=q.getAnotherMonomer(F),$=B&&y.get(B);return $===P})})});R||(I=!0)}),I?a.events.openConfirmationDialog.dispatch({title:"Deletion of all Hydrogen Bonds",confirmationText:"Deleting all hydrogen bonds will cause the separation of two chains. Do you wish to proceed?",onConfirm:function(){a.events.deleteHydrogenBond.dispatch(b.sequenceItemRenderer)}}):a.events.deleteHydrogenBond.dispatch(b.sequenceItemRenderer);break}case"copy":a.events.copySelectedStructure.dispatch();break;case"paste":a.events.pasteFromClipboard.dispatch();break;case"delete":a.events.deleteSelectedStructure.dispatch();break}},f=document.querySelector(qt);return f&&l&&!s?Vn.createPortal(v(ma,{id:Ke.FOR_SEQUENCE,handleMenuChange:d,menuItems:c}),f):null},Z3=x("div",{target:"e1amohl43"})("display:flex;flex-direction:column;align-items:start;gap:8px;background:",function(t){return t.theme.ketcher.color.background.primary},";border:",function(t){return t.theme.ketcher.border.regular},";border-radius:",function(t){return t.theme.ketcher.border.radius.regular},";box-shadow:",function(t){return t.theme.ketcher.shadow.regular},";"),Q3=x("p",{target:"e1amohl42"})("width:calc(100% - 16px);padding:8px;color:",function(t){return t.theme.ketcher.color.text.primary},";background-color:#cceaee;font-size:",function(t){return t.theme.ketcher.font.size.regular},";font-weight:700;word-break:break-all;text-align:left;margin:0;"),X3=x(qp,{target:"e1amohl41"})({name:"156nqlv",styles:"height:100%;width:100%;padding:0 8px"}),J3=x("div",{target:"e1amohl40"})({name:"10sp49k",styles:"width:100%;display:flex;gap:8px;padding:0 8px 4px"}),Ls=function(e){var r=e.monomerCaps,n=e.attachmentPointsToBonds;return A.useMemo(function(){var a=[],i=[];return r?(Object.entries(r).forEach(function(o){var u=L(o,2),s=u[0],l=u[1],c=!!n?.[s];c&&i.push(s);var d={id:s,label:M0(l),connected:c};a.push(d)}),{preparedAttachmentPointsData:a,connectedAttachmentPoints:i}):{preparedAttachmentPointsData:a,connectedAttachmentPoints:i}},[r,n])},e_=function(e){var r=e.idtAliases,n=e.attachmentPointsToBonds,a=e.monomerClass;return A.useMemo(function(){if(!r)return null;var i=r.base,o=r.modifications;if(n){if(!o)return i;var u=o.endpoint5,s=o.internal,l=o.endpoint3,c=n.R1,d=n.R2;if(a===et.Phosphate&&c&&!(c instanceof d1)&&c.firstMonomer instanceof Yr)return null;if(c!==null&&d===null)return l??s;if(c===null&&d!==null)return u??s;if(c!==null&&d!==null){var f;return(f=s??u)!==null&&f!==void 0?f:l}else{var h;return(h=u??s)!==null&&h!==void 0?h:l}}if(!o)return i;var p=Object.values(o).every(function(g){return g.includes(i)});if(p)return i;var m={};return Object.values(o).forEach(function(g){var b=[g.charAt(0),g.slice(1)],w=b[0],M=b[1];m[M]=m[M]?[].concat(ue(m[M]),[w]):[w]}),Object.entries(m).map(function(g){var b=L(g,2),w=b[0],M=b[1];return"(".concat(M.join(", "),")").concat(w)}).join(", ")},[r,n,a])},t_=x("div",{target:"e112ss7f3"})({name:"1m2mukt",styles:"flex:1;display:flex;align-items:center;flex-wrap:wrap;gap:8px;font-size:12px;line-height:14px"}),r_=x("div",{target:"e112ss7f2"})("display:flex;align-items:center;gap:2px;border-radius:4px;background-color:",function(t){var e=t.connected;return e?"#E1E5EA":"transparent"},";padding:",function(t){var e=t.connected;return e?"4px":"0"},";color:",function(t){var e=t.connected;return e?"#8A8B8E":"inherit"},";"),n_=x("span",{target:"e112ss7f1"})({name:"f3vz0n",styles:"font-weight:500"}),a_=x("span",{target:"e112ss7f0"})({name:"16ceglb",styles:"font-weight:600"}),i_=A.memo(function(t){var e=t.preparedAttachmentPointsData;return e.length?v(t_,{children:e.map(function(r){var n=r.id,a=r.connected,i=r.label;return E(r_,{connected:a,children:[E(n_,{children:[n,!a&&":"]}),!a&&v(a_,{children:i})]},n)})}):null}),o_=x("span",{target:"e1v1msbx3"})("max-width:",function(t){var e=t.preset;return e?"100%":"50%"},";display:flex;align-items:center;font-size:",function(t){return t.theme.ketcher.font.size.regular},";font-weight:500;line-height:normal;color:",function(t){return t.theme.ketcher.color.text.lightgrey},";padding-left:",function(t){var e=t.preset;return e?"0":"8px"},";border-left:",function(t){var e=t.preset;return e?"none":"1px solid #D9DCEA"},";"),u_=x("p",{target:"e1v1msbx2"})({name:"ti75j2",styles:"margin:0"}),s_=x("span",{target:"e1v1msbx1"})({name:"1b7n4tc",styles:"color:#7c7c7c"}),l_=x("span",{target:"e1v1msbx0"})({name:"dtvj5",styles:"color:#585858;text-wrap:wrap"}),O0=A.memo(function(t){var e=t.idtAliasesText,r=t.preset;return v(o_,{preset:r,children:E(u_,{children:[v(s_,{children:"IDT: "}),v(l_,{children:e})]})})}),c_=function(e){var r,n=e.className,a=k(rn),i=a.monomer,o=a.attachmentPointsToBonds,u=i?.props.idtAliases,s=Ls({monomerCaps:i?.props.MonomerCaps,attachmentPointsToBonds:o}),l=s.preparedAttachmentPointsData,c=s.connectedAttachmentPoints,d=e_({idtAliases:u,attachmentPointsToBonds:o,monomerClass:i?.props.MonomerClass});if(!i)return null;var f=i.props.unresolved,h=f?i.label:(r=i.struct)===null||r===void 0?void 0:r.name;return(i.struct||f)&&E(Z3,{className:n,"data-testid":"polymer-library-preview",children:[h&&v(Q3,{children:h}),f?v(S0,{}):v(X3,{struct:i.struct,options:{connectedMonomerAttachmentPoints:c,usageInMacromolecule:Mn.MonomerPreview,labelInPreview:!0,needCache:!1}}),E(J3,{children:[v(i_,{preparedAttachmentPointsData:l}),d&&v(O0,{idtAliasesText:d})]})]})},d_=x(c_,{target:"e86yc5p0"})("width:",Sn.width+"px",";height:",Sn.height+"px",";"),f_=x("div",{target:"ec5fs975"})("display:flex;flex-direction:column;align-items:center;gap:8px;padding:8px;background:",function(t){return t.theme.ketcher.color.background.primary},";border:",function(t){return t.theme.ketcher.border.regular},";border-radius:",function(t){return t.theme.ketcher.border.radius.regular},";box-shadow:",function(t){return t.theme.ketcher.shadow.regular},";"),v_=x("div",{target:"ec5fs974"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),h_=x("div",{target:"ec5fs973"})("font-size:",function(t){return t.theme.ketcher.font.size.regular},";line-height:",function(t){return t.theme.ketcher.font.size.regular},";font-weight:600;padding-right:2px;"),p_=x("div",{target:"ec5fs972"})("color:",function(t){return t.theme.ketcher.color.text.lightgrey},";font-size:",function(t){return t.theme.ketcher.font.size.regular},";font-weight:400;white-space:nowrap;"),m_=x("p",{target:"ec5fs971"})("color:",function(t){return t.theme.ketcher.color.text.primary},";font-size:",function(t){return t.theme.ketcher.font.size.regular},";font-weight:700;word-break:break-all;text-align:center;margin-top:0;margin-bottom:8px;"),g_=x(se,{target:"ec5fs970"})("height:14px;width:14px;margin-right:4px;color:",function(t){var e=t.theme;return e.ketcher.color.icon.grey},";stroke:",function(t){var e=t.theme;return e.ketcher.color.icon.grey},";"),y_=function(e){var r=e.presetName,n=e.position,a=e.idtAliases;return A.useMemo(function(){if(!r||!a)return null;if(r.includes("MOE")){var i,o,u,s=a.base,l=a.modifications,c=(i=l?.endpoint5)!==null&&i!==void 0?i:"5".concat(s),d=(o=l?.internal)!==null&&o!==void 0?o:"i".concat(s),f=(u=l?.endpoint3)!==null&&u!==void 0?u:"3".concat(s);switch(n){case $e.Library:return"".concat(c,", ").concat(d);case $e.ChainStart:return c;case $e.ChainMiddle:return d;case $e.ChainEnd:return f}}return a.base},[r,n,a])},b_=["sugar","base","phosphate"],w_=function(e){var r=e.className,n=k(rn),a=n.monomers,i=n.name,o=n.position,u=n.idtAliases,s=L(a,2),l=s[1],c=i??l?.props.Name,d=y_({presetName:c,position:o,idtAliases:u});return E(f_,{className:r,style:{alignItems:"flex-start"},"data-testid":"polymer-library-preview",children:[v(m_,{children:c}),a.map(function(f,h){return f&&E(v_,{children:[v(g_,{name:b_[h]}),v(h_,{children:f.label}),E(p_,{children:["(",f.props.Name,")"]})]},h)}),d&&v(O0,{idtAliasesText:d,preset:!0})]})},x_=x(w_,{target:"e1wupxfd0"})(""),vp=x("div",{target:"envzkt90"})("display:flex;flex-direction:column;align-items:start;gap:8px;background:",function(t){return t.theme.ketcher.color.background.primary},";border:",function(t){return t.theme.ketcher.border.regular},";border-radius:",function(t){return t.theme.ketcher.border.radius.regular},";box-shadow:",function(t){return t.theme.ketcher.shadow.regular},";"),C_=x("div",{target:"e1m0yzrp2"})(function(t){var e=t.connected,r=t.inBond,n=t.theme;return{display:"flex",flexDirection:"column",alignItems:"center",gap:"2px",color:r||!e?n.ketcher.color.text.primary:"#B4B9D6"}},""),M_=x("p",{target:"e1m0yzrp1"})(function(t){var e=t.theme;return{margin:0,fontSize:e.ketcher.font.size.small,lineHeight:"12px"}},""),S_=x("p",{target:"e1m0yzrp0"})(function(t){var e=t.inBond,r=t.theme;return{margin:0,padding:"4px",fontWeight:r.ketcher.font.weight.bold,lineHeight:"14px",borderRadius:"4px",backgroundColor:e?"#CDF1FC":"transparent"}},""),hp=function(e){var r=e.attachmentPoints,n=e.attachmentPointInBond;return v(Y,{children:r.map(function(a){return E(C_,{connected:a.connected,inBond:a.id===n,children:[v(M_,{children:a.id}),v(S_,{inBond:a.id===n,children:a.label})]},a.id)})})},A_=function(e){var r=e.className,n=k(rn),a=n.polymerBond,i=n.style,o=A.useMemo(function(){return i?x(vp,{target:"e18hk05c1"})("top:",i?.top||"",";left:",i?.left||"",";right:",i?.right||"",";"):x(vp,{target:"e18hk05c2"})("")},[i]),u=a.firstMonomer,s=a.secondMonomer,l=a.firstMonomerAttachmentPoint,c=a.secondMonomerAttachmentPoint,d=Ls({monomerCaps:u.monomerCaps,attachmentPointsToBonds:u.attachmentPointsToBonds}),f=d.preparedAttachmentPointsData,h=d.connectedAttachmentPoints,p=Ls({monomerCaps:s?.monomerCaps,attachmentPointsToBonds:s?.attachmentPointsToBonds}),m=p.preparedAttachmentPointsData,g=p.connectedAttachmentPoints;return!u||!s?null:v(o,{className:r,"data-testid":"polymer-library-preview",children:v(A0,{firstMonomer:u,secondMonomer:s,firstMonomerOverview:v(Rs,{monomer:u,usage:Mn.BondPreview,connectedAttachmentPoints:h,selectedAttachmentPoint:l,attachmentPoints:v(hp,{attachmentPoints:f,attachmentPointInBond:l})}),secondMonomerOverview:v(Rs,{monomer:s,usage:Mn.BondPreview,connectedAttachmentPoints:g,selectedAttachmentPoint:c,attachmentPoints:v(hp,{attachmentPoints:m,attachmentPointInBond:c})})})})},I_=x(A_,{target:"e18hk05c0"})("width:",Sn.widthForBond,"px;height:",Sn.heightForBond,"px;");function pp(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function P_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pp(Object(r),!0).forEach(function(n){z(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pp(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var E_=x("div",{target:"e88xzqx0"})("display:inline-block;position:absolute;background:",function(t){var e=t.theme;return e.ketcher.color.background.primary},";z-index:",function(t){var e=t.theme;return e.ketcher.zIndex.overlay},";"),__=function(){var e=k(rn),r=A.useRef(null),n=A.useState(!1),a=L(n,2),i=a[0],o=a[1];return A.useEffect(function(){if(!(!r.current||e.style))if(e&&e.type){var u,s,l;r.current.setAttribute("style",""),o(!0);var c=5,d=(u=r.current)===null||u===void 0?void 0:u.getBoundingClientRect(),f=d?.height||0,h=d?.width||0,p=(s=fe.instance)===null||s===void 0||(s=s.canvasWrapper.node())===null||s===void 0?void 0:s.getBoundingClientRect(),m=p?.bottom||0,g=p?.left||0,b=p?.right||0,w=(l=e.target)===null||l===void 0?void 0:l.getBoundingClientRect(),M=w?.top||0,y=w?.bottom||0,C=w?.left||0,S=w?.width||0,I=C-S/2,_=M-f-c,O=y+c,T=C+S/2-h/2;if(M>f+c||y+f>m&&y>m/2?r.current.style.top="".concat(_,"px"):r.current.style.top="".concat(O,"px"),I>h/2&&I+h/2<b)r.current.style.left="".concat(T,"px");else if(I<h/2)r.current.style.left="".concat(g,"px");else{var P=10;r.current.style.left="".concat(b-h-P,"px")}}else i&&(o(!1),r.current.setAttribute("style",""))},[e]),e?E(E_,{ref:r,style:P_({},e?.style),children:[e.type===ce.Monomer&&v(d_,{}),e.type===ce.Preset&&v(x_,{}),e.type===ce.Bond&&v(I_,{}),e.type===ce.AmbiguousMonomer&&v(_1,{preview:e})]}):null},es=x(Kn,{target:"e1brfei30"})(function(t){var e=t.theme,r=t.variant;return{color:r==="outlined"?e.ketcher.color.text.primary:e.ketcher.color.button.text.primary,boxShadow:"none",transition:"none",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",padding:"4px 8px",border:r==="outlined"?e.ketcher.outline.small:"none",background:r==="outlined"?e.ketcher.color.background.primary:e.ketcher.color.button.group.active,borderRadius:e.ketcher.border.radius.regular,textTransform:"none",fontSize:e.ketcher.font.size.regular,fontWeight:e.ketcher.font.weight.regular,":hover":{color:r==="outlined"?e.ketcher.color.text.dark:e.ketcher.color.button.text.primary,background:r==="outlined"?e.ketcher.color.background.primary:e.ketcher.color.button.group.hover,boxShadow:"none"},":disabled":{cursor:"auto",background:"#e1e5ea",outline:"none"}}},""),O_=function(){var e=k(re),r=A.useState(e?.events.changeSequenceTypeEnterMode),n=L(r,2),a=n[0],i=n[1],o=A.useState(!1),u=L(o,2),s=u[0],l=u[1],c=k(Ze),d=gr(),f=!!c,h=ee(),p=function(b){var w=X0(b)==="object"?b.mode:b;l(w==="sequence-layout-mode")};A.useEffect(function(){return e?.events.selectMode.add(p),e?.events.changeSequenceTypeEnterMode.add(function(g){h(Vr(g===Dr.PEPTIDE?$r.PEPTIDES:$r.RNA)),i(g)}),e?.events.changeSequenceTypeEnterMode.dispatch(He.RNA),function(){e?.events.selectMode.remove(p)}},[e]),A.useEffect(function(){p(d)},[d]);var m=function(b){e.events.changeSequenceTypeEnterMode.dispatch(b)};return s?v(Y,{children:v(Rp,{sx:{mr:1,ml:1},children:E(I1,{disabled:f,children:[v(es,{"data-testid":"".concat(He.RNA,"Btn"),title:"RNA (Ctrl+Alt+R)",variant:a===He.RNA?"contained":"outlined",onClick:function(){return m(He.RNA)},children:"RNA"}),v(es,{"data-testid":"".concat(He.DNA,"Btn"),title:"DNA (Ctrl+Alt+D)",variant:a===He.DNA?"contained":"outlined",onClick:function(){return m(He.DNA)},children:"DNA"}),v(es,{"data-testid":"".concat(He.PEPTIDE,"Btn"),title:"Peptides (Ctrl+Alt+P)",variant:a===He.PEPTIDE?"contained":"outlined",onClick:function(){return m(He.PEPTIDE)},children:"PEP"})]})})}):null},k0=function(){var e=ee(),r=k(re),n=k(Ll),a=k(jl),i=k(ql),o=k(Fl);return function(){var u=Un(Se.mark(function s(l){var c,d,f,h,p,m,g,b,w,M,y;return Se.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(!(!r||l)){S.next=2;break}return S.abrupt("return");case 2:if(d=Bs.getIndigo(),f=r.drawingEntitiesManager.filterSelection(),h=new Cn,p=f.hasDrawingEntities?f:r.drawingEntitiesManager,m=e1.fromMonomers(ue(p.monomers.values())),g=(c=m.firstNode)===null||c===void 0?void 0:c.monomer,b=!g||m.chains.reduce(function(I,_){return I+_.monomers.length},0)<=t1(g).length,!(!p.hasDrawingEntities||!b)){S.next=12;break}return e($u(void 0)),S.abrupt("return");case 12:return w=h.serialize(new J0,p,void 0,!1),S.next=15,d.calculateMacromoleculeProperties({struct:w},{upc:i/uh[n],nac:o/uh[a]});case 15:M=S.sent;try{y=M.properties&&JSON.parse(M.properties),e($u(y))}catch(I){qr.error("Error during parsing macromolecule properties: ",I),e($u(void 0))}case 17:case"end":return S.stop()}},s)}));return function(s){return u.apply(this,arguments)}}()},ts="Other",rs=function(e,r){var n,a=e==null||(n=e.monomerCount)===null||n===void 0?void 0:n[r];return a&&Object.keys(a).length>0},k_=x("div",{target:"eifx56c28"})(function(t){var e=t.hasError;return{width:"100%",height:e?"124px":"177px",position:"relative",backgroundColor:"white",padding:"2px 0",borderRadius:"8px 8px",overflow:"hidden",boxShadow:"0px 2px 5px rgba(103, 104, 132, 0.15)"}},""),T_=x("div",{target:"eifx56c27"})(function(){return{display:"flex"}},""),N_=x("div",{target:"eifx56c26"})(function(){return{flex:1,display:"flex",justifyContent:"center"}},""),R_=x(se,{target:"eifx56c25"})(function(){return{display:"flex",alignItems:"center",width:"12px",height:"12px",padding:"2px 6px",cursor:"pointer"}},""),D_=x("div",{target:"eifx56c24"})(function(){return{display:"flex",height:"25px",alignItems:"center",padding:"0 8px"}},""),L_=x("div",{target:"eifx56c23"})(function(){return{display:"flex",alignItems:"center",fontSize:"14px",fontWeight:"700",padding:"0 8px",color:"#585858"}},""),j_=x("div",{target:"eifx56c22"})(function(){return{display:"flex",alignItems:"center",height:"24px",borderLeft:"1px solid #CAD3DD",color:"#585858"}},""),q_=x("div",{target:"eifx56c21"})(function(){return{fontSize:"14px",fontWeight:"700",padding:"0 8px"}},""),F_=x("div",{target:"eifx56c20"})(function(){return{width:"100%",height:"100%",top:"-25px",position:"relative"}},""),T0=x("div",{target:"eifx56c19"})(function(){return{width:"100%",padding:"0 4px 4px"}},""),N0=x("div",{target:"eifx56c18"})(function(){return{display:"flex",width:"100%",height:"74px",flexDirection:"column",justifyContent:"center",alignItems:"center"}},""),R0=x("div",{target:"eifx56c17"})(function(){return{fontSize:"14px"}},""),D0=x("div",{target:"eifx56c16"})(function(){return{fontSize:"12px"}},""),L0=x("div",{target:"eifx56c15"})(function(){return{display:"flex",padding:"4px 0px",height:"32px",gap:"12px"}},""),B_=x("div",{target:"eifx56c14"})(function(){return{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"0 2px"}},""),z_=x("div",{target:"eifx56c13"})(function(){return{height:"90px",backgroundColor:"white",borderRadius:"8px",padding:"5px"}},""),H_=x("div",{target:"eifx56c12"})(function(){return{display:"flex",justifyContent:"space-between"}},""),U_=x("div",{target:"eifx56c11"})(function(){return{display:"grid",gridTemplateColumns:"2fr 1fr"}},""),$_=x("div",{target:"eifx56c10"})(function(t){var e=t.disabled;return{display:"flex",alignItems:"center",padding:"0 0 0 6px",pointerEvents:e?"none":"auto",opacity:e?.5:1}},""),G_=x("div",{target:"eifx56c9"})(function(){return{fontSize:"10px",paddingRight:"5px",whiteSpace:"nowrap"}},""),V_=x("div",{target:"eifx56c8"})(function(){return{fontSize:"14px",fontWeight:"700"}},""),K_=x(se,{target:"eifx56c7"})(function(){return{width:"20px",height:"20px"}},""),W_=x("div",{target:"eifx56c6"})(function(){return{display:"flex",alignItems:"center"}},""),j0=x(m0,{target:"eifx56c5"})(function(){return{position:"relative",padding:"0 0 0 5px",zIndex:1}},""),q0="text-input-field-input",Y_=x(C0,{target:"eifx56c4"})(function(){return z({margin:0},".".concat(q0),{width:"60px","::-webkit-inner-spin-button":{WebkitAppearance:"none",margin:0},"::-webkit-outer-spin-button":{WebkitAppearance:"none",margin:0},MozAppearance:"textfield"})},""),Z_=x("div",{target:"eifx56c3"})(function(){return{display:"grid",gridTemplateColumns:"repeat(8, 1fr)",gap:"4px 6px",width:"100%",backgroundColor:"white",borderRadius:"8px",padding:"6px",height:"90px",alignContent:"flex-start"}},""),Q_=x("div",{target:"eifx56c2"})("display:flex;position:relative;justify-content:space-between;background-color:#eff2f5;padding:4px 6px;font-weight:500;font-size:12px;border-radius:2px;min-width:50px;flex:1;opacity:",function(t){var e=t.disabled;return e?.4:1},";&:after{content:'';position:absolute;bottom:0;left:0;width:15px;height:2px;background:",function(t){var e,r=t.theme,n=t.monomerShortName,a=t.isPeptide,i=a?r.ketcher.peptide.color:r.ketcher.monomer.color;return((e=i[n])===null||e===void 0?void 0:e.regular)||r.ketcher.monomer.color.default.regular},";border-radius:0 0 0 2px;}"),X_=x("div",{target:"eifx56c1"})(function(){return{fontWeight:"700"}},""),F0=function(e){var r=e.isPeptide?s1:l1,n=r.map(function(a){return[a,e.monomerCount[a]||0]});return n.push([ts,e.monomerCount[ts]||0]),n.sort(function(a,i){return a[0]===ts?1:a[0].localeCompare(i[0])}),v(Z_,{children:fw(n,function(a){var i=L(a,2),o=i[0],u=i[1];return E(Q_,{monomerShortName:o,isPeptide:e.isPeptide,disabled:u===0,children:[v(X_,{children:o}),v("div",{children:u})]},o)})})},er=function(e){var r;return E($_,{disabled:e.disabled,children:[E(G_,{children:[e.name,e.value!==void 0&&":"]}),e.onChangeValue?v(Y_,{value:(r=e.value)!==null&&r!==void 0?r:"",id:"macromolecule-property-".concat(e.name),type:"number",min:0,inputClassName:q0,onChange:function(a){var i;return e==null||(i=e.onChangeValue)===null||i===void 0?void 0:i.call(e,Number(a))}}):v(V_,{children:e.value}),e.hint&&v(W_,{title:e.hint,children:v(K_,{name:"about"})}),e.options&&e.selectedOption&&e.onChangeOption&&v(j0,{options:e.options.map(function(n){return{id:n,label:n}}),currentSelection:e.selectedOption,selectionHandler:e.onChangeOption})]})},J_=function(e){var r=e.part,n=r.match(/^([A-Za-z]+)(\d+)$/);if(!n)return r;var a=L(n,3);a[0];var i=a[1],o=a[2];return E("span",{children:[i,v("sub",{children:o})," "]})},eO=x("svg",{target:"eifx56c0"})(function(){return{width:"100%",height:"100%"}},"");function tO(t,e,r){var n=t.length;if(r>=n||r===0)return{xs:t,ys:e};for(var a=[t[0]],i=[e[0]],o=(n-2)/(r-2),u=0,s=0;s<r-2;s++){for(var l=Math.floor((s+1)*o)+1,c=Math.floor((s+2)*o)+1,d=l,f=c,h=0,p=0,m=f-d,g=d;g<f;g++)h+=t[g],p+=e[g];h/=m,p/=m;for(var b=Math.floor(s*o)+1,w=Math.floor((s+1)*o)+1,M=-1,y=b,C=b;C<w;C++){var S=Math.abs((t[u]-h)*(e[C]-e[u])-(t[u]-t[C])*(p-e[u]));S>M&&(M=S,y=C)}a.push(t[y]),i.push(e[y]),u=y}return a.push(t[n-1]),i.push(e[n-1]),{xs:a,ys:i}}var rO=function(e){var r=e.data,n=tO(r.map(function(i,o){return o+1}),r,100),a=A.useRef(null);return A.useEffect(function(){if(!(!n.xs.length||!a.current)){var i=a.current.width.baseVal.value,o=a.current.height.baseVal.value,u={top:10,right:10,bottom:20,left:30};Er(a.current).selectAll("*").remove();var s=Ss().domain([0,n.xs.length-1]).range([u.left,i-u.right]),l=Ss().domain([0,1]).range([o-u.bottom,u.top]),c=I5().x(function(m,g){return s(g)}).y(function(m){return l(m)}).curve(Cg),d=Math.floor(n.xs.length*20/100),f=Er(a.current),h=_C(s).tickValues([d,n.xs.length-1-d]).tickFormat(function(m){return n.xs[Number(m)]});f.append("g").attr("transform","translate(0,".concat(o-u.bottom,")")).call(h).call(function(m){return m.select(".domain").remove()}).call(function(m){return m.selectAll("line").attr("stroke","#CAD3DD").attr("y1",-o)}).call(function(m){return m.selectAll("text").attr("font-size","8px")});var p=OC(l).tickValues([0,.5,1]).tickFormat(Dl(".1f"));f.append("g").attr("transform","translate(".concat(u.left,",0)")).call(p).call(function(m){return m.select(".domain").remove()}).call(function(m){m.selectAll("line").each(function(g,b,w){g===.5?Er(w[b]).attr("x1",i).attr("stroke","#CAD3DD").attr("stroke-dasharray",2):Er(w[b]).remove()})}).call(function(m){return m.selectAll("text").attr("font-size","8px")}),f.append("path").datum(n.ys).attr("fill","none").attr("stroke","#167782").attr("stroke-width",1).attr("d",c)}},[r]),v(eO,{ref:a})},nO=function(e){return e.isError?E(N0,{children:[v(R0,{children:"No Data Available"}),v(D0,{children:"Select monomer, chain or part of a chain"})]}):E(T0,{children:[E(U_,{children:[E(L0,{children:[v(er,{name:"Isoelectric Point",value:ve.isNumber(e.macromoleculesProperties.pKa)?In(e.macromoleculesProperties.pKa,2):"–",hint:"The isoelectric point is calculated as the median of all pKa values for the structure."}),v(er,{name:"Extinction Coef.(1/Mcm)",value:ve.isNumber(e.macromoleculesProperties.extinctionCoefficient)?In(e.macromoleculesProperties.extinctionCoefficient):"–",hint:"The extinction coefficient for wavelength of 280nm is calculated using the method from Gill, S.C. and von Hippel, P.H. (1989). Only amino acid natural analogues are used in the calculation."})]}),v(er,{name:"Hydrophobicity"})]}),E(B_,{children:[e.macromoleculesProperties.monomerCount.peptides&&v(F0,{monomerCount:e.macromoleculesProperties.monomerCount.peptides,isPeptide:!0}),v(z_,{children:e.macromoleculesProperties.hydrophobicity&&v(rO,{data:e.macromoleculesProperties.hydrophobicity})})]})]})},mp=function(e){return!/[^0.,]/.test(String(e))},aO=function(e){var r=ee(),n=k(Ll),a=k(jl),i=k(ql),o=k(Fl),u=function(f){r(R5(f))},s=function(f){r(D5(f))},l=function(f){r(L5(f.toString()))},c=function(f){r(j5(f.toString()))};return e.isError?E(N0,{children:[v(R0,{children:"No Data Available"}),v(D0,{children:"Select a nucleotide/nucleoside, chain or part of a chain containing nucleotides/nucleosides"})]}):E(T0,{children:[E(H_,{children:[ve.isNumber(e.macromoleculesProperties.Tm)?v(er,{name:"Melting Temp. (°C)",value:In(e.macromoleculesProperties.Tm,1),hint:"The melting temperature is calculated using the method from Khandelwal G. and Bhyravabhotla J. (2010). Only base natural analogues are used in the calculation."}):v("div",{}),E(L0,{children:[v(er,{name:"[Unipositive Ions]",value:i,options:["nM","μM","mM"],selectedOption:n,disabled:!ve.isNumber(e.macromoleculesProperties.Tm)&&!mp(i),onChangeOption:u,onChangeValue:l}),v(er,{name:"[Oligonucleotides]",value:o,options:["nM","μM","mM"],selectedOption:a,disabled:!ve.isNumber(e.macromoleculesProperties.Tm)&&!mp(o),onChangeOption:s,onChangeValue:c})]})]}),e.macromoleculesProperties.monomerCount.nucleotides&&v(F0,{monomerCount:e.macromoleculesProperties.monomerCount.nucleotides})]})},Et;(function(t){t[t.PEPTIDES=0]="PEPTIDES",t[t.RNA=1]="RNA",t[t.NO_TAB=-1]="NO_TAB"})(Et||(Et={}));var Te;(function(t){t.Da="Da",t.kDa="kDa",t.MDa="MDa"})(Te||(Te={}));var iO=z(z(z({},Te.Da,1),Te.kDa,1e3),Te.MDa,1e6),gp=function(e){return ve.isNumber(e)?e<1e3?Te.Da:e<1e6?Te.kDa:Te.MDa:Te.Da},Kt,oO=function(){var e=ee(),r=k(re),n=k(H5),a=k(Ll),i=k(jl),o=k(ql),u=k(Fl),s=n?.[0],l=A.useState(Et.PEPTIDES),c=L(l,2),d=c[0],f=c[1],h=A.useState(gp(s?.mass)),p=L(h,2),m=p[0],g=p[1],b=k(Ig),w=k0(),M=!b,y=A.useRef(w),C=A.useCallback(ve.debounce(function(D){y.current(D)},500),[]);A.useEffect(function(){y.current=function(D){w(D)}},[w]),A.useEffect(function(){return Kt&&r!==null&&r!==void 0&&r.events.selectEntities.hasHandler(Kt)&&r?.events.selectEntities.remove(Kt),Kt=function(){C(M)},r?.events.selectEntities.add(Kt),function(){r?.events.selectEntities.remove(Kt)}},[C,r,M]),A.useEffect(function(){C(M)},[a,i,o,u,M,C]),A.useEffect(function(){f(rs(s,"nucleotides")?Et.RNA:Et.PEPTIDES),g(gp(s?.mass))},[s]);var S=function(F,q){f(q)},I=function(){e(N5(!1))},_=function(F){g(F)},O=!s||n.length>1,T=O||!rs(s,"peptides"),P=O||!rs(s,"nucleotides"),N=A.useMemo(function(){return s!=null&&s.grossFormula?v(L_,{children:s?.grossFormula.split(" ").map(function(D,F){return v(J_,{part:D},F)})}):null},[s?.grossFormula]),R=A.useMemo(function(){return s!=null&&s.mass?E(Y,{children:[v(q_,{children:In(s?.mass/iO[m],3)})," "]}):null},[s?.mass,m]);return b?E(k_,{hasError:d===Et.PEPTIDES&&T||d===Et.RNA&&P,children:[E(T_,{children:[v(N_,{children:E("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[v("path",{d:"M2 6H14",stroke:"#333333"}),v("path",{d:"M2 10H14",stroke:"#333333"})]})}),v(R_,{name:"close",onClick:I})]}),E(D_,{children:[N,R&&E(j_,{children:[R,v(j0,{options:[Te.Da,Te.kDa,Te.MDa].map(function(D){return{id:D,label:D}}),currentSelection:m,selectionHandler:_})]})]}),v(F_,{children:v(e0,{selectedTabIndex:d,onChange:S,isLayoutToRight:!0,tabs:[{caption:"Peptides",testId:"peptides-properties-tab",component:nO,props:{macromoleculesProperties:s,isError:T}},{caption:"RNA/DNA",component:aO,testId:"rna-properties-tab",props:{macromoleculesProperties:s,isError:P}}]})})]}):null},ge=V0(g1),uO=function(e){var r=parseInt(e||"");return isNaN(r)?0:r},sO=function(e,r){if(e===0)return r;var n=fe.instance.MINZOOMSCALE*100,a=fe.instance.MAXZOOMSCALE*100;return e<n?n:e>a?a:e},js=function(e,r){r&&(r.value="".concat(Math.round(e),"%"))},lO=x(Wn,{target:"e1pc97tg0"})(function(t){var e=t.theme,r=t.isActive;return{width:"28px",height:"28px",backgroundColor:r?e.ketcher.color.button.group.active:"white",margin:"2px",padding:"0",borderRadius:"4px",outline:"none",":hover":{backgroundColor:r?e.ketcher.color.button.group.hover:"white"},":hover svg":{fill:r?"white":e.ketcher.color.button.group.active}}},""),cO=function(){var e=ee(),r=k(Ig),n=k0(),a=function(){var i=Un(Se.mark(function o(){var u;return Se.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return u=!r,l.next=3,n(u);case 3:e(Sg({})),Xl();case 5:case"end":return l.stop()}},o)}));return function(){return i.apply(this,arguments)}}();return v(lO,{isActive:r,onClick:a,title:"Calculate properties (".concat(ge.toggleMacromoleculesPropertiesVisibility,")"),"data-testid":"calculate-macromolecule-properties-button",children:v("svg",{width:"15",height:"16",viewBox:"0 0 15 16",xmlns:"http://www.w3.org/2000/svg",fill:r?"white":"#333333",children:v("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.87727 1.65517H9.03053V4.46737L9.42288 5.12973C9.76799 5.04496 10.1287 5 10.5 5C12.9853 5 15 7.01472 15 9.5C15 10.6812 14.5449 11.7562 13.8004 12.559C14.4936 14.1572 13.3016 16 11.456 16H2.54694C0.627617 16 -0.60048 14.0008 0.302223 12.3451C1.6087 9.94883 3.5345 6.39671 4.51457 4.49368V1.65517H3.66783V0H9.87727V1.65517ZM12.2962 13.6272C11.746 13.867 11.1385 14 10.5 14C8.01472 14 6 11.9853 6 9.5C6 7.98987 6.74386 6.65348 7.88515 5.83725L7.33705 4.91194V1.65517H6.20806V4.88502L6.11866 5.05976C5.15873 6.93619 3.14099 10.658 1.79676 13.1235C1.49524 13.6765 1.9056 14.3448 2.54694 14.3448H11.456C11.9075 14.3448 12.2417 14.0139 12.2962 13.6272ZM13.5375 9.5C13.5375 11.1776 12.1776 12.5375 10.5 12.5375C8.82244 12.5375 7.4625 11.1776 7.4625 9.5C7.4625 7.82243 8.82244 6.4625 10.5 6.4625C12.1776 6.4625 13.5375 7.82243 13.5375 9.5Z"})})})};function dO(){var t=ee(),e=k(da),r=k(re),n=k(Ze),a=A.useState([]),i=L(a,2),o=i[0],u=i[1],s=A.useState(!1),l=L(s,2),c=l[0],d=l[1],f=A.useState(),h=L(f,2),p=h[0],m=h[1],g=[e],b=n;A.useEffect(function(){var M=function(C){u(C),C.length&&!ht(C)&&(d(!1),K3(C)?m("antisenseDnaStrand"):W3(C)?m("antisenseRnaStrand"):(m("antisenseStrand"),d(!0)))};return r?.events.selectEntities.add(M),function(){r?.events.selectEntities.remove(M)}},[r]);var w=function(y){I0[y]?t(Jt(y)):y==="undo"||y==="redo"?r.events.selectHistory.dispatch(y):y==="clear"?(r.events.selectTool.dispatch([y]),t(ct("select-rectangle")),r.events.selectTool.dispatch(["select-rectangle"]),n&&Bn(t,r)):(y==="antisenseRnaStrand"||y==="antisenseDnaStrand")&&r.events.createAntisenseChain.dispatch(y==="antisenseDnaStrand")};return E(W,{onItemClick:w,activeMenuItems:g,isHorizontal:!0,children:[E(W.Group,{isHorizontal:!0,divider:!0,children:[v(W.Item,{itemId:"clear",title:"Clear Canvas (".concat(ge.clear,")"),testId:"clear-canvas"}),v(W.Item,{itemId:"open",title:"Open...",disabled:b,testId:"open-file-button"}),v(W.Item,{itemId:"save",title:"Save as...",testId:"save-file-button"})]}),E(W.Group,{isHorizontal:!0,divider:!0,children:[v(W.Item,{itemId:"undo",title:"Undo (".concat(ge.undo,")"),disabled:b,testId:"undo"}),v(W.Item,{itemId:"redo",title:"Redo (".concat(ge.redo,")"),disabled:b,testId:"redo"})]}),E(W.Group,{isHorizontal:!0,children:[E(W.Submenu,{disabled:!(o!=null&&o.length)||!Rt(o)||ht(o),needOpenByMenuItemClick:c,vertical:!0,layoutModeButton:!0,generalTitle:"Create Antisense Strand",testId:"Create Antisense Strand",activeItem:p,children:[v(W.Item,{itemId:"antisenseRnaStrand",title:"Create RNA Antisense Strand (".concat(ge.createRnaAntisenseStrand,")"),disabled:!(o!=null&&o.length)||!Rt(o)||ht(o),testId:"antisenseRnaStrand",type:"button"}),v(W.Item,{itemId:"antisenseDnaStrand",title:"Create DNA Antisense Strand (".concat(ge.createDnaAntisenseStrand,")"),disabled:!(o!=null&&o.length)||!Rt(o)||ht(o),testId:"antisenseDnaStrand",type:"button"})]}),v(cO,{})]})]})}function fO(){var t=k(da),e=k(re),r=gr()===tr.sequence,n=[t],a=function(o){e.events.selectTool.dispatch([o,{toolName:o}])};return E(W,{testId:"left-toolbar",onItemClick:a,activeMenuItems:n,children:[E(W.Group,{divider:!0,children:[v(W.Item,{itemId:"hand",title:"Hand Tool (".concat(ge.hand,")"),testId:"hand"}),v(W.Item,{itemId:"select-rectangle",title:"Select Rectangle  (".concat(ge.exit,")"),testId:"select-rectangle"}),v(W.Item,{itemId:"erase",title:"Erase (".concat(ge.erase,")"),testId:"erase",disabled:r})]}),v(W.Group,{children:E(W.Submenu,{disabled:r,testId:"bonds-drop-down-button",needOpenByMenuItemClick:!1,children:[v(W.Item,{itemId:"bond-single",title:"Single Bond (1)",testId:"single-bond",disabled:r}),v(W.Item,{itemId:"bond-hydrogen",title:"Hydrogen Bond (2)",testId:"hydrogen-bond",disabled:r})]})})]})}var vO=x("div",{target:"e1aw4j3q7"})({name:"bjn8wh",styles:"position:relative"}),hO=x(Kn,{target:"e1aw4j3q6"})("display:flex;color:",function(t){var e=t.theme;return e.ketcher.color.dropdown.primary},";padding-right:0;padding-left:0;& svg{margin-left:2px;width:1rem;height:1rem;}"),pO=x("span",{target:"e1aw4j3q5"})({name:"td41hq",styles:"width:35px"}),mO=x(E1,{target:"e1aw4j3q4"})("& .MuiPopover-paper{padding:8px;width:175px;border:none;border-radius:0px 0px 4px 4px;box-shadow:",function(t){var e=t.theme;return e.ketcher.shadow.regular},";box-sizing:border-box;}"),gO=x("div",{target:"e1aw4j3q3"})({name:"5s1n17",styles:"display:flex;flex-direction:column;white-space:nowrap;word-break:keep-all;background:white"}),ns=x(Kn,{target:"e1aw4j3q2"})("display:flex;justify-content:space-between;font-size:",function(t){var e=t.theme;return e.ketcher.font.size.regular},";line-height:14px;padding:7px 8px;text-transform:none;color:",function(t){var e=t.theme;return e.ketcher.color.dropdown.primary},";"),as=x("span",{target:"e1aw4j3q1"})({name:"btyqtq",styles:"color:#cad3dd"}),yO=x("input",{target:"e1aw4j3q0"})("border:1px solid #cad3dd;border-radius:4px;padding:3px 8px;color:",function(t){var e=t.theme;return e.ketcher.color.text.light},";font-size:",function(t){var e=t.theme;return e.ketcher.font.size.medium},";line-height:16px;margin-bottom:8px;&:hover{border-color:",function(t){var e=t.theme;return e.ketcher.color.input.border.hover},";}&:active,&:focus{border-color:",function(t){var e=t.theme;return e.ketcher.outline.selected.color},";outline:none;}&::after,&::before{display:none;}"),bO=function(e){var r=e.onZoomSubmit,n=e.currentZoom,a=e.inputRef,i=A.useCallback(function(u){var s=a.current;if(s){var l=[ge["zoom-out"],ge["zoom-in"]];l.includes(u.key)||u.nativeEvent.stopImmediatePropagation(),u.key==="Enter"&&(r(),s.select())}},[r,a,ge]),o=function(s){var l=s.target;l.select()};return A.useEffect(function(){var u=a.current;js(n,u),document.activeElement===u&&u?.select()},[n,a]),A.useEffect(function(){var u=a.current;u?.focus(),u?.select()},[a]),v(yO,{ref:a,"data-testid":"zoom-value",onFocus:o,onKeyDown:i})},wO=function(){var e=A.useState(!1),r=L(e,2),n=r[0],a=r[1],i=A.useState(100),o=L(i,2),u=o[0],s=o[1],l=A.useRef(null),c=A.useRef(null);A.useEffect(function(){var b;fe===null||fe===void 0||(b=fe.instance)===null||b===void 0||b.subscribeOnZoomEvent(function(){var w;s(Math.round((fe===null||fe===void 0||(w=fe.instance)===null||w===void 0?void 0:w.getZoomLevel())*100))})},[fe===null||fe===void 0?void 0:fe.instance]);var d=A.useCallback(function(){var b=c.current;if(b){var w=uO(b.value);if(w&&w!==u){var M=sO(w,u);js(M,b),fe.instance.zoomTo(M/100)}else js(u,b)}},[u]),f=function(){a(!1)},h=function(){a(!0)},p=function(){fe.instance.zoomIn()},m=function(){fe.instance.zoomOut()},g=function(){fe.instance.resetZoom()};return E(vO,{ref:l,children:[E(hO,{onClick:h,"data-testid":"zoom-selector",children:[E(pO,{"data-testid":"zoom-input",children:[u,"%"]}),v(se,{name:"chevron"})]}),v(mO,{open:n,onClose:f,anchorEl:l.current,container:document.querySelector(qt),anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:E(gO,{children:[v(bO,{onZoomSubmit:d,inputRef:c,currentZoom:u}),E(ns,{"data-testid":"zoom-out",title:"Zoom Out",onClick:m,children:[v("span",{children:"Zoom out"}),v(as,{children:ge["zoom-minus"]})]}),E(ns,{"data-testid":"zoom-in",title:"Zoom In",onClick:p,children:[v("span",{children:"Zoom in"}),v(as,{children:ge["zoom-plus"]})]}),E(ns,{"data-testid":"zoom-default",title:"Zoom 100%",onClick:g,children:[v("span",{children:"Zoom 100%"}),v(as,{children:ge["zoom-reset"]})]})]})})]})},xO=function(){var e=k(re),r=[{name:"edit_connection_points",title:"Edit Connection Points...",disabled:!1,hidden:function(o){var u=o.props;return!(u!=null&&u.polymerBondRenderer)}}],n=function(o){var u=o.id,s=o.props;switch(u){case"edit_connection_points":{var l=s.polymerBondRenderer.polymerBond;e.events.openMonomerConnectionModal.dispatch({firstMonomer:l.firstMonomer,secondMonomer:l.secondMonomer,polymerBond:l,isReconnectionDialog:!0}),e.events.startNewSequence.dispatch(s.sequenceItemRenderer);break}}},a=document.querySelector(qt);return a?Vn.createPortal(v(ma,{id:Ke.FOR_POLYMER_BOND,handleMenuChange:n,menuItems:r}),a):null};function yp(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function CO(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yp(Object(r),!0).forEach(function(n){z(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yp(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var MO=[ic.bondSingle,ic.selectRectangle],SO=function(){var e=k(re),r=k(da),n=k(z5),a=ee(),i=k(ha),o=k(Ag),u=A.useCallback(function(){a(Is(e?.monomersLibrary))},[e]);A.useEffect(function(){return e?.events.updateMonomersLibrary.add(u),function(){e?.events.updateMonomersLibrary.remove(u)}},[e]),A.useEffect(function(){var h=function(m){var g=L(m,1),b=g[0];b!==r&&a(ct(b))};return e&&(e.events.error.add(function(p){a(hh(p))}),e.events.openErrorModal.add(function(p){a(Kr(p))}),a(ct("select-rectangle")),e.events.selectTool.dispatch(["select-rectangle"]),e.events.openMonomerConnectionModal.add(function(p){return a(Jt({name:"monomerConnection",additionalProps:p}))}),e.events.openConfirmationDialog.add(function(p){return a(Jt({name:"confirmationDialog",additionalProps:p}))}),e.events.selectTool.add(h)),function(){a(ct(null)),e?.events.selectTool.remove(h)}},[e]);var s=A.useCallback(function(h){return a(or(h))},[a]),l=A.useCallback(ve.debounce(function(h){return s(h)},500),[s]);A.useEffect(function(){var h=function(m){var g=L(m,1),b=g[0];b!==r&&a(ct(b))};return e&&(e.events.error.add(function(p){a(hh(p))}),e.events.openErrorModal.add(function(p){a(Kr(p))}),a(ct("select-rectangle")),e.events.selectTool.dispatch(["select-rectangle"]),e.events.openMonomerConnectionModal.add(function(p){return a(Jt({name:"monomerConnection",additionalProps:p}))}),e.events.selectTool.add(h)),function(){a(ct(null)),e?.events.selectTool.remove(h)}},[e]);var c=A.useCallback(function(h,p){var m={type:ce.Bond,polymerBond:h,style:p};l(m)},[l]),d=A.useCallback(function(h){var p,m,g;if(h.buttons!==1&&h.buttons!==2){if(n){h.preventDefault(),h.stopPropagation();return}var b=(p=h.target.__data__)===null||p===void 0?void 0:p.polymerBond;if(!(b&&!b.finished||b instanceof K0)){if(b){var w=P1(b,h.target.getBoundingClientRect());c(b,w);return}var M=(m=h.target.__data__)===null||m===void 0?void 0:m.node,y=((g=h.target.__data__)===null||g===void 0?void 0:g.monomer)||M?.monomer;if(!(M&&M instanceof wp)){if(y instanceof We){var C={type:ce.AmbiguousMonomer,monomer:y.variantMonomerItem,target:h.target};l(C);return}var S=y.monomerItem,I=CO({},y.attachmentPointsToBonds),_=M instanceof Lr||M instanceof jr;if(_){var O,T=M instanceof Lr?[M.sugar.monomerItem,M.rnaBase.monomerItem,(O=M.phosphate)===null||O===void 0?void 0:O.monomerItem]:[M.sugar.monomerItem,M.rnaBase.monomerItem];if(M.rnaBase instanceof We){var P={type:ce.AmbiguousMonomer,monomer:M.rnaBase.variantMonomerItem,presetMonomers:T,target:h.target};l(P);return}var N=i.find(function(q){var B=[q.sugar,q.base,q.phosphate];return T.every(function($,U){var de;return $?.props.Name===((de=B[U])===null||de===void 0?void 0:de.props.Name)})}),R;M instanceof jr?R=$e.ChainEnd:M.firstMonomerInNode.R1AttachmentPoint!==void 0?R=$e.ChainStart:R=$e.ChainMiddle;var D={type:ce.Preset,monomers:T,name:N?.name,idtAliases:N?.idtAliases,position:R,target:h.target};l(D);return}var F={type:ce.Monomer,monomer:S,attachmentPointsToBonds:I,target:h.target};l(F)}}}},[c,l,i,n]),f=A.useCallback(function(){l.cancel(),a(or(void 0))},[l,a]);return A.useEffect(function(){e?.events.mouseOverMonomer.add(d),e?.events.mouseLeaveMonomer.add(f),e?.events.mouseOverSequenceItem.add(d),e?.events.mouseLeaveSequenceItem.add(f),e?.events.mouseOverPolymerBond.add(d),e?.events.mouseLeavePolymerBond.add(f);var h=function(m){f();var g=m.buttons===1;(!g||!MO.includes(r))&&d(m)};return e?.events.mouseOnMoveMonomer.add(h),e?.events.mouseOnMoveSequenceItem.add(h),e?.events.mouseOnMovePolymerBond.add(h),window.addEventListener("hidePreview",f),function(){e?.events.mouseOverMonomer.remove(d),e?.events.mouseLeaveMonomer.remove(f),e?.events.mouseOverSequenceItem.remove(d),e?.events.mouseLeaveSequenceItem.remove(f),e?.events.mouseOverPolymerBond.remove(d),e?.events.mouseLeavePolymerBond.remove(f),e?.events.mouseOnMoveMonomer.remove(h),e?.events.mouseOnMoveSequenceItem.remove(h),e?.events.mouseOnMovePolymerBond.remove(h),window.removeEventListener("hidePreview",f)}},[e,r,d,f]),A.useEffect(function(){o||e?.events.resetSequenceEditMode.dispatch()},[o]),v(Y,{})},AO=function(e){var r=e.selectedMonomers,n=k(re),a=[{name:"copy",title:"Copy"},{name:"create_antisense_rna_chain",title:"Create Antisense RNA Strand",separator:!1,disabled:ht(r),hidden:function(s){var l=s.props;return!(l!=null&&l.selectedMonomers)||!Rt(l?.selectedMonomers)}},{name:"create_antisense_dna_chain",title:"Create Antisense DNA Strand",separator:!0,disabled:ht(r),hidden:function(s){var l=s.props;return!(l!=null&&l.selectedMonomers)||!Rt(l?.selectedMonomers)}},{name:"delete",title:"Delete"}],i=function(s){var l=s.id;switch(l){case"copy":n.events.copySelectedStructure.dispatch();break;case"create_antisense_rna_chain":n.events.createAntisenseChain.dispatch(!1);break;case"create_antisense_dna_chain":n.events.createAntisenseChain.dispatch(!0);break;case"delete":n.events.deleteSelectedStructure.dispatch();break}},o=document.querySelector(qt);return o&&Vn.createPortal(v(ma,{id:Ke.FOR_SELECTED_MONOMERS,handleMenuChange:i,menuItems:a}),o)},IO=x(Wn,{target:"e1846tr80"})(function(t){var e=t.theme,r=t.isActive;return{width:"40px",height:"31px",backgroundColor:r?e.ketcher.color.button.group.active:"white",marginRight:"8px",border:r?e.ketcher.outline.selected.color:e.ketcher.outline.small,borderRadius:"4px",outline:"none",":hover":{backgroundColor:r?e.ketcher.color.button.group.hover:"white"},":hover svg":{fill:r?"white":e.ketcher.color.button.group.active}}},""),PO=function(){var e=k(re),r=A.useState(!0),n=L(r,2),a=n[0],i=n[1],o=gr(),u=o===tr.sequence,s=k(Ag),l=function(){var d=!a;i(d),e.events.toggleIsSequenceSyncEditMode.dispatch(d),Xl()};return A.useEffect(function(){u&&s&&e.events.toggleIsSequenceSyncEditMode.dispatch(a)},[u,s]),u&&s?v(Y,{children:v(IO,{isActive:a,onClick:l,"data-testid":"sync_sequence_edit_mode","data-isActive":a,children:E("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",fill:a?"white":"#333333",children:[v("rect",{x:"1",y:"1.5",width:"22",height:"2",rx:"1"}),v("rect",{x:"2.5",y:"1.5",width:"5",height:"1.5",rx:"0.75",transform:"rotate(90 2.5 1.5)"}),v("rect",{x:"9.33333",y:"1.5",width:"5",height:"1.5",rx:"0.75",transform:"rotate(90 9.33333 1.5)"}),v("rect",{x:"16.1667",y:"1.5",width:"5",height:"1.5",rx:"0.75",transform:"rotate(90 16.1667 1.5)"}),v("rect",{x:"23",y:"1.5",width:"5",height:"1.5",rx:"0.75",transform:"rotate(90 23 1.5)"}),v("path",{d:"M2.16873 14.2715C2.08963 14.3652 2.02518 14.4253 1.97537 14.4517C1.9285 14.478 1.8699 14.4912 1.79959 14.4912C1.66189 14.4912 1.55057 14.4458 1.46561 14.355C1.38357 14.2612 1.34256 14.1074 1.34256 13.8936V13.2871C1.34256 13.0703 1.38357 12.9165 1.46561 12.8257C1.55057 12.7319 1.66189 12.6851 1.79959 12.6851C1.90506 12.6851 1.99295 12.7129 2.06326 12.7686C2.1365 12.8242 2.19217 12.918 2.23025 13.0498C2.26834 13.1787 2.30789 13.2666 2.34891 13.3135C2.43387 13.4043 2.58475 13.4966 2.80154 13.5903C3.01834 13.6841 3.25564 13.731 3.51346 13.731C3.91482 13.731 4.24441 13.6372 4.50223 13.4497C4.66629 13.3354 4.74832 13.1948 4.74832 13.0278C4.74832 12.9165 4.70877 12.8125 4.62967 12.7158C4.55057 12.6162 4.42166 12.5342 4.24295 12.4697C4.12576 12.4258 3.86355 12.3657 3.45633 12.2896C2.96414 12.1987 2.59207 12.0889 2.34012 11.96C2.08816 11.8311 1.88895 11.6494 1.74246 11.415C1.59598 11.1807 1.52273 10.9272 1.52273 10.6548C1.52273 10.2241 1.70291 9.84766 2.06326 9.52539C2.42361 9.2002 2.89236 9.0376 3.46951 9.0376C3.70096 9.0376 3.91482 9.06396 4.11111 9.1167C4.31033 9.1665 4.49051 9.24414 4.65164 9.34961C4.76883 9.23535 4.88602 9.17822 5.0032 9.17822C5.13504 9.17822 5.24197 9.2251 5.324 9.31885C5.40897 9.40967 5.45145 9.56201 5.45145 9.77588V10.4526C5.45145 10.6694 5.40897 10.8247 5.324 10.9185C5.24197 11.0093 5.13504 11.0547 5.0032 11.0547C4.89188 11.0547 4.7952 11.021 4.71316 10.9536C4.64871 10.9038 4.60037 10.8042 4.56814 10.6548C4.53592 10.5054 4.4949 10.3984 4.4451 10.334C4.36014 10.2227 4.2327 10.1289 4.06277 10.0527C3.89285 9.97656 3.69656 9.93848 3.47391 9.93848C3.14871 9.93848 2.8909 10.0146 2.70047 10.167C2.51297 10.3164 2.41922 10.4731 2.41922 10.6372C2.41922 10.7485 2.4573 10.8569 2.53348 10.9624C2.61258 11.0649 2.72684 11.1455 2.87625 11.2041C2.97586 11.2451 3.25564 11.311 3.71561 11.4019C4.1785 11.4927 4.53299 11.5923 4.77908 11.7007C5.02811 11.8091 5.23465 11.979 5.39871 12.2104C5.56277 12.4419 5.6448 12.7173 5.6448 13.0366C5.6448 13.4819 5.48807 13.8379 5.17459 14.1045C4.75857 14.4561 4.2283 14.6318 3.58377 14.6318C3.33475 14.6318 3.09158 14.6011 2.85428 14.5396C2.6199 14.481 2.39139 14.3916 2.16873 14.2715ZM9.615 12.2632V13.5991H10.2214C10.4382 13.5991 10.5921 13.6416 10.6829 13.7266C10.7766 13.8086 10.8235 13.917 10.8235 14.0518C10.8235 14.1836 10.7766 14.292 10.6829 14.377C10.5921 14.459 10.4382 14.5 10.2214 14.5H8.10768C7.89381 14.5 7.74 14.459 7.64625 14.377C7.55543 14.292 7.51002 14.1821 7.51002 14.0474C7.51002 13.9155 7.55543 13.8086 7.64625 13.7266C7.74 13.6416 7.89381 13.5991 8.10768 13.5991H8.71412V12.2632L7.22438 10.0747C7.02516 10.0747 6.87867 10.0322 6.78492 9.94727C6.6941 9.8623 6.64869 9.75391 6.64869 9.62207C6.64869 9.4873 6.6941 9.37891 6.78492 9.29688C6.87867 9.21191 7.03395 9.16943 7.25074 9.16943L8.06813 9.17383C8.28492 9.17383 8.43873 9.21484 8.52955 9.29688C8.6233 9.37891 8.67018 9.4873 8.67018 9.62207C8.67018 9.82422 8.55152 9.9751 8.31422 10.0747L9.16676 11.3315L10.0017 10.0747C9.86988 10.0249 9.77613 9.96191 9.72047 9.88574C9.6648 9.80957 9.63697 9.72168 9.63697 9.62207C9.63697 9.4873 9.68238 9.37891 9.7732 9.29688C9.86695 9.21484 10.0222 9.17236 10.239 9.16943L11.0872 9.17383C11.304 9.17383 11.4578 9.21484 11.5486 9.29688C11.6423 9.37891 11.6892 9.4873 11.6892 9.62207C11.6892 9.75684 11.6423 9.8667 11.5486 9.95166C11.4548 10.0337 11.3025 10.0747 11.0916 10.0747L9.615 12.2632ZM13.7082 10.8745V13.5991H14.0334C14.2502 13.5991 14.404 13.6416 14.4949 13.7266C14.5886 13.8086 14.6355 13.917 14.6355 14.0518C14.6355 14.1836 14.5886 14.292 14.4949 14.377C14.404 14.459 14.2502 14.5 14.0334 14.5H12.8513C12.6345 14.5 12.4792 14.459 12.3855 14.377C12.2947 14.292 12.2493 14.1821 12.2493 14.0474C12.2493 13.9185 12.2947 13.8115 12.3855 13.7266C12.4763 13.6416 12.6169 13.5991 12.8074 13.5991V10.0747H12.6667C12.4499 10.0747 12.2947 10.0337 12.2009 9.95166C12.1101 9.8667 12.0647 9.75684 12.0647 9.62207C12.0647 9.4873 12.1101 9.37891 12.2009 9.29688C12.2947 9.21191 12.4499 9.16943 12.6667 9.16943L13.7082 9.17383L16.011 12.7861V10.0747H15.6858C15.469 10.0747 15.3137 10.0337 15.22 9.95166C15.1291 9.8667 15.0837 9.75684 15.0837 9.62207C15.0837 9.4873 15.1291 9.37891 15.22 9.29688C15.3137 9.21191 15.469 9.16943 15.6858 9.16943L16.8679 9.17383C17.0847 9.17383 17.2385 9.21484 17.3293 9.29688C17.4231 9.37891 17.47 9.4873 17.47 9.62207C17.47 9.75391 17.4246 9.8623 17.3337 9.94727C17.2429 10.0322 17.1038 10.0747 16.9163 10.0747V14.5H16.0242L13.7082 10.8745ZM21.9236 9.40234C21.9792 9.32617 22.0393 9.26904 22.1037 9.23096C22.1711 9.19287 22.2429 9.17383 22.3191 9.17383C22.4509 9.17383 22.5578 9.21924 22.6399 9.31006C22.7248 9.40088 22.7673 9.55469 22.7673 9.77148V10.5361C22.7673 10.7529 22.7248 10.9082 22.6399 11.002C22.5578 11.0928 22.4509 11.1382 22.3191 11.1382C22.1989 11.1382 22.1023 11.1045 22.029 11.0371C21.9558 10.9697 21.9016 10.8438 21.8664 10.6592C21.8459 10.5361 21.8049 10.4409 21.7434 10.3735C21.6233 10.2417 21.4548 10.1362 21.238 10.0571C21.0241 9.97803 20.8088 9.93848 20.592 9.93848C20.3225 9.93848 20.0749 9.99707 19.8493 10.1143C19.6237 10.2314 19.4245 10.4219 19.2517 10.6855C19.0788 10.9492 18.9924 11.2627 18.9924 11.626V12.2104C18.9924 12.644 19.1491 13.0059 19.4626 13.2959C19.779 13.5859 20.217 13.731 20.7766 13.731C21.1106 13.731 21.3933 13.6855 21.6247 13.5947C21.7595 13.542 21.903 13.438 22.0554 13.2827C22.1491 13.189 22.2224 13.1289 22.2751 13.1025C22.3279 13.0732 22.3879 13.0586 22.4553 13.0586C22.5754 13.0586 22.6809 13.104 22.7717 13.1948C22.8625 13.2856 22.9079 13.3926 22.9079 13.5156C22.9079 13.6387 22.8464 13.7705 22.7234 13.9111C22.5446 14.1162 22.3147 14.2773 22.0334 14.3945C21.6555 14.5527 21.238 14.6318 20.781 14.6318C20.2478 14.6318 19.7673 14.522 19.3396 14.3022C18.9939 14.1265 18.6994 13.8496 18.4563 13.4717C18.2131 13.0908 18.0915 12.6763 18.0915 12.228V11.6172C18.0915 11.1484 18.1999 10.7119 18.4167 10.3076C18.6364 9.90039 18.9397 9.58691 19.3264 9.36719C19.7131 9.14746 20.1233 9.0376 20.5569 9.0376C20.8176 9.0376 21.0608 9.06836 21.2863 9.12988C21.5149 9.18848 21.7273 9.2793 21.9236 9.40234Z"}),v("rect",{x:"23",y:"22.5",width:"22",height:"2",rx:"1",transform:"rotate(-180 23 22.5)"}),v("rect",{x:"21.5",y:"22.5",width:"5",height:"1.5",rx:"0.75",transform:"rotate(-90 21.5 22.5)"}),v("rect",{x:"14.6667",y:"22.5",width:"5",height:"1.5",rx:"0.75",transform:"rotate(-90 14.6667 22.5)"}),v("rect",{x:"7.83333",y:"22.5",width:"5",height:"1.5",rx:"0.75",transform:"rotate(-90 7.83333 22.5)"}),v("rect",{x:"1",y:"22.5",width:"5",height:"1.5",rx:"0.75",transform:"rotate(-90 1 22.5)"})]})})}):null},EO=w1(U4);function NO(t){var e=t.onInit,r=t.theme,n=t.togglerComponent,a=t.monomersLibraryUpdate,i=t.isMacromoleculesEditorTurnedOn,o=A.useRef(null),u=r?ve.merge(yh,r):yh,s=ve.merge(EO,{ketcher:u});return v(S1,{store:H4,children:E(M1,{theme:s,children:[v(x1,{styles:$4}),v(cI,{rootRef:o,isMacromoleculesEditorTurnedOn:i,children:v(f3,{ref:o,className:C1,children:v(_O,{theme:u,togglerComponent:n,monomersLibraryUpdate:a,onInit:e})})})]})})}function _O(t){var e=t.theme,r=t.togglerComponent,n=t.monomersLibraryUpdate,a=t.onInit,i=ee(),o=A.useRef(null),u=k(h4),s=k(re),l=k(B5),c=m3(),d=A.useState(!1),f=L(d,2),h=f[0],p=f[1],m=lI(),g=A.useState(),b=L(g,2),w=b[0],M=b[1],y=A.useState([]),C=L(y,2),S=C[0],I=C[1],_=vn({id:Ke.FOR_SEQUENCE}),O=_.show,T=vn({id:Ke.FOR_POLYMER_BOND}),P=T.show,N=vn({id:Ke.FOR_SELECTED_MONOMERS}),R=N.show;A.useEffect(function(){return i(k5({theme:e,canvas:o.current,monomersLibraryUpdate:n,onInit:a})),function(){i(T5(null))}},[i]),b3(),A.useEffect(function(){s?.events.rightClickSequence.add(function(q){var B=L(q,2),$=B[0],U=B[1];M(U),window.dispatchEvent(new Event("hidePreview")),i(Mg(!0)),O({event:$,props:{sequenceItemRenderer:$.target.__data__}})}),s?.events.rightClickPolymerBond.add(function(q){var B=L(q,2),$=B[0],U=B[1];P({event:$,props:{polymerBondRenderer:U}})}),s?.events.rightClickSelectedMonomers.add(function(q){var B=L(q,2),$=B[0],U=B[1];I(U),R({event:$,props:{selectedMonomers:U}})}),s?.events.rightClickCanvas.add(function(q){var B=L(q,2),$=B[0],U=B[1];M(U),O({event:$,props:{}})}),s?.events.toggleMacromoleculesPropertiesVisibility.add(function(){i(Sg({}))})},[s]),A.useEffect(function(){return s?.zoomTool.observeCanvasResize(),function(){s?.zoomTool.destroy()}},[s]);var D=function(){i(l4())},F=A.useCallback(function(){p(function(q){return!q})},[]);return E(Y,{children:[E(Pe,{children:[E(Pe.Top,{shortened:h,"data-testid":"top-toolbar",children:[v(dO,{}),E(v3,{children:[v(PO,{}),v(q3,{}),v(O_,{}),v(h3,{className:m?"toggler-component-wrapper--disabled":"",children:r}),v(I3,{}),v(E0,{}),v(wO,{})]})]}),v(Pe.Left,{children:v(fO,{})}),E(Pe.Main,{children:[v(SO,{}),E(p3,{id:"polymer-editor-canvas","data-testid":"ketcher-canvas",preserveAspectRatio:"xMidYMid meet",ref:o,width:"100%",height:"100%",style:{overflow:"hidden",overflowClipMargin:"content-box"},children:[E("defs",{children:[v(r3,{}),v(t3,{}),v(n3,{}),v(a3,{}),v(i3,{}),v(o3,{}),v(u3,{}),v(l3,{}),v(s3,{})]}),v("g",{className:"drawn-structures"}),l&&v("rect",{x:0,y:0,width:"100%",height:"100%",fill:"transparent",pointerEvents:"all"})]}),c&&v(x3,{})]}),v(Pe.Right,{hide:h,children:v(PP,{toggleLibraryVisibility:F})}),v(Pe.Bottom,{children:v(oO,{})}),v(Pe.InsideRoot,{children:h&&v(_P,{onClick:F})})]}),v(__,{}),v(Y3,{selections:w}),v(xO,{}),v(AO,{selectedMonomers:S}),v(QE,{}),v(d3,{}),v(A1,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:!!u,onClose:D,autoHideDuration:6e3,children:E(XE,{id:"error-tooltip",children:[v(JE,{"data-testid":"error-tooltip",children:u}),v(e3,{testId:"error-tooltip-close",iconName:"close",onClick:D})]})})]})}export{NO as default};
